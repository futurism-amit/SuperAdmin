{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "alertPopUp",
        "designer|userClassName": "alertPopUp"
    },
    "designerId": "44c8a5b6-e391-416b-bb3f-6c8b577b850b",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "alertPopUp",
                "designer|params": [
                    "sheet"
                ],
                "designer|targetType": "alertPopUp",
                "fn": "onAlertPopUpAlertConfirm",
                "implHandler": [
                    "var activeCard = Ext.ComponentQuery.query('#RMContentPanel')[0].getActiveItem();\r",
                    "var tabPanel = activeCard.down('tabpanel');\r",
                    "\r",
                    "if(activeCard.getItemId() === \"card-retailer-details\") {\r",
                    "\r",
                    "    if(tabPanel) {\r",
                    "        var activeTab = tabPanel.getActiveItem();\r",
                    "\r",
                    "        if(activeTab.title === \"CRM\" || activeTab.title === \"NOTES\") {\r",
                    "            if(sheet.getItemId() === \"alertForNotes\") {\r",
                    "                var notesList = activeTab.down(\"#mainList\");\r",
                    "                var notesStore = notesList.getStore();\r",
                    "                var selectedNote = notesList.getSelection();\r",
                    "                if(!Ext.isEmpty(selectedNote)) {\r",
                    "                    notesStore.remove(selectedNote);\r",
                    "                    notesList.refresh();\r",
                    "                    var note = activeTab.down(\"#RDNotepadNote\");\r",
                    "                    var adminBtn = activeTab.down(\"#RDNotepadAdminBtn\");\r",
                    "                    var byLabel = activeTab.down(\"#RDNotesNameLabel\");\r",
                    "\r",
                    "                    note.setValue('');\r",
                    "                    byLabel.setHtml(\"by Me on \"+Ext.Date.format(new Date(), 'Y/m/d'));\r",
                    "                    adminBtn.selected = false;\r",
                    "                    adminBtn.setCls('');\r",
                    "                    adminBtn.addCls('x-rm-rdnotesadminbtn-unselected');\r",
                    "                    \r",
                    "                    RMdatalink.app.getController('RetailerDeatilsDataSet').updateRTVDNotes() ;\r",
                    "                }\r",
                    "                else\r",
                    "                    Ext.Msg.alert('Alert', 'Please select a note to Delete', Ext.emptyFn);\r",
                    "\r",
                    "                return;\r",
                    "            }\r",
                    "            var sideTab = Ext.ComponentQuery.query('#RDCRMNotesSideTabPanel')[0].getActiveItem();\r",
                    "            if(sideTab.title === \"PHOTOS\") {\r",
                    "                var photoList = Ext.ComponentQuery.query(\"#RDCRMNotesPhotosView\")[0];\r",
                    "                var photoStore = photoList.getStore();\r",
                    "\r",
                    "                if(!Ext.isEmpty(photoList.getSelection())) {\r",
                    "                    photoStore.remove(photoList.getSelection());\r",
                    "                }\r",
                    "            }\r",
                    "            else if(sideTab.title === \"ATTACHMENTS\") {\r",
                    "                var attList = Ext.ComponentQuery.query(\"#RDCRMNotesAttList\")[0];\r",
                    "                var attStore = attList.getStore();\r",
                    "                if(!Ext.isEmpty(attList.getSelection())) {\r",
                    "                    attStore.remove(attList.getSelection());\r",
                    "                }\r",
                    "            }\r",
                    "        }\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    " if(sheet.getItemId() === \"alertForNotesInhouseList\") {\r",
                    "\r",
                    "                 var noteTab = Ext.ComponentQuery.query('#inhouseNotesTab')[0];\r",
                    "                var notesList = noteTab.down(\"#mainList\");\r",
                    "                var notesStore = notesList.getStore();\r",
                    "                var selectedNote = notesList.getSelection();\r",
                    "                if(!Ext.isEmpty(selectedNote)) {\r",
                    "                    notesStore.remove(selectedNote);\r",
                    "                    notesList.refresh();\r",
                    "                    var note = noteTab.down(\"#inhouseNotepadNote\");\r",
                    "                    var adminBtn = noteTab.down(\"#inhouseNotepadAdminBtn\");\r",
                    "                    var byLabel = noteTab.down(\"#inhouseNotesNameLabel\");\r",
                    "\r",
                    "                    note.setValue('');\r",
                    "                    byLabel.setHtml(\"by Me on \"+Ext.Date.format(new Date(), 'Y/m/d'));\r",
                    "                    adminBtn.selected = false;\r",
                    "                    adminBtn.setCls('');\r",
                    "                    adminBtn.addCls('x-rm-rdnotesadminbtn-unselected');\r",
                    "                }\r",
                    "                else\r",
                    "                    Ext.Msg.alert('Alert', 'Please select a note to Delete', Ext.emptyFn);\r",
                    "\r",
                    "                return;\r",
                    "   }\r",
                    "\r",
                    " if(sheet.getItemId() === \"alertForPhotosInhouseListSide\") {\r",
                    "\r",
                    "                  var photoList = Ext.ComponentQuery.query(\"#inhouseProfileNotesPhotosView\")[0];\r",
                    "                var photoStore = photoList.getStore();\r",
                    "                if(!Ext.isEmpty(photoList.getSelection())) {\r",
                    "                    photoStore.remove(photoList.getSelection());\r",
                    "                }\r",
                    "\r",
                    "                return;\r",
                    "   }\r",
                    "\r",
                    " if(sheet.getItemId() === \"alertForAttachmentsInhouseListSide\") {\r",
                    "\r",
                    "\r",
                    "                var attList = Ext.ComponentQuery.query(\"#inhouseProfileNotesAttList\")[0];\r",
                    "                var attStore = attList.getStore();\r",
                    "\r",
                    "                if(!Ext.isEmpty(attList.getSelection())) {\r",
                    "                    attStore.remove(attList.getSelection());\r",
                    "                }\r",
                    "                return;\r",
                    "   }\r",
                    "\r",
                    " if(sheet.getItemId() === \"alertForDiscountDelete\") {\r",
                    "\r",
                    "          id =  sheet.discountId  ;\r",
                    "         type = sheet.discountType ;\r",
                    "\r",
                    "     var discountsMasterStore = Ext.getStore('discountsMasterStore');\r",
                    "\r",
                    "switch(type){\r",
                    "\r",
                    "    case \"discountsDataLink\":\r",
                    "        var discountsDataLinkTab  = Ext.ComponentQuery.query('#discountsDataLinkTab')[0];\r",
                    "        var list = discountsDataLinkTab.down('#discountList');\r",
                    "        var store = list.getStore();\r",
                    "        var record = store.findRecord('id',id);\r",
                    "        store.remove(record);\r",
                    "        store.sync();\r",
                    "        updateDiscountsDataLink(store);\r",
                    "\r",
                    "        break;\r",
                    "\r",
                    "     case \"discountsEcatlogTab\":\r",
                    "        var discountsDataLinkTab  = Ext.ComponentQuery.query('#discountsEcatlogTab')[0];\r",
                    "        var list = discountsDataLinkTab.down('#discountList');\r",
                    "        var store = list.getStore();\r",
                    "        var record = store.findRecord('id',id);\r",
                    "        store.remove(record);\r",
                    "        store.sync();\r",
                    "\r",
                    "        updateDiscountsEcatalog(store);\r",
                    "\r",
                    "        break;\r",
                    "\r",
                    "     case \"discountsSmartCartTab\":\r",
                    "        var discountsDataLinkTab  = Ext.ComponentQuery.query('#discountsSmartCartTab')[0];\r",
                    "        var list = discountsDataLinkTab.down('#discountList');\r",
                    "        var store = list.getStore();\r",
                    "        var record = store.findRecord('id',id);\r",
                    "        store.remove(record);\r",
                    "        store.sync();\r",
                    "\r",
                    "        updateDiscountsSmartcart(store);\r",
                    "\r",
                    "        break;\r",
                    "\r",
                    "     case \"discountsRMPLCTab\":\r",
                    "        var discountsDataLinkTab  = Ext.ComponentQuery.query('#discountsRMPLCTab')[0];\r",
                    "        var list = discountsDataLinkTab.down('#discountList');\r",
                    "        var store = list.getStore();\r",
                    "        var record = store.findRecord('id',id);\r",
                    "       store.remove(record);\r",
                    "        store.sync();\r",
                    "\r",
                    "        updateDiscountsRmplc(store);\r",
                    "\r",
                    "        break;\r",
                    "\r",
                    "\r",
                    "     case \"discountsIrugzTab\":\r",
                    "        var discountsDataLinkTab  = Ext.ComponentQuery.query('#discountsIrugzTab')[0];\r",
                    "        var list = discountsDataLinkTab.down('#discountList');\r",
                    "        var store = list.getStore();\r",
                    "        var record = store.findRecord('id',id);\r",
                    "        store.remove(record);\r",
                    "        store.sync();\r",
                    "\r",
                    "        updateDiscountsIrugz(store);\r",
                    "\r",
                    "        break;\r",
                    "\r",
                    "\r",
                    "     case \"discountsSidePreviousTab\":\r",
                    "        var discountsDataLinkTab  = Ext.ComponentQuery.query('#discountsSidePreviousTab')[0];\r",
                    "        var list = discountsDataLinkTab.down('#discountList');\r",
                    "        var store = list.getStore();\r",
                    "        var record = store.findRecord('id',id);\r",
                    "        store.remove(record);\r",
                    "        //record.set('comment',comment);\r",
                    "        store.sync();\r",
                    "\r",
                    "        updateDiscountsPreviousDiscounts(store);\r",
                    "\r",
                    "        break;\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "function updateDiscountsDataLink(store){\r",
                    "            var discountRecord = discountsMasterStore.findRecord(\"datalink\",{});\r",
                    "            var records = [] ;\r",
                    "            for(var i=0; i < store.getData().all.length; i++){\r",
                    "                records.push(store.getData().all[i].data);\r",
                    "            }\r",
                    "            discountRecord.set(\"datalink\",records);\r",
                    "}\r",
                    "\r",
                    "function updateDiscountsEcatalog(store){\r",
                    "            var discountRecord = discountsMasterStore.findRecord(\"ecatalog\",{});\r",
                    "            var records = [] ;\r",
                    "            for(var i=0; i < store.getData().all.length; i++){\r",
                    "                records.push(store.getData().all[i].data);\r",
                    "            }\r",
                    "            discountRecord.set(\"ecatalog\",records);\r",
                    "}\r",
                    "\r",
                    "function updateDiscountsSmartcart(store){\r",
                    "            var discountRecord = discountsMasterStore.findRecord(\"smartcart\",{});\r",
                    "            var records = [] ;\r",
                    "            for(var i=0; i < store.getData().all.length; i++){\r",
                    "                records.push(store.getData().all[i].data);\r",
                    "            }\r",
                    "            discountRecord.set(\"smartcart\",records);\r",
                    "}\r",
                    "\r",
                    "function updateDiscountsRmplc(store){\r",
                    "            var discountRecord = discountsMasterStore.findRecord(\"rmplc\",{});\r",
                    "            var records = [] ;\r",
                    "            for(var i=0; i < store.getData().all.length; i++){\r",
                    "                records.push(store.getData().all[i].data);\r",
                    "            }\r",
                    "            discountRecord.set(\"rmplc\",records);\r",
                    "}\r",
                    "function updateDiscountsIrugz(store){\r",
                    "            var discountRecord = discountsMasterStore.findRecord(\"irugz\",{});\r",
                    "            var records = [] ;\r",
                    "            for(var i=0; i < store.getData().all.length; i++){\r",
                    "                records.push(store.getData().all[i].data);\r",
                    "            }\r",
                    "            discountRecord.set(\"irugz\",records);\r",
                    "}\r",
                    "\r",
                    "function updateDiscountsPreviousDiscounts(store){\r",
                    "            var discountRecord = discountsMasterStore.findRecord(\"previousDiscounts\",{});\r",
                    "            var records = [] ;\r",
                    "            for(var i=0; i < store.getData().all.length; i++){\r",
                    "                records.push(store.getData().all[i].data);\r",
                    "            }\r",
                    "            discountRecord.set(\"previousDiscounts\",records);\r",
                    "}\r",
                    "\r",
                    "                return;\r",
                    "   }\r",
                    "//alertForDiscountDelete"
                ],
                "name": "alertconfirm"
            },
            "designerId": "030391b8-0ed5-442c-b4a3-e3cd7520abb2"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "alertPopUp",
                "designer|params": [
                    "sheet"
                ],
                "designer|targetType": "alertPopUp",
                "fn": "onAlertPopUpAlertDecline",
                "implHandler": [
                    ""
                ],
                "name": "alertdecline"
            },
            "designerId": "160411a7-ce5f-424a-b897-50c4b564f858"
        }
    ]
}
{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "activeRelData": [
            "{\r",
            "    query:{},\r",
            "    collection: \"\",\r",
            "    pageNo:1,\r",
            "    pageSize: 50,\r",
            "    sortBy:{}\r",
            "    \r",
            "}"
        ],
        "designer|userClassName": "VendorRetailerRelations",
        "maxPageNo": 1,
        "selectedRetailerProspect": [
            "{}"
        ]
    },
    "configAlternates": {
        "activeRelData": "object",
        "maxPageNo": "number",
        "selectedRetailerProspect": "object"
    },
    "designerId": "6d5a6f8e-a323-48a2-8169-eac1145a16cf",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "activeRelData",
            "type": "string"
        },
        {
            "group": "(Custom Properties)",
            "name": "maxPageNo",
            "type": "string"
        },
        {
            "group": "(Custom Properties)",
            "name": "selectedRetailerProspect",
            "type": "string"
        }
    ],
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "button[itemId=retailersOfVendorsPageLeftBtn]",
                "designer|targetType": "Ext.Button",
                "fn": "onRetailersOfVendorsPageLeftBtnTap",
                "implHandler": [
                    "/*\r",
                    "\r",
                    "     activeRelData: {\r",
                    "            query: {\r",
                    "\r",
                    "            },\r",
                    "            collection: '',\r",
                    "            pageNo: 1,\r",
                    "            pageSize: 50,\r",
                    "            sortBy: {\r",
                    "\r",
                    "            }\r",
                    "        },\r",
                    "\r",
                    "\r",
                    "*/\r",
                    "\r",
                    " if( this.config.activeRelData.pageNo > 1)\r",
                    " {\r",
                    "\r",
                    "     this.config.activeRelData.pageNo -- ;\r",
                    "     this.loadRetailerPagedForVendor();\r",
                    "\r",
                    " }\r",
                    ""
                ],
                "name": "tap"
            },
            "designerId": "dfbbada8-eabc-4882-b8cf-6071cc37a6d7"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "button[itemId=retailersOfVendorsPageRightBtn]",
                "designer|targetType": "Ext.Button",
                "fn": "onRetailersOfVendorsPageRightBtnTap",
                "implHandler": [
                    "/*\r",
                    "\r",
                    "     activeRelData: {\r",
                    "            query: {\r",
                    "\r",
                    "            },\r",
                    "            collection: '',\r",
                    "            pageNo: 1,\r",
                    "            pageSize: 50,\r",
                    "            sortBy: {\r",
                    "\r",
                    "            }\r",
                    "        },\r",
                    "\r",
                    "\r",
                    "*/\r",
                    "\r",
                    "\r",
                    "\r",
                    " if( this.config.activeRelData.pageNo <  this.config.maxPageNo )\r",
                    " {\r",
                    "\r",
                    "     this.config.activeRelData.pageNo++ ;\r",
                    "     this.loadRetailerPagedForVendor();\r",
                    "\r",
                    " }\r",
                    ""
                ],
                "name": "tap"
            },
            "designerId": "525aed17-18a3-43ce-a8c7-644e75013f21"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "loadRetailerPagedForVendor",
                "implHandler": [
                    "/*\r",
                    "\r",
                    "     activeRelData: {\r",
                    "            query: {\r",
                    "\r",
                    "            },\r",
                    "            collection: '',\r",
                    "            pageNo: 1,\r",
                    "            pageSize: 50,\r",
                    "            sortBy: {\r",
                    "\r",
                    "            }\r",
                    "        },\r",
                    "\r",
                    "\r",
                    "*/\r",
                    "\r",
                    "    this.config.activeRelData.collection =  dbEnv + \"rdl_masterretailerrecords\";\r",
                    "    var searchCriteria = this.config.activeRelData;\r",
                    "    var that = this ;\r",
                    "\r",
                    "console.log(searchCriteria);\r",
                    "    RMdatalink.iwa.rdl.queryDB(\r",
                    "        searchCriteria,\r",
                    "        success,error);\r",
                    "\r",
                    "// RMdatalink.iwa.rdl.queryDB({collection: dbEnv + \"rdl_masterretailerrecords\",pageNo:1,pageSize: 2 ,sortBy:{},query:{store_phone:str_name },fields:{store_phone:1,vendors:1}},duplicationSuccess,duplicationError);\r",
                    "\r",
                    "\r",
                    "\r",
                    "\r",
                    "\r",
                    "\r",
                    "function success(){\r",
                    "    \r",
                    "    //alert(\"I rEACHED HERE\");\r",
                    "//     debugger ;\r",
                    "//         console.log(arguments) ;\r",
                    "//     debugger ;\r",
                    "   if(arguments[0].count > 1)\r",
                    "   {\r",
                    "\r",
                    "       setMaxPageSize(arguments[0]) ;\r",
                    "\r",
                    "\r",
                    "       setRetailersList(arguments[0].items) ;\r",
                    "\r",
                    "        Ext.ComponentQuery.query('#retailerAtVendorPNoLbl')[0].setHtml(searchCriteria.pageNo) ;\r",
                    "   }\r",
                    "\r",
                    "    Ext.ComponentQuery.query('#inStoreVendorsRetailersCLbl')[0].setHtml(\"Total Retailers : \"+arguments[0].count) ;\r",
                    "\r",
                    "\r",
                    "\r",
                    "}\r",
                    "\r",
                    "function error(){\r",
                    "\r",
                    "\r",
                    "}\r",
                    "\r",
                    "function setMaxPageSize(response){\r",
                    "\r",
                    "    if( (response.count  % searchCriteria.pageSize) == 0){\r",
                    "            that.config.maxPageNo =  parseInt(response.count  / searchCriteria.pageSize) ;\r",
                    "    }\r",
                    "    else{\r",
                    "\r",
                    "        that.config.maxPageNo =  parseInt(response.count  / searchCriteria.pageSize) + 1;\r",
                    "    }\r",
                    "\r",
                    "\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "function setRetailersList(data){\r",
                    "\r",
                    "\r",
                    "    var prospectList  = Ext.ComponentQuery.query('#RDInStoreVendorsTab')[0].down(\"#mainList\");\r",
                    "\r",
                    "\r",
                    "      var prospectStore = prospectList.getStore() ;\r",
                    "    prospectStore.removeAll();\r",
                    "    prospectStore.sync();\r",
                    "\r",
                    "    prospectStore.setData(data) ;\r",
                    "\r",
                    "    prospectStore.sync();\r",
                    "\r",
                    "      prospectList.selectAll() ;\r",
                    "\r",
                    "\r",
                    "\r",
                    "}"
                ]
            },
            "designerId": "a775bb6b-0e13-4ec1-9125-2fcdf11938fb"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "searchText"
                ],
                "fn": "searchRetailers",
                "implHandler": [
                    "/*\r",
                    "\r",
                    "     activeRelData: {\r",
                    "            query: {\r",
                    "\r",
                    "            },\r",
                    "            collection: '',\r",
                    "            pageNo: 1,\r",
                    "            pageSize: 50,\r",
                    "            sortBy: {\r",
                    "\r",
                    "            }\r",
                    "        },\r",
                    "\r",
                    "\r",
                    "        query:\r",
                    "\r",
                    "           {\r",
                    "               store_phone:{\r",
                    "                   $in:\r",
                    "                   phones\r",
                    "               }\r",
                    "\r",
                    "           }\r",
                    "\r",
                    "\r",
                    "*/\r",
                    "\r",
                    "\r",
                    "\r",
                    "   var searchregx =  new RegExp(searchText ) ;\r",
                    "\r",
                    "this.config.activeRelData.query.store_name = { $regex: searchregx, $options: 'i' }  ;\r",
                    "//this.config.activeRelData.query.store_city = { $regex: searchregx, $options: 'i' }  ;\r",
                    "//this.config.activeRelData.query.store_state = { $regex: searchregx, $options: 'i' }  ;\r",
                    "\r",
                    "\r",
                    "delete(this.config.activeRelData.query.store_phone) ;\r",
                    "\r",
                    "\r",
                    "this.loadRetailerPagedForVendor() ;"
                ]
            },
            "designerId": "6b96445f-3cd6-439b-af9d-08ed3869ba50"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "record"
                ],
                "fn": "onRetailerUnSelect",
                "implHandler": [
                    "var isRetailerDetailsView = RMdatalink.app.getController('UINav').isRetailerDetailsView;\r",
                    "    var selectedUserRecord = RMdatalink.util.globalConfig.getDataToShowInSettingWindow() ;\r",
                    "\r",
                    "\r",
                    "\r",
                    "console.log(record);\r",
                    "\r",
                    "if(!isRetailerDetailsView)\r",
                    "{\r",
                    "\r",
                    "    var strPhone = record.data.store_phone ;\r",
                    "    //\r",
                    "\r",
                    "\r",
                    "    var impCSV = RMdatalink.app.getController('ImportCSV') ;\r",
                    "    var recIndex = -1 ;\r",
                    "\r",
                    "    for(var i =0 ; i < impCSV.config.retailerForVendor.length ; i++){\r",
                    "\r",
                    "        if( impCSV.config.retailerForVendor[i].retailer_phone == strPhone ){\r",
                    "\r",
                    "            recIndex = i ;\r",
                    "            break ;\r",
                    "        }\r",
                    "\r",
                    "    }\r",
                    "\r",
                    "     console.log(recIndex);\r",
                    "\r",
                    "     impCSV.config.retailerForVendor.splice(recIndex , 1);\r",
                    "\r",
                    "    var prospectList  = Ext.ComponentQuery.query('#RDStoreSideTabPanel #RDInStoreVendorsTab')[0].down(\"#mainList\");\r",
                    "\r",
                    "    var prospectStore = prospectList.getStore() ;\r",
                    "\r",
                    "    prospectStore.remove(record) ;\r",
                    "\r",
                    "\r",
                    "     this.setFilterForProspectRetailers();\r",
                    "\r",
                    "     RMdatalink.app.getController('VendorRetailerRelations').updateVendorOnRetailerAddedOrRemoved() ;\r",
                    "\r",
                    "}else{\r",
                    "\r",
                    "\r",
                    "\r",
                    "    var activeList  = Ext.ComponentQuery.query('#RDStoreSideTabPanel #RDInStoreVendorsTab')[0].down(\"#mainList\");\r",
                    "\r",
                    "    var activeStore = activeList.getStore() ;\r",
                    "\r",
                    "    activeStore.remove(record) ;\r",
                    "    this.setResetReatilersForVendors(true , selectedUserRecord.record.data._id , selectedUserRecord.record.data.store_phone ,record ) ;\r",
                    "        var storeToPass = Ext.ComponentQuery.query('#RDStoreSideTabPanel #RDOnlineVendorsTab')[0].down(\"#mainList\").getStore();\r",
                    "    this.setFilterForProspectVendors('RDStoreSideTabPanel' , storeToPass)  ;\r",
                    "\r",
                    "\r",
                    "}"
                ]
            },
            "designerId": "22a2cebc-9464-4918-956d-86bb7f92e2a9"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "record"
                ],
                "fn": "onRetailerEcommerceUnSelect",
                "implHandler": [
                    "var isRetailerDetailsView = RMdatalink.app.getController('UINav').isRetailerDetailsView;\r",
                    "    var selectedUserRecord = RMdatalink.util.globalConfig.getDataToShowInSettingWindow() ;\r",
                    "\r",
                    "\r",
                    "\r",
                    "console.log(record);\r",
                    "\r",
                    "if(!isRetailerDetailsView && 0)\r",
                    "{\r",
                    "\r",
                    "    var strPhone = record.data.store_phone ;\r",
                    "    //\r",
                    "\r",
                    "\r",
                    "    var impCSV = RMdatalink.app.getController('ImportCSV') ;\r",
                    "    var recIndex = -1 ;\r",
                    "\r",
                    "    for(var i =0 ; i < impCSV.config.retailerForVendor.length ; i++){\r",
                    "\r",
                    "        if( impCSV.config.retailerForVendor[i].retailer_phone == strPhone ){\r",
                    "\r",
                    "            recIndex = i ;\r",
                    "            break ;\r",
                    "        }\r",
                    "\r",
                    "    }\r",
                    "\r",
                    "     console.log(recIndex);\r",
                    "\r",
                    "     impCSV.config.retailerForVendor.splice(recIndex , 1);\r",
                    "\r",
                    "    var prospectList  = Ext.ComponentQuery.query('#RDForECommerce #RDInStoreVendorsTab')[0].down(\"#mainList\");\r",
                    "\r",
                    "    var prospectStore = prospectList.getStore() ;\r",
                    "\r",
                    "    prospectStore.remove(record) ;\r",
                    "\r",
                    "\r",
                    "     this.setFilterForProspectRetailers();\r",
                    "\r",
                    "     RMdatalink.app.getController('VendorRetailerRelations').updateVendorOnRetailerAddedOrRemoved() ;\r",
                    "\r",
                    "}else{\r",
                    "\r",
                    "\r",
                    "\r",
                    "    var activeList  = Ext.ComponentQuery.query('#RDForECommerce #RDInStoreVendorsTab')[0].down(\"#mainList\");\r",
                    "\r",
                    "    var activeStore = activeList.getStore() ;\r",
                    "\r",
                    "    activeStore.remove(record) ;\r",
                    "    var storeToPass = Ext.ComponentQuery.query('#RDForECommerce #RDOnlineVendorsTab')[0].down(\"#mainList\").getStore();\r",
                    "    this.setResetReatilersForVendors(true , selectedUserRecord.record.data._id , selectedUserRecord.record.data.store_phone ,record ,'retailers_ecommerce') ;\r",
                    "    this.setFilterForProspectVendors('RDForECommerce',storeToPass );\r",
                    "\r",
                    "\r",
                    "}"
                ]
            },
            "designerId": "241b78ff-1b0f-4a5a-a83d-e55e3d53f0f5"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "record"
                ],
                "fn": "onRetailerVipUnselect",
                "implHandler": [
                    "var isRetailerDetailsView = RMdatalink.app.getController('UINav').isRetailerDetailsView;\r",
                    "var selectedUserRecord = RMdatalink.util.globalConfig.getDataToShowInSettingWindow() ;\r",
                    "\r",
                    "\r",
                    "\r",
                    "console.log(record);\r",
                    "\r",
                    "if(!isRetailerDetailsView && 0)\r",
                    "{\r",
                    "\r",
                    "    var strPhone = record.data.store_phone ;\r",
                    "    //\r",
                    "\r",
                    "\r",
                    "    var impCSV = RMdatalink.app.getController('ImportCSV') ;\r",
                    "    var recIndex = -1 ;\r",
                    "\r",
                    "    for(var i =0 ; i < impCSV.config.retailerForVendor.length ; i++){\r",
                    "\r",
                    "        if( impCSV.config.retailerForVendor[i].retailer_phone == strPhone ){\r",
                    "\r",
                    "            recIndex = i ;\r",
                    "            break ;\r",
                    "        }\r",
                    "\r",
                    "    }\r",
                    "\r",
                    "     console.log(recIndex);\r",
                    "\r",
                    "     impCSV.config.retailerForVendor.splice(recIndex , 1);\r",
                    "\r",
                    "    var prospectList  = Ext.ComponentQuery.query('#RDForECommerce #RDInStoreVendorsTab')[0].down(\"#mainList\");\r",
                    "\r",
                    "    var prospectStore = prospectList.getStore() ;\r",
                    "\r",
                    "    prospectStore.remove(record) ;\r",
                    "\r",
                    "\r",
                    "     this.setFilterForProspectRetailers();\r",
                    "\r",
                    "     RMdatalink.app.getController('VendorRetailerRelations').updateVendorOnRetailerAddedOrRemoved() ;\r",
                    "\r",
                    "}else{\r",
                    "\r",
                    "\r",
                    "\r",
                    "    var activeList  = Ext.ComponentQuery.query('#RDForVIP #RDInStoreVendorsTab')[0].down(\"#mainList\");\r",
                    "\r",
                    "\r",
                    "    var activeStore = activeList.getStore() ;\r",
                    "\r",
                    "\r",
                    "\r",
                    "    if(  activeStore.indexOf(record) == 0)    {\r",
                    "\r",
                    "\r",
                    "         alert(\"THIS IS VENODR PARTNER.\")   ;\r",
                    "        return;\r",
                    "    }\r",
                    "\r",
                    "    activeStore.remove(record) ;\r",
                    "\r",
                    "\r",
                    "     var storeToPass = Ext.ComponentQuery.query('#RDForVIP #RDOnlineVendorsTab')[0].down(\"#mainList\").getStore();\r",
                    "//     this.setResetReatilersForVendors(true , selectedUserRecord.record.data._id , selectedUserRecord.record.data.store_phone ,record ,'retailers_ecommerce') ;\r",
                    "    this.setFilterForProspectVendors('RDForVIP',storeToPass );\r",
                    "    saveInDB.call(RMdatalink.app.getController('RetailerDeatilsDataSet'));\r",
                    "\r",
                    "\r",
                    "}\r",
                    "function saveInDB(){\r",
                    "\r",
                    "        updateVendorIdAccountValueVIP();\r",
                    "        var masterStore =  Ext.getStore('retailersMaster');\r",
                    "        var TEST =  this.setTempRecordForRetailerOrVendor();\r",
                    "            TEST = {};\r",
                    "        var selectedRow = RMdatalink.util.globalConfig.getDataInRetailerScreenForSaveOrCancel();\r",
                    "\r",
                    "        var recordInMasterStore = selectedRow.record ;\r",
                    "\r",
                    "            var retailerEcommerceForm = Ext.ComponentQuery.query(\"#retailerEcommerceForm\")[0];\r",
                    "            if(retailerEcommerceForm){\r",
                    "\r",
                    "               var  value = retailerEcommerceForm.getValues();\r",
                    "               var vipVendorListInEComm = Ext.ComponentQuery.query(\"#vipVendorListInEComm\")[0];\r",
                    "               if(  ( vipVendorListInEComm && vipVendorListInEComm.getStore())  || true)\r",
                    "               {\r",
                    "\r",
                    "\r",
                    "\r",
                    "                   value.additional_vendors =  getAccountNoAndNameOfVIPVendors() ; //getRawFromList('vipVendorListInEComm') ;//vipVendorListInEComm.getStore().getData();\r",
                    "\r",
                    "               }\r",
                    "\r",
                    "                var vipVendorProgramListInEComm = Ext.ComponentQuery.query(\"#vipVendorProgramListInEComm\")[0];\r",
                    "                if(vipVendorProgramListInEComm   &&   vipVendorProgramListInEComm.getStore()){\r",
                    "\r",
                    "                    value.programs =  getRawFromList('vipVendorProgramListInEComm') ;// vipVendorProgramListInEComm.getStore().getData();\r",
                    "\r",
                    "                }\r",
                    "\r",
                    "\r",
                    "                var backGround_Logo_Image = Ext.ComponentQuery.query(\"#backGround_Logo_Image\")[0];\r",
                    "                var dom = backGround_Logo_Image.element.dom;\r",
                    "                var img = dom.childNodes[0];\r",
                    "                value.logo = img.src;\r",
                    "                TEST.e_commerce_info = value;\r",
                    "\r",
                    "            }\r",
                    "            console.log(TEST);\r",
                    "\r",
                    "         RMdatalink.iwa.rdl.doUpdateCollection(masterStore, TEST , recordInMasterStore.get('_id'), function(){\r",
                    "        console.log(\"suc\" , arguments);\r",
                    "        recordInMasterStore.set('e_commerce_info' , value);\r",
                    "    }, function(){\r",
                    "\r",
                    "        console.log(\"errro\" , arguments);\r",
                    "    });\r",
                    "\r",
                    "\r",
                    "\r",
                    "}"
                ]
            },
            "designerId": "ce258d73-c281-43ef-aaa0-ae7678bf37ff"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "record",
                    "target"
                ],
                "fn": "onRetailerSelect",
                "implHandler": [
                    "   var isRetailerDetailsView = RMdatalink.app.getController('UINav').isRetailerDetailsView;\r",
                    "   var selectedUserRecord = RMdatalink.util.globalConfig.getDataToShowInSettingWindow() ;\r",
                    "\r",
                    "\r",
                    "console.log(record);\r",
                    "\r",
                    "if(!isRetailerDetailsView)\r",
                    "{\r",
                    "\r",
                    "    console.error(201);\r",
                    "    var strPhone = record.data.store_phone ;\r",
                    "    var strId = record.data._id ;\r",
                    "\r",
                    "    var impCSV = RMdatalink.app.getController('ImportCSV') ;\r",
                    "\r",
                    "    this.config.selectedRetailerProspect = record.data ;\r",
                    "\r",
                    "    impCSV.assignRetailerForVendor(selectedUserRecord.record.data,strPhone , true,strId) ;\r",
                    "\r",
                    "    var prospectList  = Ext.ComponentQuery.query('#RDStoreSideTabPanel #RDOnlineVendorsTab')[0].down(\"#mainList\");\r",
                    "    var prospectStore = prospectList.getStore() ;\r",
                    "\r",
                    "    // prospectList.remove(record) ;\r",
                    "\r",
                    "    this.setFilterForProspectRetailers();\r",
                    "    RMdatalink.app.getController('VendorRetailerRelations').updateVendorOnRetailerAddedOrRemoved() ;\r",
                    "\r",
                    "}\r",
                    "else{\r",
                    "    console.error(202);\r",
                    "\r",
                    "    //setResetReatilersForVendors: function(isRemove, store_id, store_phone, vendorRecord)\r",
                    "\r",
                    "    console.error(selectedUserRecord);\r",
                    "    var activeList  = Ext.ComponentQuery.query('#RDStoreSideTabPanel #RDInStoreVendorList')[0].down(\"#mainList\");\r",
                    "    var activeStore = activeList.getStore() ;\r",
                    "    console.error(\"WOHOOO TEST NEW \") ;\r",
                    "    console.error(record) ;\r",
                    "\r",
                    "    var objectToAdd = {\r",
                    "        'Account_No':' ',\r",
                    "        'SKU':\trecord.data.SKU,\r",
                    "        'collections':\trecord.data.collections,\r",
                    "        'design':\trecord.data.design,\r",
                    "        'no_of_additional_images':\trecord.data.no_of_additional_images,\r",
                    "        'no_of_images':\trecord.data.no_of_images,\r",
                    "        'sku':\trecord.data.sku,\r",
                    "        'status':\trecord.data.status,\r",
                    "        'store_city':\trecord.data.store_city,\r",
                    "        'store_name':\trecord.data.store_name,\r",
                    "        'store_phone':\trecord.data.store_phone,\r",
                    "        'store_state':\trecord.data.store_state,\r",
                    "        'vendor_id':\trecord.data._id,\r",
                    "        'vendor_name':\trecord.data.vendor_name,\r",
                    "        '_id':\trecord.data._id\r",
                    "\r",
                    "    };\r",
                    "\r",
                    "\r",
                    "    activeStore.add(objectToAdd);\r",
                    "\r",
                    "    activeList.selectAll();\r",
                    "\r",
                    "//     var objectToAddInRetailersArrayofRecord = {\r",
                    "//         retailer_id:\r",
                    "//     }\r",
                    "    this.setResetReatilersForVendors(false , selectedUserRecord.record.data._id , selectedUserRecord.record.data.store_phone ,record ) ;\r",
                    "\r",
                    "\r",
                    "        var storeToPass = Ext.ComponentQuery.query('#RDStoreSideTabPanel #RDOnlineVendorsTab')[0].down(\"#mainList\").getStore();\r",
                    "        this.setFilterForProspectVendors('RDStoreSideTabPanel',storeToPass );\r",
                    "\r",
                    "\r",
                    "  //  this.setFilterForProspectVendors('RDStoreSideTabPanel' , storeToPass)  ;\r",
                    "}"
                ]
            },
            "designerId": "7afb1a2e-71ed-441c-af26-dfe94508ab88"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "record",
                    "target"
                ],
                "fn": "onRetailerEcommerceSelect",
                "implHandler": [
                    "   var isRetailerDetailsView = RMdatalink.app.getController('UINav').isRetailerDetailsView;\r",
                    "   var selectedUserRecord = RMdatalink.util.globalConfig.getDataToShowInSettingWindow() ;\r",
                    "var me = this;\r",
                    "\r",
                    "console.log(record);\r",
                    "\r",
                    "if(!isRetailerDetailsView && 0)\r",
                    "{\r",
                    "\r",
                    "    console.error(201);\r",
                    "    var strPhone = record.data.store_phone ;\r",
                    "    var strId = record.data._id ;\r",
                    "\r",
                    "    var impCSV = RMdatalink.app.getController('ImportCSV') ;\r",
                    "\r",
                    "    this.config.selectedRetailerProspect = record.data ;\r",
                    "\r",
                    "    impCSV.assignRetailerForVendor(selectedUserRecord.record.data,strPhone , true,strId) ;\r",
                    "\r",
                    "\r",
                    "     var prospectList  = Ext.ComponentQuery.query('#RDStoreSideTabPanel #RDOnlineVendorsTab')[0].down(\"#mainList\");\r",
                    "\r",
                    "    var prospectStore = prospectList.getStore() ;\r",
                    "\r",
                    "    // prospectList.remove(record) ;\r",
                    "\r",
                    "\r",
                    "    this.setFilterForProspectRetailers();\r",
                    "\r",
                    "\r",
                    "     RMdatalink.app.getController('VendorRetailerRelations').updateVendorOnRetailerAddedOrRemoved() ;\r",
                    "\r",
                    "\r",
                    "}else{\r",
                    "    console.error(202);\r",
                    "\r",
                    "\r",
                    "    console.error(selectedUserRecord);\r",
                    "\r",
                    "\r",
                    "\r",
                    "\r",
                    "    var activeList  = Ext.ComponentQuery.query('#RDForECommerce #RDInStoreVendorList')[0].down(\"#mainList\");\r",
                    "\r",
                    "    var activeStore = activeList.getStore() ;\r",
                    "\r",
                    "    var objectToAdd = {\r",
                    "        Account_No:'',\r",
                    "        'SKU':\trecord.data.SKU,\r",
                    "        'collections':\trecord.data.collections,\r",
                    "        'design':\trecord.data.design,\r",
                    "        'no_of_additional_images':\trecord.data.no_of_additional_images,\r",
                    "        'no_of_images':\trecord.data.no_of_images,\r",
                    "        'sku':\trecord.data.sku,\r",
                    "        'status':\trecord.data.status,\r",
                    "        'store_city':\trecord.data.store_city,\r",
                    "        'store_name':\trecord.data.store_name,\r",
                    "        'store_phone':\trecord.data.store_phone,\r",
                    "        'store_state':\trecord.data.store_state,\r",
                    "        'vendor_id':\trecord.data.vendor_id,\r",
                    "        'vendor_name':\trecord.data.vendor_name,\r",
                    "        '_id':\trecord.data._id\r",
                    "\r",
                    "    };\r",
                    "    var keyOfFilter = 'prevent_be_ecommerceVendor';\r",
                    "    if(isVendorPreventedForVip(record.data._id  ,keyOfFilter ) ){\r",
                    "\r",
                    "\r",
                    "       console.log(\"THIS CANNOT BE ADDED BECUEAS ADDITION IS BLOCKED0\");\r",
                    "        Ext.Msg.confirm('Warning', 'This Vender has been disabled from E-Commerce.Are you sure you want to add these vendor ?', function(btn){\r",
                    "            if(btn === 'yes'){\r",
                    "                //some code\r",
                    "                 fnToExecute.call(me);\r",
                    "//                addVendor();\r",
                    "            }\r",
                    "            else{\r",
                    "                //some code\r",
                    "            }\r",
                    "        });\r",
                    "        return;\r",
                    "    }\r",
                    "    fnToExecute.call(me);\r",
                    "    function fnToExecute(){\r",
                    "        console.log(\"THIS VENDOR CAN BEE ADDED\");\r",
                    "        if(activeStore){\r",
                    "\r",
                    "            activeStore.add(objectToAdd) ;\r",
                    "        }else{\r",
                    "\r",
                    "            activeList.setData([objectToAdd]);\r",
                    "        }\r",
                    "\r",
                    "        activeList.selectAll() ;\r",
                    "        this.setResetReatilersForVendors(false , selectedUserRecord.record.data._id , selectedUserRecord.record.data.store_phone ,record , 'retailers_ecommerce') ;\r",
                    "        var storeToPass = Ext.ComponentQuery.query('#RDForECommerce #RDOnlineVendorsTab')[0].down(\"#mainList\").getStore();\r",
                    "        this.setFilterForProspectVendors('RDForECommerce',storeToPass );\r",
                    "\r",
                    "    }\r",
                    "\r",
                    "\r",
                    "\r",
                    "//     var objectToAddInRetailersArrayofRecord = {\r",
                    "//         retailer_id:\r",
                    "//     }\r",
                    "\r",
                    "//\r",
                    "}\r",
                    ""
                ]
            },
            "designerId": "1effddd7-8013-4dee-b94c-24b4e4cb43fd"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "record",
                    "target"
                ],
                "fn": "onRetailerVipSelect",
                "implHandler": [
                    "   var isRetailerDetailsView = RMdatalink.app.getController('UINav').isRetailerDetailsView;\r",
                    "   var selectedUserRecord = RMdatalink.util.globalConfig.getDataToShowInSettingWindow() ;\r",
                    "var me = this;\r",
                    "\r",
                    "console.log(record);\r",
                    "\r",
                    "if(!isRetailerDetailsView && 0)\r",
                    "{\r",
                    "\r",
                    "    console.error(201);\r",
                    "    var strPhone = record.data.store_phone ;\r",
                    "    var strId = record.data._id ;\r",
                    "\r",
                    "    var impCSV = RMdatalink.app.getController('ImportCSV') ;\r",
                    "\r",
                    "    this.config.selectedRetailerProspect = record.data ;\r",
                    "\r",
                    "    impCSV.assignRetailerForVendor(selectedUserRecord.record.data,strPhone , true,strId) ;\r",
                    "\r",
                    "\r",
                    "     var prospectList  = Ext.ComponentQuery.query('#RDStoreSideTabPanel #RDOnlineVendorsTab')[0].down(\"#mainList\");\r",
                    "\r",
                    "    var prospectStore = prospectList.getStore() ;\r",
                    "\r",
                    "    // prospectList.remove(record) ;\r",
                    "\r",
                    "\r",
                    "    this.setFilterForProspectRetailers();\r",
                    "\r",
                    "\r",
                    "     RMdatalink.app.getController('VendorRetailerRelations').updateVendorOnRetailerAddedOrRemoved() ;\r",
                    "\r",
                    "\r",
                    "}else{\r",
                    "    console.error(202);\r",
                    "\r",
                    "\r",
                    "    console.error(selectedUserRecord);\r",
                    "\r",
                    "\r",
                    "\r",
                    "\r",
                    "    var activeList  = Ext.ComponentQuery.query('#RDForVIP #RDInStoreVendorList')[0].down(\"#mainList\");\r",
                    "\r",
                    "    var activeStore = activeList.getStore() ;\r",
                    "\r",
                    "    var objectToAdd = {\r",
                    "        Account_No:'',\r",
                    "        'SKU':\trecord.data.SKU,\r",
                    "        'collections':\trecord.data.collections,\r",
                    "        'design':\trecord.data.design,\r",
                    "        'no_of_additional_images':\trecord.data.no_of_additional_images,\r",
                    "        'no_of_images':\trecord.data.no_of_images,\r",
                    "        'sku':\trecord.data.sku,\r",
                    "        'status':\trecord.data.status,\r",
                    "        'store_city':\trecord.data.store_city,\r",
                    "        'store_name':\trecord.data.store_name,\r",
                    "        'store_phone':\trecord.data.store_phone,\r",
                    "        'store_state':\trecord.data.store_state,\r",
                    "        'vendor_id':\trecord.data.vendor_id,\r",
                    "        'vendor_name':\trecord.data.vendor_name,\r",
                    "        '_id':\trecord.data._id\r",
                    "\r",
                    "    };\r",
                    "    var keyOfFilter = 'prevent_be_ecommerceVendor';\r",
                    "    if(isVendorPreventedForVip(record.data._id  ,keyOfFilter ) ){\r",
                    "\r",
                    "\r",
                    "       console.log(\"THIS CANNOT BE ADDED BECUEAS ADDITION IS BLOCKED0\");\r",
                    "        Ext.Msg.confirm('Warning', 'This Vender has been disabled from E-Commerce.Are you sure you want to add these vendor ?', function(btn){\r",
                    "            if(btn === 'yes'){\r",
                    "                //some code\r",
                    "                 fnToExecute.call(me);\r",
                    "//                addVendor();\r",
                    "            }\r",
                    "            else{\r",
                    "                //some code\r",
                    "            }\r",
                    "        });\r",
                    "        return;\r",
                    "    }\r",
                    "    fnToExecute.call(me);\r",
                    "    function fnToExecute(){\r",
                    "        console.log(\"THIS VENDOR CAN BEE ADDED\");\r",
                    "\r",
                    "        if(activeStore && ( activeStore.find('_id', record.data._id ) < 0    )     ){\r",
                    "\r",
                    "            activeStore.add(objectToAdd) ;\r",
                    "        }else{\r",
                    "\r",
                    "            activeList.setData([objectToAdd]);\r",
                    "        }\r",
                    "\r",
                    "        activeList.selectAll() ;\r",
                    "//         this.setResetReatilersForVendors(false , selectedUserRecord.record.data._id , selectedUserRecord.record.data.store_phone ,record , 'retailers_ecommerce') ;\r",
                    "         var storeToPass = Ext.ComponentQuery.query('#RDForVIP #RDOnlineVendorsTab')[0].down(\"#mainList\").getStore();\r",
                    "         this.setFilterForProspectVendors('RDForVIP',storeToPass );\r",
                    "         saveInDB.call(RMdatalink.app.getController('RetailerDeatilsDataSet'));\r",
                    "    }\r",
                    "\r",
                    "\r",
                    "\r",
                    "//     var objectToAddInRetailersArrayofRecord = {\r",
                    "//         retailer_id:\r",
                    "//     }\r",
                    "\r",
                    "//\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "\r",
                    "function saveInDB(){\r",
                    "\r",
                    "        updateVendorIdAccountValueVIP();\r",
                    "        var masterStore =  Ext.getStore('retailersMaster');\r",
                    "        var TEST =  this.setTempRecordForRetailerOrVendor();\r",
                    "            TEST = {};\r",
                    "        console.log(1);\r",
                    "        var selectedRow = RMdatalink.util.globalConfig.getDataInRetailerScreenForSaveOrCancel();\r",
                    "        var recordInMasterStore = selectedRow.record ;\r",
                    "\r",
                    "            var retailerEcommerceForm = Ext.ComponentQuery.query(\"#retailerEcommerceForm\")[0];\r",
                    "    console.log(2);\r",
                    "            if(retailerEcommerceForm){\r",
                    "                console.log(3);\r",
                    "               var  value = retailerEcommerceForm.getValues();\r",
                    "               var vipVendorListInEComm = Ext.ComponentQuery.query(\"#vipVendorListInEComm\")[0];\r",
                    "               if(  ( vipVendorListInEComm && vipVendorListInEComm.getStore())  || true)\r",
                    "               {\r",
                    "\r",
                    "\r",
                    "                   console.log(4);\r",
                    "                   value.additional_vendors =  getAccountNoAndNameOfVIPVendors() ; //getRawFromList('vipVendorListInEComm') ;//vipVendorListInEComm.getStore().getData();\r",
                    "\r",
                    "               }\r",
                    "\r",
                    "                var vipVendorProgramListInEComm = Ext.ComponentQuery.query(\"#vipVendorProgramListInEComm\")[0];\r",
                    "                if(vipVendorProgramListInEComm   &&   vipVendorProgramListInEComm.getStore()){\r",
                    "                console.log(5);\r",
                    "                    value.programs =  getRawFromList('vipVendorProgramListInEComm') ;// vipVendorProgramListInEComm.getStore().getData();\r",
                    "\r",
                    "                }\r",
                    "\r",
                    "                console.log(6);\r",
                    "                var backGround_Logo_Image = Ext.ComponentQuery.query(\"#backGround_Logo_Image\")[0];\r",
                    "                var dom = backGround_Logo_Image.element.dom;\r",
                    "                var img = dom.childNodes[0];\r",
                    "                value.logo = img.src;\r",
                    "                TEST.e_commerce_info = value;\r",
                    "\r",
                    "            }\r",
                    "            console.log(TEST);\r",
                    "\r",
                    "        RMdatalink.iwa.rdl.doUpdateCollection(masterStore, TEST , recordInMasterStore.get('_id'), function(){\r",
                    "        console.log(\"suc\" , arguments);\r",
                    "        recordInMasterStore.set('e_commerce_info' , value);\r",
                    "    }, function(){\r",
                    "\r",
                    "        console.log(\"errro\" , arguments);\r",
                    "    });\r",
                    "\r",
                    "\r",
                    "\r",
                    "}"
                ]
            },
            "designerId": "04485b82-ce10-403f-ade1-9d37733ae0ba"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "addRtToRTVList",
                "implHandler": [
                    "    var activeList  = Ext.ComponentQuery.query('#RDInStoreVendorsTab')[0].down(\"#mainList\");\r",
                    "\r",
                    "    var activeStore = activeList.getStore() ;\r",
                    "    var rt = this.config.selectedRetailerProspect ;\r",
                    "    var data = {\r",
                    "\r",
                    "            \"store_name\": rt.store_name,\r",
                    "            \"store_address_line1\":rt.store_address_line1 ,\r",
                    "            \"store_city\":rt.store_city,\r",
                    "            \"store_state\":rt.store_state,\r",
                    "            \"store_zip\": rt.store_zip,\r",
                    "            \"store_phone\": rt.store_phone,\r",
                    "            \"store_website\":rt.store_website\r",
                    "    };\r",
                    "\r",
                    "\r",
                    "    activeStore.add(data);\r",
                    "    activeList.selectAll();"
                ]
            },
            "designerId": "7fb82d94-60cc-40d0-8861-1304a767d2c0"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "button[itemId=prospectsretailersOfVendorsPageLeftBtn]",
                "designer|targetType": "Ext.Button",
                "fn": "onprospectsretailersOfVendorsPageLeftBtnTap",
                "implHandler": [
                    "\r",
                    "var pageController = RMdatalink.app.getController('PaginationController');\r",
                    "\r",
                    "\r",
                    "var presentStoreId = pageController.getCurrentActiveStoreId();\r",
                    "\r",
                    "\r",
                    "pageController.setCurrentActiveStoreId(\"retailersMaster\");\r",
                    "\r",
                    "\r",
                    "var storeId = pageController.getCurrentActiveStoreId();\r",
                    "\r",
                    "var store = Ext.getStore(storeId);\r",
                    "\r",
                    "var currentPageNo = store.getPageNo();\r",
                    "var totalNoOfPages = 10; store.getTotalNoOfPages();\r",
                    "\r",
                    "if(currentPageNo > 1)\r",
                    "{\r",
                    "/* Here request Data loader to load next page */\r",
                    "currentPageNo = currentPageNo - 1 ;\r",
                    "\r",
                    "  pageController.loadStore(currentPageNo,RMdatalink.util.DataLoader.getPageSize(),RMdatalink.util.DataLoader.getEnableCachig());\r",
                    "}\r",
                    "\r",
                    "store.setPageNo(currentPageNo);\r",
                    "\r",
                    "\r",
                    "pageController.setCurrentActiveStoreId(presentStoreId);"
                ],
                "name": "tap"
            },
            "designerId": "a363c36b-1227-4ac7-b3b5-05629d926594"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "button[itemId=prospectsretailersOfVendorsPageRightBtn]",
                "designer|targetType": "Ext.Button",
                "fn": "onprospectsretailersOfVendorsPageRightBtnTap",
                "implHandler": [
                    "\r",
                    "var pageController = RMdatalink.app.getController('PaginationController');\r",
                    "\r",
                    "\r",
                    "var presentStoreId = pageController.getCurrentActiveStoreId();\r",
                    "\r",
                    "\r",
                    "pageController.setCurrentActiveStoreId(\"retailersMaster\");\r",
                    "\r",
                    "\r",
                    "var storeId = pageController.getCurrentActiveStoreId();\r",
                    "\r",
                    "var store = Ext.getStore(storeId);\r",
                    "\r",
                    "var currentPageNo = store.getPageNo();\r",
                    "var totalNoOfPages = 1000; store.getTotalNoOfPages();\r",
                    "\r",
                    "if(currentPageNo < totalNoOfPages)\r",
                    "{\r",
                    "/* Here request Data loader to load next page */\r",
                    "currentPageNo = currentPageNo + 1 ;\r",
                    "\r",
                    "  pageController.loadStore(currentPageNo,RMdatalink.util.DataLoader.getPageSize(),RMdatalink.util.DataLoader.getEnableCachig());\r",
                    "}\r",
                    "\r",
                    "store.setPageNo(currentPageNo);\r",
                    "\r",
                    "\r",
                    "pageController.setCurrentActiveStoreId(presentStoreId);"
                ],
                "name": "tap"
            },
            "designerId": "4481b277-2f86-49de-b68d-4bf38e7add91"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "setVendorForRetailer",
                "implHandler": [
                    "    var isRetailerDetailsView = RMdatalink.app.getController('UINav').isRetailerDetailsView;\r",
                    "    var selectedUserRecord = RMdatalink.util.globalConfig.getDataToShowInSettingWindow() ;\r",
                    "\r",
                    "   var rtd = Object() ;\r",
                    "   rtd = selectedUserRecord.record.data ;\r",
                    "\r",
                    "    var retailer = {\r",
                    "\r",
                    "        _id:rtd._id,\r",
                    "        type: \"ACTIVE\",\r",
                    "        retailer_phone:rtd.store_phone\r",
                    "\r",
                    "\r",
                    "    };\r",
                    "\r",
                    "\r",
                    "\r",
                    "var activeList  = Ext.ComponentQuery.query('#RDInStoreVendorsTab')[0].down(\"#mainList\");\r",
                    "\r",
                    "var activeStore = activeList.getStore() ;\r",
                    "\r",
                    "\r",
                    "var vendors = getArrayFromStore(activeStore);\r",
                    "\r",
                    "\r",
                    "var vendorMaster = Ext.getStore('vendors.Master');\r",
                    "\r",
                    "\r",
                    "var index = 0 ;\r",
                    "\r",
                    "\r",
                    " var vendor_rec = null ;\r",
                    "doUpdateVendor();\r",
                    "\r",
                    "\r",
                    "function doUpdateVendor(){\r",
                    "\r",
                    "    if(index < vendors.length )\r",
                    "    {\r",
                    "\r",
                    "            var vendor_id = vendors[index]._id ;\r",
                    "            var vendor_name = vendors[index].vendor_name;\r",
                    "            var recIndex = -1;\r",
                    "            if(vendor_id)\r",
                    "            {\r",
                    "               recIndex = vendorMaster.findExact(\"_id\",vendor_id);\r",
                    "            }else{\r",
                    "                recIndex = vendorMaster.findExact(\"vendor_name\",vendor_name);\r",
                    "\r",
                    "            }\r",
                    "\r",
                    "            vendor_rec = vendorMaster.getAt(recIndex) ;\r",
                    "\r",
                    "            if(vendor_rec){\r",
                    "\r",
                    "\r",
                    "                var rtds = vendor_rec.data.retailers ;\r",
                    "                var isRecAlreadyPresent = false ;\r",
                    "\r",
                    "                if(rtds)\r",
                    "                {\r",
                    "\r",
                    "                for(var i=0 ; i< rtds.length;i++){\r",
                    "\r",
                    "                    console.log(rtds.retailer_phone) ;\r",
                    "\r",
                    "                     console.log(rtd.store_phone) ;\r",
                    "\r",
                    "                    if(rtds.retailer_phone == rtd.store_phone){\r",
                    "                        isRecAlreadyPresent =true ;\r",
                    "                        break ;\r",
                    "                    }\r",
                    "                }\r",
                    "                }else{\r",
                    "\r",
                    "                    isRecAlreadyPresent = true ;\r",
                    "                }\r",
                    "\r",
                    "                if(isRecAlreadyPresent){\r",
                    "\r",
                    "                    console.log(\"Record Already Present\");\r",
                    "\r",
                    "                    index++ ;\r",
                    "                    doUpdateVendor() ;\r",
                    "\r",
                    "\r",
                    "                }else{\r",
                    "\r",
                    "                     console.log(\"New Record\");\r",
                    "\r",
                    "                    vendor_rec.data.retailers.push(retailer) ;\r",
                    "\r",
                    "                    sendRecToServer(vendor_rec) ;\r",
                    "\r",
                    "\r",
                    "\r",
                    "                }\r",
                    "\r",
                    "\r",
                    "            }else{\r",
                    "                  Ext.Viewport.setMasked(false) ;\r",
                    "            }\r",
                    "    }else{\r",
                    "\r",
                    "        Ext.Viewport.setMasked(false) ;\r",
                    "    }\r",
                    "\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "function sendRecToServer(vendor_rec){\r",
                    "\r",
                    "    var data = {\r",
                    "\r",
                    "        retailers :vendor_rec.data.retailers\r",
                    "    };\r",
                    "\r",
                    "     RMdatalink.iwa.rdl.doUpdateCollection(vendorMaster, data , vendor_rec.get('_id'), success, error );\r",
                    "\r",
                    "\r",
                    "\r",
                    "}\r",
                    "\r",
                    "function success(){\r",
                    "\r",
                    "      index++ ;\r",
                    "      doUpdateVendor() ;\r",
                    "}\r",
                    "\r",
                    "function error(){\r",
                    "\r",
                    "      index++ ;\r",
                    "      doUpdateVendor() ;\r",
                    "\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "function getArrayFromStore(store){\r",
                    "\r",
                    "    var data = new Array();\r",
                    "    data = store.getData().items;\r",
                    "\r",
                    "    var dataToReturn = new Array();\r",
                    "\r",
                    "    for(var i=0; i < data.length ; i++){\r",
                    "\r",
                    "        dataToReturn.push(data[i].data);\r",
                    "    }\r",
                    "\r",
                    "    return dataToReturn ;\r",
                    "\r",
                    "}"
                ]
            },
            "designerId": "73b5955a-df57-418e-a3b5-e55a5b62916b"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "parentTab",
                    "vendorMaster"
                ],
                "fn": "setFilterForProspectVendors",
                "implHandler": [
                    "\r",
                    "    parentTab = parentTab || 'RDStoreSideTabPanel';\r",
                    "\r",
                    "var activeList  = Ext.ComponentQuery.query('#' + parentTab +' ' + '#RDInStoreVendorsTab')[0].down(\"#mainList\");\r",
                    "\r",
                    "var activeStore = activeList.getStore();\r",
                    "\r",
                    "var vendors = getArrayFromStore(activeStore);\r",
                    "\r",
                    " vendorMaster = vendorMaster || Ext.getStore('vendors.Master') ;\r",
                    " vendorMaster.clearFilter();\r",
                    "\r",
                    "\r",
                    "\r",
                    "vendorMaster.filter(function(record){\r",
                    "\r",
                    "    var filterResult = true ;\r",
                    "\r",
                    "    for(var i =0 ; i < vendors.length ; i++ ){\r",
                    "\r",
                    "         if(record.data.vendor_name == vendors[i].vendor_name){\r",
                    "\r",
                    "             filterResult = false ;\r",
                    "             break ;\r",
                    "         }\r",
                    "\r",
                    "    }\r",
                    "\r",
                    "\r",
                    "        return filterResult ;\r",
                    "\r",
                    "});\r",
                    "\r",
                    "Ext.ComponentQuery.query('#' + parentTab +' ' + '#onlineVendorsRetailersCLbl')[0].setHtml(\"Total Vendors : \"+ vendorMaster.data.items.length ) ;\r",
                    "var vLength = vendorMaster.data.all.length - vendorMaster.data.items.length ;\r",
                    "Ext.ComponentQuery.query('#' + parentTab +' ' + '#inStoreVendorsRetailersCLbl')[0].setHtml(\"Total Vendors : \"+ vLength ) ;\r",
                    "\r",
                    "Ext.ComponentQuery.query('#' + parentTab +' ' + '#RDOnlineVendorsTab')[0].down(\"#mainList\").deselectAll();\r",
                    "\r",
                    "// function getArrayFromStore(store){\r",
                    "\r",
                    "//     var data = new Array();\r",
                    "//     data = store.getData().items;\r",
                    "\r",
                    "//     var dataToReturn = new Array();\r",
                    "\r",
                    "//     for(var i=0; i < data.length ; i++){\r",
                    "\r",
                    "//         dataToReturn.push(data[i].data);\r",
                    "//     }\r",
                    "\r",
                    "//     return dataToReturn ;\r",
                    "\r",
                    "// }\r",
                    "\r",
                    "\r",
                    "  RMdatalink.app.getController('RetailerDeatilsDataSet').loadVdrInfoTotals(parentTab , vendorMaster) ;"
                ]
            },
            "designerId": "32c25320-4c4b-4880-8134-18e846fb2fe0"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "retailers",
                    "selectedRow"
                ],
                "fn": "updateRetailerOnVendorUpdate",
                "implHandler": [
                    "\r",
                    "console.log(selectedRow);\r",
                    "\r",
                    "var previousRetailers = selectedRow.record.data.retailers ;\r",
                    "\r",
                    "var removedRtds = [] ;\r",
                    "var addedRtds = [] ;\r",
                    "\r",
                    "// for(var i=0 ; i < retailers.length ; i++){\r",
                    "\r",
                    "\r",
                    "\r",
                    "// }\r",
                    "\r",
                    " Ext.Viewport.setMasked(false) ;"
                ]
            },
            "designerId": "6f30b38c-306f-442a-bb47-8af5852e26ff"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "setFilterForProspectRetailers",
                "implHandler": [
                    "\r",
                    "   var importFrmCsvController = RMdatalink.app.getController('ImportCSV') ;\r",
                    "\r",
                    "\r",
                    "\r",
                    "    var phones = [] ;\r",
                    "\r",
                    "\r",
                    "    for(var i =0 ; i < importFrmCsvController.config.retailerForVendor.length ; i++){\r",
                    "\r",
                    "\r",
                    "        phones.push(importFrmCsvController.config.retailerForVendor[i].retailer_phone) ;\r",
                    "    }\r",
                    "\r",
                    "\r",
                    "// var rtMaster =  Ext.getStore('retailersMaster') ;\r",
                    "\r",
                    " var rtMaster =  Ext.getStore('retailers.prospectRTForVendor') ;\r",
                    "\r",
                    "\r",
                    "        rtMaster.clearFilter();\r",
                    "\r",
                    "    rtMaster.filter(function(record){\r",
                    "\r",
                    "        var filterResult = true ;\r",
                    "\r",
                    "        for(var i =0 ; i < phones.length ; i++ ){\r",
                    "\r",
                    "             if(record.data.store_phone == phones[i]){\r",
                    "\r",
                    "                 filterResult = false ;\r",
                    "                 break ;\r",
                    "             }\r",
                    "\r",
                    "        }\r",
                    "\r",
                    "\r",
                    "            return filterResult ;\r",
                    "\r",
                    "    });\r",
                    "\r",
                    "\r",
                    " Ext.ComponentQuery.query('#onlineVendorsRetailersCLbl')[0].setHtml(\"Total Retailers : \"+ rtMaster.data.items.length ) ;\r",
                    "\r",
                    "Ext.ComponentQuery.query('#inStoreVendorsRetailersCLbl')[0].setHtml(\"Total Retailers : \"+ importFrmCsvController.config.retailerForVendor.length ) ;\r",
                    "\r",
                    "//RDStoreSideTabPanel\r",
                    " Ext.ComponentQuery.query('#RDStoreSideTabPanel #RDOnlineVendorsTab')[0].down(\"#mainList\").deselectAll();\r",
                    ""
                ]
            },
            "designerId": "9af9bbba-f3c7-4c90-a0e3-a246d1238fa5"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "isRemove",
                    "store_id",
                    "store_phone",
                    "vendorRecord",
                    "keyOfRetailer"
                ],
                "fn": "setResetReatilersForVendors",
                "implHandler": [
                    "//  Ext.Viewport.setMasked({\r",
                    "//                     xtype: 'loadmask'\r",
                    "//                 });\r",
                    "\r",
                    "\r",
                    "\r",
                    "// debugger ;\r",
                    "var vendor_name = vendorRecord.data.vendor_name ;\r",
                    "var vendor_id = vendorRecord.data.vendor_id ;\r",
                    "    keyOfRetailer = keyOfRetailer || 'retailers';\r",
                    "\r",
                    "var vendorMaster = Ext.getStore('vendors.Master') ;\r",
                    "\r",
                    "console.log(vendor_id);\r",
                    "console.log(vendor_name);\r",
                    "\r",
                    "if(vendor_id)\r",
                    "{\r",
                    " var record = findVendorBy_id(vendor_id) ;\r",
                    "}\r",
                    "else{\r",
                    " var record = findVendorBy_name(vendor_name) ;\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "console.log(record);\r",
                    "if(!record){\r",
                    "\r",
                    "    return ;\r",
                    "}\r",
                    "\r",
                    "var rtlrs = [] ;\r",
                    "\r",
                    "if(record.data[keyOfRetailer] )\r",
                    "{\r",
                    "    rtlrs = record.data[keyOfRetailer] ;\r",
                    "}\r",
                    "\r",
                    "\r",
                    "if(isRemove){\r",
                    "\r",
                    "    removeRetailerFromVendorDt() ;\r",
                    "\r",
                    "}\r",
                    "else{\r",
                    "\r",
                    "    addRetailerToVendorDt();\r",
                    "}\r",
                    "\r",
                    "updateVendor() ;\r",
                    "\r",
                    "function removeRetailerFromVendorDt(){\r",
                    "    for(var i=0; i< rtlrs.length ; i++ ){\r",
                    "\r",
                    "        if(rtlrs[i].retailer_id ){\r",
                    "\r",
                    "            if(store_id == rtlrs[i].retailer_id ){\r",
                    "\r",
                    "                rtlrs.splice(i, 1);\r",
                    "                break ;\r",
                    "            }\r",
                    "        }else{\r",
                    "\r",
                    "            if(store_phone == rtlrs[i].retailer_phone ){\r",
                    "\r",
                    "\r",
                    "                rtlrs.splice(i, 1);\r",
                    "                 break ;\r",
                    "            }\r",
                    "\r",
                    "\r",
                    "        }\r",
                    "    }\r",
                    "\r",
                    "\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "function addRetailerToVendorDt(){\r",
                    "\r",
                    "    var isRecAlreadyPresent = false ;\r",
                    "\r",
                    "    for(var i=0; i< rtlrs.length ; i++ ){\r",
                    "\r",
                    "        if(rtlrs[i].retailer_id ){\r",
                    "\r",
                    "            if(store_id == rtlrs[i].retailer_id ){\r",
                    "\r",
                    "                isRecAlreadyPresent =true ;\r",
                    "                break ;\r",
                    "            }\r",
                    "        }else{\r",
                    "\r",
                    "            if(store_phone == rtlrs[i].retailer_phone ){\r",
                    "\r",
                    "\r",
                    "                   isRecAlreadyPresent =true ;\r",
                    "                 break ;\r",
                    "            }\r",
                    "\r",
                    "\r",
                    "        }\r",
                    "    }\r",
                    "\r",
                    "\r",
                    "    if(! isRecAlreadyPresent){\r",
                    "\r",
                    "        rtlrs.push(\r",
                    "            {\r",
                    "\r",
                    "                  retailer_phone : store_phone,\r",
                    "                  type: \"ACTIVE\",\r",
                    "                  retailer_id:store_id,\r",
                    "                  Account_No:''\r",
                    "\r",
                    "\r",
                    "           }\r",
                    "        );\r",
                    "    }\r",
                    "\r",
                    "\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "function updateVendor(){\r",
                    "\r",
                    "\r",
                    "    var dataToupdate = {\r",
                    "\r",
                    "\r",
                    "    };\r",
                    "    // record.set(keyOfRetailer, rtlrs);\r",
                    "    dataToupdate[keyOfRetailer] = rtlrs;\r",
                    "    console.error(dataToupdate);\r",
                    "    //return;\r",
                    "    RMdatalink.iwa.rdl.doUpdateCollection(vendorMaster, dataToupdate , record.get('_id'), updateSuccess, updateError );\r",
                    "\r",
                    "\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "function updateSuccess(){\r",
                    "\r",
                    "    record.set(keyOfRetailer, rtlrs);\r",
                    "     Ext.Viewport.setMasked(false);\r",
                    "    console.log(\"vendor updated successfully\");\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "function updateError(){\r",
                    "\r",
                    "     Ext.Viewport.setMasked(false);\r",
                    "    console.log(\"error in updating vendor\");\r",
                    "\r",
                    "}\r",
                    "\r",
                    "function findVendorBy_id(v_id){\r",
                    "\r",
                    "     var vendors = vendorMaster.data.all ;\r",
                    "    var venRec = null ;\r",
                    "    for(var j=0;j<vendors.length ; j++){\r",
                    "\r",
                    "        if(v_id == vendors[j].data._id){\r",
                    "\r",
                    "            venRec = vendors[j] ;\r",
                    "            break;\r",
                    "        }\r",
                    "    }\r",
                    "\r",
                    "    return venRec;\r",
                    "\r",
                    "}\r",
                    "\r",
                    "function findVendorBy_name(v_name){\r",
                    "\r",
                    "    var vendors = vendorMaster.data.all ;\r",
                    "    var venRec = null ;\r",
                    "    for(var j=0;j<vendors.length ; j++){\r",
                    "\r",
                    "        if(v_name == vendors[j].data.vendor_name){\r",
                    "\r",
                    "            venRec = vendors[j] ;\r",
                    "            break;\r",
                    "        }\r",
                    "    }\r",
                    "\r",
                    "    return venRec;\r",
                    "\r",
                    "}"
                ]
            },
            "designerId": "7a56e0a8-6d1a-471e-b967-b43528b2a0ba"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "store_id",
                    "store_phone",
                    "vendor_id",
                    "vendor_name",
                    "acc_No"
                ],
                "fn": "updateAccNoofRetailersVender",
                "implHandler": [
                    "\r",
                    "var isRemove = false;\r",
                    "\r",
                    "\r",
                    "\r",
                    "\r",
                    "var vendorMaster = Ext.getStore('vendors.Master') ;\r",
                    "\r",
                    "console.log(vendor_id);\r",
                    "console.log(vendor_name);\r",
                    "var record;\r",
                    "if(vendor_id)\r",
                    "{\r",
                    "    record = findVendorBy_id(vendor_id) ;\r",
                    "}\r",
                    "else if(vendor_name){\r",
                    "\r",
                    "    record = findVendorBy_name(vendor_name) ;\r",
                    "}else{\r",
                    "    return;\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "console.log(record);\r",
                    "if(!record){\r",
                    "\r",
                    "    return ;\r",
                    "}\r",
                    "\r",
                    "var rtlrs = [] ;\r",
                    "\r",
                    "if(record.data.retailers )\r",
                    "{\r",
                    "    rtlrs = record.data.retailers ;\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "if(isRemove && false){\r",
                    "\r",
                    "    removeRetailerFromVendorDt() ;\r",
                    "\r",
                    "}\r",
                    "else{\r",
                    "\r",
                    "    addRetailerToVendorDt();\r",
                    "}\r",
                    "\r",
                    "updateVendor() ;\r",
                    "\r",
                    "function removeRetailerFromVendorDt(){\r",
                    "    for(var i=0; i< rtlrs.length ; i++ ){\r",
                    "\r",
                    "        if(rtlrs[i].retailer_id ){\r",
                    "\r",
                    "            if(store_id == rtlrs[i].retailer_id ){\r",
                    "\r",
                    "                rtlrs.splice(i, 1);\r",
                    "                break ;\r",
                    "            }\r",
                    "        }else{\r",
                    "\r",
                    "            if(store_phone == rtlrs[i].retailer_phone ){\r",
                    "\r",
                    "\r",
                    "                rtlrs.splice(i, 1);\r",
                    "                 break ;\r",
                    "            }\r",
                    "\r",
                    "\r",
                    "        }\r",
                    "    }\r",
                    "\r",
                    "\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "function addRetailerToVendorDt(){\r",
                    "\r",
                    "    var isRecAlreadyPresent = false ;\r",
                    "\r",
                    "    for(var i=0; i< rtlrs.length ; i++ ){\r",
                    "\r",
                    "        if(rtlrs[i].retailer_id ){\r",
                    "\r",
                    "            if(store_id == rtlrs[i].retailer_id ){\r",
                    "\r",
                    "                console.log(\"ACCOUNT NO ADDED\");\r",
                    "\r",
                    "                rtlrs[i].Account_No = acc_No;\r",
                    "\r",
                    "                isRecAlreadyPresent =true ;\r",
                    "\r",
                    "                break ;\r",
                    "            }\r",
                    "        }else{\r",
                    "\r",
                    "            if(store_phone == rtlrs[i].retailer_phone ){\r",
                    "\r",
                    "\r",
                    "                 isRecAlreadyPresent =true ;\r",
                    "                 break ;\r",
                    "            }\r",
                    "\r",
                    "\r",
                    "        }\r",
                    "    }\r",
                    "\r",
                    "\r",
                    "    if(! isRecAlreadyPresent){\r",
                    "\r",
                    "        rtlrs.push(\r",
                    "            {\r",
                    "\r",
                    "                  retailer_phone : store_phone,\r",
                    "                  type: \"ACTIVE\",\r",
                    "                  retailer_id:store_id,\r",
                    "                  Account_No:''\r",
                    "\r",
                    "\r",
                    "           }\r",
                    "        );\r",
                    "    }\r",
                    "\r",
                    "\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "function updateVendor(){\r",
                    "\r",
                    "\r",
                    "    var dataToupdate = {\r",
                    "\r",
                    "        retailers:rtlrs\r",
                    "    };\r",
                    "    console.error(dataToupdate);\r",
                    "    RMdatalink.iwa.rdl.doUpdateCollection(vendorMaster, dataToupdate , record.get('_id'), updateSuccess, updateError );\r",
                    "\r",
                    "\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "function updateSuccess(){\r",
                    "\r",
                    "    record.set(\"retailers\", rtlrs);\r",
                    "     Ext.Viewport.setMasked(false);\r",
                    "    console.log(\"vendor updated successfully\");\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "function updateError(){\r",
                    "\r",
                    "     Ext.Viewport.setMasked(false);\r",
                    "    console.log(\"error in updating vendor\");\r",
                    "\r",
                    "}\r",
                    "\r",
                    "function findVendorBy_id(v_id){\r",
                    "\r",
                    "     var vendors = vendorMaster.data.all ;\r",
                    "    var venRec = null ;\r",
                    "    for(var j=0;j<vendors.length ; j++){\r",
                    "\r",
                    "        if(v_id == vendors[j].data._id){\r",
                    "\r",
                    "            venRec = vendors[j] ;\r",
                    "            break;\r",
                    "        }\r",
                    "    }\r",
                    "\r",
                    "    return venRec;\r",
                    "\r",
                    "}\r",
                    "\r",
                    "function findVendorBy_name(v_name){\r",
                    "\r",
                    "    var vendors = vendorMaster.data.all ;\r",
                    "    var venRec = null ;\r",
                    "    for(var j=0;j<vendors.length ; j++){\r",
                    "\r",
                    "        if(v_name == vendors[j].data.vendor_name){\r",
                    "\r",
                    "            venRec = vendors[j] ;\r",
                    "            break;\r",
                    "        }\r",
                    "    }\r",
                    "\r",
                    "    return venRec;\r",
                    "\r",
                    "}"
                ]
            },
            "designerId": "253f8006-254f-40d7-aba2-3eb22e0b777e"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "store_id",
                    "store_phone",
                    "vendor_id",
                    "vendor_name",
                    "acc_No"
                ],
                "fn": "updateAccNoofEcomRetailersVender",
                "implHandler": [
                    "\r",
                    "var isRemove = false;\r",
                    "\r",
                    "var vendorMaster = Ext.getStore('vendors.Master');\r",
                    "\r",
                    "\r",
                    "var record;\r",
                    "if(vendor_id)\r",
                    "{\r",
                    "    record = findVendorBy_id(vendor_id) ;\r",
                    "}\r",
                    "else if(vendor_name){\r",
                    "\r",
                    "    record = findVendorBy_name(vendor_name) ;\r",
                    "}else{\r",
                    "    return;\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "\r",
                    "if(!record){\r",
                    "\r",
                    "    return ;\r",
                    "}\r",
                    "\r",
                    "var rtlrs = [] ;\r",
                    "\r",
                    "if(record.data.retailers_ecommerce )\r",
                    "{\r",
                    "    rtlrs = record.data.retailers_ecommerce ;\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "if(isRemove && false){\r",
                    "\r",
                    "    removeRetailerFromVendorDt() ;\r",
                    "\r",
                    "}\r",
                    "else{\r",
                    "\r",
                    "    addRetailerToVendorDt();\r",
                    "}\r",
                    "\r",
                    "updateVendor() ;\r",
                    "\r",
                    "function removeRetailerFromVendorDt(){\r",
                    "    for(var i=0; i< rtlrs.length ; i++ ){\r",
                    "\r",
                    "        if(rtlrs[i].retailer_id ){\r",
                    "\r",
                    "            if(store_id == rtlrs[i].retailer_id ){\r",
                    "\r",
                    "                rtlrs.splice(i, 1);\r",
                    "                break ;\r",
                    "            }\r",
                    "        }else{\r",
                    "\r",
                    "            if(store_phone == rtlrs[i].retailer_phone ){\r",
                    "\r",
                    "\r",
                    "                rtlrs.splice(i, 1);\r",
                    "                 break ;\r",
                    "            }\r",
                    "\r",
                    "\r",
                    "        }\r",
                    "    }\r",
                    "\r",
                    "\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "function addRetailerToVendorDt(){\r",
                    "\r",
                    "    var isRecAlreadyPresent = false ;\r",
                    "\r",
                    "    for(var i=0; i< rtlrs.length ; i++ ){\r",
                    "\r",
                    "        if(rtlrs[i].retailer_id ){\r",
                    "\r",
                    "            if(store_id == rtlrs[i].retailer_id ){\r",
                    "\r",
                    "                console.log(\"ACCOUNT NO ADDED\");\r",
                    "\r",
                    "                rtlrs[i].Account_No = acc_No;\r",
                    "\r",
                    "                isRecAlreadyPresent =true ;\r",
                    "\r",
                    "                break ;\r",
                    "            }\r",
                    "        }else{\r",
                    "\r",
                    "            if(store_phone == rtlrs[i].retailer_phone ){\r",
                    "\r",
                    "\r",
                    "                 isRecAlreadyPresent =true ;\r",
                    "                 break ;\r",
                    "            }\r",
                    "\r",
                    "\r",
                    "        }\r",
                    "    }\r",
                    "\r",
                    "\r",
                    "    if(! isRecAlreadyPresent){\r",
                    "\r",
                    "        rtlrs.push(\r",
                    "            {\r",
                    "\r",
                    "                  retailer_phone : store_phone,\r",
                    "                  type: \"ACTIVE\",\r",
                    "                  retailer_id:store_id,\r",
                    "                  Account_No:''\r",
                    "\r",
                    "\r",
                    "           }\r",
                    "        );\r",
                    "    }\r",
                    "\r",
                    "\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "function updateVendor(){\r",
                    "\r",
                    "\r",
                    "    var dataToupdate = {\r",
                    "\r",
                    "        retailers_ecommerce:rtlrs\r",
                    "    };\r",
                    "    console.error(dataToupdate);\r",
                    "    RMdatalink.iwa.rdl.doUpdateCollection(vendorMaster, dataToupdate , record.get('_id'), updateSuccess, updateError );\r",
                    "\r",
                    "\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "function updateSuccess(){\r",
                    "\r",
                    "    record.set(\"retailers\", rtlrs);\r",
                    "     Ext.Viewport.setMasked(false);\r",
                    "    console.log(\"vendor updated successfully\");\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "function updateError(){\r",
                    "\r",
                    "     Ext.Viewport.setMasked(false);\r",
                    "    console.log(\"error in updating vendor\");\r",
                    "\r",
                    "}\r",
                    "\r",
                    "function findVendorBy_id(v_id){\r",
                    "\r",
                    "     var vendors = vendorMaster.data.all ;\r",
                    "    var venRec = null ;\r",
                    "    for(var j=0;j<vendors.length ; j++){\r",
                    "\r",
                    "        if(v_id == vendors[j].data._id){\r",
                    "\r",
                    "            venRec = vendors[j] ;\r",
                    "            break;\r",
                    "        }\r",
                    "    }\r",
                    "\r",
                    "    return venRec;\r",
                    "\r",
                    "}\r",
                    "\r",
                    "function findVendorBy_name(v_name){\r",
                    "\r",
                    "    var vendors = vendorMaster.data.all ;\r",
                    "    var venRec = null ;\r",
                    "    for(var j=0;j<vendors.length ; j++){\r",
                    "\r",
                    "        if(v_name == vendors[j].data.vendor_name){\r",
                    "\r",
                    "            venRec = vendors[j] ;\r",
                    "            break;\r",
                    "        }\r",
                    "    }\r",
                    "\r",
                    "    return venRec;\r",
                    "\r",
                    "}"
                ]
            },
            "designerId": "42ea1194-6d04-4553-b65e-65110bd63b1f"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "saveAccountNoOfRetailerData",
                "implHandler": [
                    "console.error(\"SHOULD SAVE INFORMATION\");\r",
                    "\r",
                    " var isRetailerDetailsView = RMdatalink.app.getController('UINav').isRetailerDetailsView;\r",
                    " var selectedUserRecord = RMdatalink.util.globalConfig.getDataToShowInSettingWindow() ;\r",
                    "\r",
                    "this.saveAccountNoOfEcomRetailerData();\r",
                    "\r",
                    "if(!isRetailerDetailsView && false)\r",
                    "{\r",
                    "\r",
                    "\r",
                    "//     var strPhone = record.data.store_phone ;\r",
                    "//     var strId = record.data._id ;\r",
                    "//     var impCSV = RMdatalink.app.getController('ImportCSV') ;\r",
                    "//     this.config.selectedRetailerProspect = record.data ;\r",
                    "//     impCSV.assignRetailerForVendor(selectedUserRecord.record.data,strPhone , true,strId) ;\r",
                    "//      var prospectList  = Ext.ComponentQuery.query('#RDOnlineVendorsTab')[0].down(\"#mainList\");\r",
                    "//     var prospectStore = prospectList.getStore() ;\r",
                    "//     // prospectList.remove(record) ;\r",
                    "//     this.setFilterForProspectRetailers();\r",
                    "//      RMdatalink.app.getController('VendorRetailerRelations').updateVendorOnRetailerAddedOrRemoved() ;\r",
                    "\r",
                    "\r",
                    "}else{\r",
                    "    console.error(202);\r",
                    "\r",
                    "\r",
                    "\r",
                    "    var activeList  = Ext.ComponentQuery.query('#RDStoreSideTabPanel #RDInStoreVendorsTab')[0].down(\"#mainList\");\r",
                    "    var activeStore = activeList.getStore() ;\r",
                    "    var selectedUserRecord = RMdatalink.util.globalConfig.getDataToShowInSettingWindow() ;\r",
                    "\r",
                    "\r",
                    "    var arrayOfData = activeStore.data.items;\r",
                    "\r",
                    "\r",
                    "    for(var i=0; i <arrayOfData.length ; i++){\r",
                    "\r",
                    "\r",
                    "        var vendorId = arrayOfData[i].data.vendor_id;\r",
                    "        var vendor_name = arrayOfData[i].data.vendor_name;\r",
                    "        var retailerId = selectedUserRecord.record.data._id;\r",
                    "        var retailerPhone = selectedUserRecord.record.data.store_phone;\r",
                    "        var itemsOflist = activeList.getItemAt(i);\r",
                    "        var a = Ext.get(itemsOflist.element.dom);\r",
                    "        var input = a.query(\"Input\");\r",
                    "        var accountNo = vendorIdAccountValue[vendorId];\r",
                    "\r",
                    "\r",
                    "\r",
                    "        this.updateAccNoofRetailersVender(retailerId  , retailerPhone , vendorId  , vendor_name  , accountNo);\r",
                    "    }\r",
                    "\r",
                    "   RMdatalink.app.getController('RetailerDeatilsDataSet').setTemplateOfListByEditingMode(false); \r",
                    "\r",
                    "}\r",
                    "\r",
                    ""
                ]
            },
            "designerId": "07ea8aaa-0646-401b-be50-7309d2b3c1ba"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "saveAccountNoOfEcomRetailerData",
                "implHandler": [
                    "console.error(\"SHOULD SAVE INFORMATION\");\r",
                    "\r",
                    " var isRetailerDetailsView = RMdatalink.app.getController('UINav').isRetailerDetailsView;\r",
                    " var selectedUserRecord = RMdatalink.util.globalConfig.getDataToShowInSettingWindow() ;\r",
                    "\r",
                    "\r",
                    "\r",
                    "if(!isRetailerDetailsView && false)\r",
                    "{\r",
                    "\r",
                    "\r",
                    "//     var strPhone = record.data.store_phone ;\r",
                    "//     var strId = record.data._id ;\r",
                    "//     var impCSV = RMdatalink.app.getController('ImportCSV') ;\r",
                    "//     this.config.selectedRetailerProspect = record.data ;\r",
                    "//     impCSV.assignRetailerForVendor(selectedUserRecord.record.data,strPhone , true,strId) ;\r",
                    "//      var prospectList  = Ext.ComponentQuery.query('#RDOnlineVendorsTab')[0].down(\"#mainList\");\r",
                    "//     var prospectStore = prospectList.getStore() ;\r",
                    "//     // prospectList.remove(record) ;\r",
                    "//     this.setFilterForProspectRetailers();\r",
                    "//      RMdatalink.app.getController('VendorRetailerRelations').updateVendorOnRetailerAddedOrRemoved() ;\r",
                    "\r",
                    "\r",
                    "}else{\r",
                    "    console.error(202);\r",
                    "\r",
                    "\r",
                    "\r",
                    "    var activeList  = Ext.ComponentQuery.query('#RDForECommerce #RDInStoreVendorsTab')[0].down(\"#mainList\");\r",
                    "    var activeStore = activeList.getStore() ;\r",
                    "    var selectedUserRecord = RMdatalink.util.globalConfig.getDataToShowInSettingWindow() ;\r",
                    "\r",
                    "    if(activeStore){\r",
                    "        \r",
                    "    var arrayOfData = activeStore.data.items;\r",
                    "\r",
                    "\r",
                    "        for(var i=0; i <arrayOfData.length ; i++){\r",
                    "    \r",
                    "    \r",
                    "            var vendorId = arrayOfData[i].data.vendor_id;\r",
                    "            var vendor_name = arrayOfData[i].data.vendor_name;\r",
                    "            var retailerId = selectedUserRecord.record.data._id;\r",
                    "            var retailerPhone = selectedUserRecord.record.data.store_phone;\r",
                    "    //       var itemsOflist = activeList.getItemAt(i);\r",
                    "    //        var input = a.query(\"Input\");\r",
                    "            var accountNo = vendorIdAccountValueEComm[vendorId];\r",
                    "    //retailers_ecommerce\r",
                    "    \r",
                    "            console.error(retailerId  , retailerPhone , vendorId  , vendor_name  , accountNo);\r",
                    "            this.updateAccNoofEcomRetailersVender(retailerId  , retailerPhone , vendorId  , vendor_name  , accountNo);\r",
                    "        }\r",
                    "        \r",
                    "    }\r",
                    "\r",
                    "\r",
                    "\r",
                    "//     var objectToAdd = {\r",
                    "//         Account_No:'',\r",
                    "//         'SKU':\trecord.data.SKU,\r",
                    "//         'collections':\trecord.data.collections,\r",
                    "//         'design':\trecord.data.design,\r",
                    "//         'no_of_additional_images':\trecord.data.no_of_additional_images,\r",
                    "//         'no_of_images':\trecord.data.no_of_images,\r",
                    "//         'sku':\trecord.data.sku,\r",
                    "//         'status':\trecord.data.status,\r",
                    "//         'store_city':\trecord.data.store_city,\r",
                    "//         'store_name':\trecord.data.store_name,\r",
                    "//         'store_phone':\trecord.data.store_phone,\r",
                    "//         'store_state':\trecord.data.store_state,\r",
                    "//         'vendor_id':\trecord.data.vendor_id,\r",
                    "//         'vendor_name':\trecord.data.vendor_name\r",
                    "\r",
                    "//     };\r",
                    "\r",
                    "//     activeStore.add(objectToAdd) ;\r",
                    "//     activeList.selectAll() ;\r",
                    "\r",
                    "// //     var objectToAddInRetailersArrayofRecord = {\r",
                    "// //         retailer_id:\r",
                    "// //     }\r",
                    "\r",
                    "//     this.setFilterForProspectVendors() ;\r",
                    "}"
                ]
            },
            "designerId": "5a139b7e-a912-450c-aa3d-5f2fa1420153"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "vendorRecord",
                    "recIndex"
                ],
                "fn": "goToVendor_RetailerDetail",
                "implHandler": [
                    "var isRetailerDetailsView = RMdatalink.app.getController('UINav').isRetailerDetailsView;\r",
                    "\r",
                    "alert(isRetailerDetailsView);\r",
                    "if(isRetailerDetailsView){\r",
                    "\r",
                    "    // RMdatalink.app.getController('UINav').redirectTo('card3');\r",
                    "\r",
                    "\r",
                    "                        var vendorList = Ext.ComponentQuery.query('#allVendorTab')[0].down('#vendorList');\r",
                    "\r",
                    "\r",
                    "\r",
                    "                        var varibleToSet = setVariable();\r",
                    "                        var vendorsMainContentPanel = Ext.ComponentQuery.query('#vendorsMainContentPanel')[0];\r",
                    "                        Ext.ComponentQuery.query('#retailerDetailsMainTabPanel')[0].setActiveItem('#RDStoresTab');\r",
                    "                        RMdatalink.util.globalConfig.setDataToShowInSettingWindow(varibleToSet);\r",
                    "\r",
                    "                        RMdatalink.app.getController('UINav').onPanelAddretailertapped(vendorsMainContentPanel);\r",
                    "\r",
                    "\r",
                    "\r",
                    "\r",
                    "\r",
                    "\r",
                    "}\r",
                    "\r",
                    "\r",
                    "\r",
                    "function setVariable(){\r",
                    "\r",
                    "    return {\r",
                    "\r",
                    "        placeClicked:  \"\",\r",
                    "        record:vendorRecord,\r",
                    "        index:recIndex\r",
                    "    };\r",
                    "}\r",
                    ""
                ]
            },
            "designerId": "fce8185d-cd95-46f0-b3b1-392985b2b485"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "updateVendorOnRetailerAddedOrRemoved",
                "implHandler": [
                    "\r",
                    "                 var masterStore = Ext.getStore('vendors.Master');\r",
                    "\r",
                    "\r",
                    "                 var selectedUserRecord = RMdatalink.util.globalConfig.getDataInRetailerScreenForSaveOrCancel();\r",
                    "\r",
                    "\r",
                    "                if( !( Object.keys(selectedUserRecord).length  )   ){\r",
                    "                    // USER CLICKED ON ADD NEW RETAILER BTN\r",
                    "\r",
                    "                    return ;\r",
                    "                }\r",
                    "\r",
                    "                var _id = selectedUserRecord.record.data._id ;\r",
                    "                var importFrmCsvController = RMdatalink.app.getController('ImportCSV') ;\r",
                    "\r",
                    "                var recToUpdate =\r",
                    "                    {\r",
                    "                        retailers : importFrmCsvController.config.retailerForVendor\r",
                    "                    };\r",
                    "\r",
                    "\r",
                    "\r",
                    "                 RMdatalink.iwa.rdl.doUpdateCollection(masterStore, recToUpdate , _id , suc, err);\r",
                    "\r",
                    "\r",
                    "                    function suc(){\r",
                    "\r",
                    "                    }\r",
                    "                    function err(){\r",
                    "\r",
                    "                    }"
                ]
            },
            "designerId": "db17f56a-6dd2-4800-bfc1-2fbd5df3a9c5"
        }
    ]
}
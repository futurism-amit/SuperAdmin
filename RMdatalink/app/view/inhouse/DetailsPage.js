/*
 * File: app/view/inhouse/DetailsPage.js
 *
 * This file was generated by Sencha Architect version 3.0.4.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Sencha Touch 2.3.x library, under independent license.
 * License of Sencha Architect does not include license for Sencha Touch 2.3.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('RMdatalink.view.inhouse.DetailsPage', {
    extend: 'Ext.Container',
    alias: 'widget.inhousedetailspage',

    requires: [
        'RMdatalink.view.detailsHeader',
        'RMdatalink.view.common.searchView',
        'RMdatalink.view.listWithHeader',
        'RMdatalink.view.inhouse.customersList',
        'Ext.tab.Panel',
        'Ext.form.Panel',
        'Ext.Label',
        'Ext.form.FieldSet',
        'Ext.Img',
        'Ext.field.File',
        'Ext.Button',
        'Ext.field.Select',
        'Ext.field.Email',
        'Ext.field.Url',
        'Ext.dataview.List',
        'Ext.XTemplate',
        'Ext.field.TextArea',
        'Ext.field.Search',
        'Ext.tab.Bar',
        'Ext.TitleBar',
        'Ext.field.Number'
    ],

    config: {
        height: '100%',
        itemId: 'inhouseDetailPageScreenPanel',
        width: '100%',
        layout: 'vbox',
        items: [
            {
                xtype: 'detailsHeader',
                flex: 1
            },
            {
                xtype: 'container',
                flex: 15,
                itemId: 'mycontainer112',
                layout: 'hbox',
                items: [
                    {
                        xtype: 'tabpanel',
                        flex: 2,
                        cls: 'x-rm-tabpanel',
                        itemId: 'inhouseDetailsMainTabPanel',
                        ui: 'light',
                        items: [
                            {
                                xtype: 'container',
                                title: 'PROFILE',
                                itemId: 'inhouseManagerTab',
                                items: [
                                    {
                                        xtype: 'container',
                                        height: '100%',
                                        itemId: 'inhouseProfileContainer',
                                        width: '100%',
                                        layout: 'vbox',
                                        items: [
                                            {
                                                xtype: 'formpanel',
                                                action: 'setScrollBarVisible',
                                                cls: 'x-rm-rdformpanel',
                                                disabled: false,
                                                height: '65%',
                                                itemId: 'inhouseUserProfileFormPanel',
                                                width: '100%',
                                                scrollable: true,
                                                layout: {
                                                    type: 'vbox',
                                                    align: 'center'
                                                },
                                                items: [
                                                    {
                                                        xtype: 'label',
                                                        html: 'RM EMPLOYEE',
                                                        itemId: 'RDManagerAccManagerLabel'
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        margin: '50 0 0 0',
                                                        layout: 'hbox',
                                                        items: [
                                                            {
                                                                xtype: 'image',
                                                                action: 'imageSelector',
                                                                title: 'Change Photo',
                                                                cls: 'x-rm-rdthumbnail',
                                                                height: 60,
                                                                hidden: false,
                                                                itemId: 'inhouseProfileAddPhotoImage',
                                                                width: 60,
                                                                src: 'resources//images//logos//default_User.jpg'
                                                            },
                                                            {
                                                                xtype: 'filefield',
                                                                title: 'Change Photo',
                                                                cls: 'x-rm-rdaddphoto',
                                                                height: '60px',
                                                                itemId: 'inhouseProfileAddPhoto',
                                                                margin: '0 0 0 -60',
                                                                width: '60px',
                                                                accept: 'image/*'
                                                            },
                                                            {
                                                                xtype: 'fieldset',
                                                                flex: 1,
                                                                items: [
                                                                    {
                                                                        xtype: 'fieldset',
                                                                        width: '100%',
                                                                        layout: 'hbox',
                                                                        items: [
                                                                            {
                                                                                xtype: 'textfield',
                                                                                flex: 3,
                                                                                itemId: 'inhouseProfileStoreName',
                                                                                margin: '0 0 0 20',
                                                                                label: 'User Name',
                                                                                labelWidth: '100px'
                                                                            },
                                                                            {
                                                                                xtype: 'button',
                                                                                flex: 1,
                                                                                cls: 'x-rm-blueBtn',
                                                                                itemId: 'inhouseProfileStoreEditBtn',
                                                                                margin: '0 0 0 1%',
                                                                                maxWidth: '100px',
                                                                                ui: 'plain',
                                                                                pressedCls: 'x-rm-blueBtn-pressing',
                                                                                text: 'EDIT'
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        xtype: 'fieldset',
                                                                        layout: 'hbox',
                                                                        items: [
                                                                            {
                                                                                xtype: 'textfield',
                                                                                flex: 3,
                                                                                itemId: 'inhouseProfilePosition',
                                                                                margin: '0 0 0 20',
                                                                                label: 'Position',
                                                                                labelWidth: '100px'
                                                                            },
                                                                            {
                                                                                xtype: 'button',
                                                                                flex: 1,
                                                                                cls: 'x-rm-blueBtn',
                                                                                docked: 'right',
                                                                                itemId: 'inhouseProfileRegeneratePwdBtn',
                                                                                margin: '0 0 0 1%',
                                                                                maxWidth: '142px',
                                                                                ui: 'plain',
                                                                                pressedCls: 'x-rm-blueBtn-pressing',
                                                                                text: 'Regenerate password '
                                                                            }
                                                                        ]
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        hidden: false,
                                                        layout: 'hbox',
                                                        items: [
                                                            {
                                                                xtype: 'selectfield',
                                                                itemId: 'inhouseUserProfileDirectPermissionFld',
                                                                width: '100%',
                                                                label: 'User Role',
                                                                labelWidth: '105px',
                                                                displayField: 'user_role',
                                                                store: 'PermisstionsStore',
                                                                valueField: 'user_role'
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        layout: 'hbox',
                                                        items: [
                                                            {
                                                                xtype: 'textfield',
                                                                flex: 1,
                                                                itemId: 'inhouseProfileFirstName',
                                                                label: 'First Name',
                                                                labelWidth: 105
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                flex: 1,
                                                                itemId: 'inhouseProfileLastName',
                                                                label: 'Last Name',
                                                                labelWidth: '75px'
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'emailfield',
                                                        action: 'clearIconTap',
                                                        itemId: 'inhouseProfileEmail',
                                                        label: 'Email',
                                                        labelWidth: 105,
                                                        placeHolder: 'email@example.com'
                                                    },
                                                    {
                                                        xtype: 'emailfield',
                                                        action: 'clearIconTap',
                                                        itemId: 'inhouseProfilePersonalEmail',
                                                        label: 'Personal Email',
                                                        labelWidth: 105,
                                                        placeHolder: 'email@example.com'
                                                    },
                                                    {
                                                        xtype: 'textfield',
                                                        itemId: 'inhouseProfilePcNumberFld',
                                                        label: 'PC Number',
                                                        labelWidth: 105,
                                                        maxLength: 15
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        layout: 'hbox',
                                                        items: [
                                                            {
                                                                xtype: 'textfield',
                                                                action: 'clearIconTap',
                                                                actionChange: 'textChange',
                                                                itemId: 'inhouseProfilePhoneExt',
                                                                width: '100%',
                                                                label: 'Office Extension',
                                                                labelWidth: 105,
                                                                maxLength: 10
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                action: 'clearIconTap',
                                                                actionChange: 'textChange',
                                                                hidden: true,
                                                                itemId: 'inhouseProfilePhone',
                                                                width: '27%',
                                                                label: 'Ext',
                                                                labelWidth: '51px',
                                                                maxLength: 10
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'textfield',
                                                        actionChange: 'textChange',
                                                        action: 'clearIconTap',
                                                        itemId: 'inhouseProfileMobile',
                                                        label: 'Cell Phone',
                                                        labelWidth: 105
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        layout: {
                                                            type: 'hbox',
                                                            align: 'center'
                                                        },
                                                        items: [
                                                            {
                                                                xtype: 'textfield',
                                                                itemId: 'InhouseUserAddress',
                                                                width: '73%',
                                                                label: 'Address',
                                                                labelWidth: 105
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                action: 'clearIconTap',
                                                                itemId: 'InhouseUserSuite',
                                                                width: '27%',
                                                                label: 'Suite',
                                                                labelWidth: '51px'
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        layout: 'hbox',
                                                        items: [
                                                            {
                                                                xtype: 'textfield',
                                                                flex: 1,
                                                                itemId: 'InhouseUserCity',
                                                                minWidth: '40%',
                                                                label: 'City',
                                                                labelWidth: 105
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                action: 'autoSuggestionField',
                                                                flex: 1,
                                                                itemId: 'InhouseUserState',
                                                                minWidth: '20%',
                                                                width: '40%',
                                                                label: 'State',
                                                                labelWidth: '50px'
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                action: 'clearIconTap',
                                                                flex: 1,
                                                                itemId: 'InhouseUserZip',
                                                                minWidth: '20%',
                                                                width: '20%',
                                                                label: 'Zip',
                                                                labelWidth: '50px',
                                                                maxLength: 5
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'urlfield',
                                                        hidden: true,
                                                        itemId: 'inhouseProfileLinkedIn',
                                                        label: 'LinkedIn',
                                                        labelWidth: '90px',
                                                        placeHolder: 'http://example.com'
                                                    },
                                                    {
                                                        xtype: 'urlfield',
                                                        hidden: true,
                                                        itemId: 'inhouseProfileFacebook',
                                                        label: 'Facebook',
                                                        labelWidth: '90px',
                                                        placeHolder: 'http://example.com'
                                                    },
                                                    {
                                                        xtype: 'urlfield',
                                                        hidden: true,
                                                        itemId: 'inhouseProfileTwitter',
                                                        label: 'Twitter',
                                                        labelWidth: '90px',
                                                        placeHolder: 'http://example.com'
                                                    },
                                                    {
                                                        xtype: 'textfield',
                                                        itemId: 'inhouseProfileLinkedInField',
                                                        label: 'Linkedin',
                                                        labelWidth: 105
                                                    },
                                                    {
                                                        xtype: 'textfield',
                                                        itemId: 'inhouseProfileFacebookField',
                                                        label: 'Facebook',
                                                        labelWidth: 105
                                                    },
                                                    {
                                                        xtype: 'textfield',
                                                        itemId: 'inhouseProfileTwitterField',
                                                        label: 'Twitter',
                                                        labelWidth: 105,
                                                        maxLength: 15
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        baseCls: 'x-form-fieldset normalTitle',
                                                        layout: 'hbox',
                                                        title: '<div style = "border-bottom: solid 2px #ccc;">Division</div>',
                                                        items: [
                                                            {
                                                                xtype: 'label',
                                                                flex: 1,
                                                                html: '<div class="x-rm-radio-discount"> <input id = "inHouse" class="pointerCursor" type="radio"  checked=true name="division-checkbox"  checked="true" onchange   ="RMdatalink.app.getController  (\'discount.DiscountTabHandler\').onRadioBtnSelectionEnabledisable(this);"/><label> &nbsp;&nbsp;&nbsp; In House Sales Team</label></div>',
                                                                itemId: 'inHouseRadioBtnLabel',
                                                                margin: '3 0 0 0'
                                                            },
                                                            {
                                                                xtype: 'label',
                                                                flex: 1,
                                                                html: ' <div class="x-rm-radio-discount"> <input id = "outSide" type="radio" name="division-checkbox" onchange   ="RMdatalink.app.getController  (\'discount.DiscountTabHandler\').onRadioBtnSelectionEnabledisable(this);"/> <label> &nbsp;&nbsp;&nbsp; Outside Sales Representative</label> </div>',
                                                                itemId: 'outSideRadioBtnLabel',
                                                                margin: '3 0 0 0'
                                                            }
                                                        ]
                                                    }
                                                ],
                                                listeners: [
                                                    {
                                                        fn: function(component, eOpts) {
                                                            var fileField = component.down('#inhouseProfileAddPhoto');
                                                            var fileSelect = fileField.element.dom.querySelector('input[type=file]');

                                                            fileSelect.onchange = function() {



                                                                //       Ext.Msg.alert('Alert.', 'Currently image uploading is not available.', Ext.emptyFn);
                                                                //     return ;


                                                                var file = this.files[0];
                                                                var imageType = /image.*/;
                                                                if (!file.type.match(imageType)) {
                                                                    return;
                                                                }
                                                                var reader = new FileReader();
                                                                reader.onload = function(event) {
                                                                    var dataUri = event.target.result;
                                                                    component.down('#inhouseProfileAddPhotoImage').setSrc(dataUri).setHidden(false);
                                                                    fileField.setHidden(true);
                                                                };
                                                                reader.onerror = function(event) {
                                                                    console.error("File could not be read! Code " + event.target.error.code);
                                                                };
                                                                reader.readAsDataURL(file);
                                                            };
                                                        },
                                                        event: 'initialize'
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'label',
                                                cls: 'x-rm-rdLabel',
                                                html: 'RECENT ACTIVITY',
                                                itemId: 'inhouseProfileActivityLabel'
                                            },
                                            {
                                                xtype: 'list',
                                                action: 'setScrollBarVisible',
                                                cls: [
                                                    'x-rm-list',
                                                    'x-rm-rdmanageractivitylist'
                                                ],
                                                height: '28%',
                                                itemId: 'inhouseProfileActivityList',
                                                margin: '40px 0 0 10px',
                                                width: '80%',
                                                disableSelection: true,
                                                deferEmptyText: false,
                                                emptyText: '<p class="x-rm-emptytext">No Recent Activity</p>',
                                                itemTpl: [
                                                    '<div class="x-rm-listtpl-main pointerCursor" style="">',
                                                    '    <div style="width:15%;">{activity_date}</div>',
                                                    '    <div style="width:10%;height:100%;">',
                                                    '        <div style="width:100%;height:100%;"></div>',
                                                    '    </div>',
                                                    '    <div style="width:75%;">{activity_description}</div>',
                                                    '</div>'
                                                ],
                                                itemHeight: 22
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                xtype: 'container',
                                title: 'NOTES',
                                itemId: 'inhouseNotesTab',
                                layout: {
                                    type: 'vbox',
                                    align: 'center'
                                },
                                items: [
                                    {
                                        xtype: 'container',
                                        height: '35px',
                                        margin: '5 0 0 0',
                                        width: '100%',
                                        items: [
                                            {
                                                xtype: 'searchView',
                                                height: '100%',
                                                width: '100%'
                                            }
                                        ]
                                    },
                                    {
                                        xtype: 'listwithheader',
                                        height: '40%',
                                        itemId: 'RDNotesListItemID',
                                        width: '85%'
                                    },
                                    {
                                        xtype: 'container',
                                        height: '7%',
                                        width: '85%',
                                        layout: {
                                            type: 'hbox',
                                            align: 'center',
                                            pack: 'end'
                                        },
                                        items: [
                                            {
                                                xtype: 'button',
                                                cls: [
                                                    'x-rm-rdclosebtns',
                                                    'x-rm-smalliconbtns'
                                                ],
                                                height: '25px',
                                                itemId: 'inhouseNotesDelBtn',
                                                margin: '0 1%',
                                                ui: 'plain',
                                                width: '25px',
                                                icon: 'resources//images//retailerDetail//delete_btn.png',
                                                iconAlign: 'center'
                                            },
                                            {
                                                xtype: 'button',
                                                cls: [
                                                    'x-rm-rdopenbtns',
                                                    'x-rm-smalliconbtns'
                                                ],
                                                height: '25px',
                                                itemId: 'inhouseNotesAddBtn',
                                                ui: 'plain',
                                                width: '25px',
                                                icon: 'resources//images//retailerDetail//add_btn.png',
                                                iconAlign: 'center'
                                            }
                                        ]
                                    },
                                    {
                                        xtype: 'container',
                                        cls: 'x-rm-rdnotes-sticky',
                                        height: '40%',
                                        itemId: 'inhouseNotepad',
                                        width: '85%',
                                        layout: {
                                            type: 'vbox',
                                            align: 'center'
                                        },
                                        items: [
                                            {
                                                xtype: 'container',
                                                height: '8%',
                                                style: 'background-color:#3D3E3D;',
                                                width: '100%'
                                            },
                                            {
                                                xtype: 'formpanel',
                                                cls: 'x-rm-rdformpanel',
                                                height: '70%',
                                                margin: '15 0 0 0',
                                                width: '100%',
                                                scrollable: false,
                                                layout: {
                                                    type: 'vbox',
                                                    align: 'center'
                                                },
                                                items: [
                                                    {
                                                        xtype: 'textareafield',
                                                        flex: 1,
                                                        itemId: 'inhouseNotepadNote',
                                                        clearIcon: false
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'container',
                                                width: '95%',
                                                layout: 'hbox',
                                                items: [
                                                    {
                                                        xtype: 'button',
                                                        selected: false,
                                                        cls: 'x-rm-rdnotesadminbtn-unselected',
                                                        itemId: 'inhouseNotepadAdminBtn',
                                                        ui: 'plain',
                                                        pressedCls: 'x-rm-rdnotesadminbtn-pressing',
                                                        text: '<div  style=" line-height: 8px; background-size: 8px 8px;background-image: url(\'resources/images/retailerDetail/dot2.png\');background-repeat: no-repeat;">&nbsp &nbsp <span>Admin Only</span> </div>'
                                                    },
                                                    {
                                                        xtype: 'label',
                                                        cls: 'x-rm-rdnotesnamelabel',
                                                        docked: 'right',
                                                        itemId: 'inhouseNotesNameLabel'
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        xtype: 'label',
                                        html: '<div class="retailerNoteBottomLabel">Note: Darken &nbsp&nbsp<span  style=" line-height: 8px; background-size: 8px 8px;background-image:   url(\'resources/images/retailerDetail/dot1.png\');background-repeat: no-repeat;background-position: center;">&nbsp  </span> <span style=" color:black">&nbspAdmin Only</span>&nbsp&nbsp when selected, allowing only "Admins" ability to view</div>',
                                        margin: '5 0 15 0',
                                        width: '85%'
                                    }
                                ],
                                listeners: [
                                    {
                                        fn: function(component, eOpts) {

                                            var headers = component.down("#headerList");
                                            headers.setData([{}]);
                                            headers.setItemTpl(
                                            Ext.create('Ext.XTemplate',
                                            '<div class="x-rm-listtpl-main">',
                                            '    <div style="width: 47%;" data-name="subject">',
                                            '        Subject&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',
                                            '    <div style="width: 20%;" data-name="date">',
                                            '        Date&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',
                                            '    <div style="width: 33%;" data-name="crmuser">',
                                            '        CRM User&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',
                                            '</div>'
                                            )
                                            );
                                            headers.refresh();

                                            var list = component.down('#mainList');
                                            //list.setStore('retailersDetailsNotes');
                                            list.setDeferEmptyText(false);
                                            list.setEmptyText('<p class="x-rm-emptytext">No saved notes to show</p>');
                                            list.setItemHeight('22');
                                            list.addCls('x-rm-rdnoteslist');
                                            list.setItemTpl(
                                            Ext.create('Ext.XTemplate',
                                            '<div class="x-rm-listtpl-main">',
                                            '    <div style="width: 47%;">{subject}</div>',
                                            '    <div style="width: 20%;">{[this.getFormattedDate(values)]}</div>',
                                            '    <div style="width: 33%;">{crmuser}</div>',
                                            '</div>',
                                            {
                                                getFormattedDate: function(values) {
                                                    return Ext.Date.format(new Date(values.date), 'Y/m/d');
                                                }
                                            }
                                            )
                                            );
                                            //list.onStoreClear();

                                            component.down('#inhouseNotesNameLabel').setHtml('by Me on '+Ext.Date.format(new Date(), 'Y/m/d'));
                                        },
                                        event: 'initialize'
                                    }
                                ]
                            },
                            {
                                xtype: 'container',
                                title: 'COMMISSION',
                                itemId: 'inhouseDtlCommitionTab',
                                layout: 'vbox',
                                items: [
                                    {
                                        xtype: 'fieldset',
                                        flex: 2,
                                        itemId: 'myfieldset90',
                                        layout: 'vbox',
                                        items: [
                                            {
                                                xtype: 'fieldset',
                                                cls: [
                                                    'x-rm-rdformpanel',
                                                    'noBorderFldSet'
                                                ],
                                                height: '32px',
                                                itemId: 'inhouseCommSearchFldSet',
                                                margin: '5 5 5 5',
                                                style: 'border: none;',
                                                width: '98%',
                                                layout: 'hbox',
                                                items: [
                                                    {
                                                        xtype: 'searchfield',
                                                        flex: 1,
                                                        cls: 'x-field-techLogsearch',
                                                        itemId: 'inhouseCommSearchFld',
                                                        style: 'border: none;'
                                                    },
                                                    {
                                                        xtype: 'button',
                                                        cls: 'x-rm-blueBtn',
                                                        height: '25px',
                                                        itemId: 'inhouseCommisionSerchBtn',
                                                        width: '90px',
                                                        text: 'Search'
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'listwithheader',
                                                flex: 1
                                            },
                                            {
                                                xtype: 'label',
                                                html: 'Total : $ 0.00 ',
                                                itemId: 'inhouseTotalCommistionAmtLbl',
                                                margin: '5 0 5 80%',
                                                width: '22%'
                                            }
                                        ],
                                        listeners: [
                                            {
                                                fn: function(component, eOpts) {

                                                    var headers = component.down("#headerList");
                                                    headers.setData([{}]);
                                                    headers.setItemTpl(
                                                    Ext.create('Ext.XTemplate',
                                                    '<div class="x-rm-listtpl-main">',
                                                    '    <div style="width: 20%;" data-name="store_name">',
                                                    '        Retailer &nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                    '    </div>',
                                                    '    <div style="width: 15%;" data-name="invoice_number">',
                                                    '        Invoice#&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                    '    </div>',

                                                    '    <div style="width: 12%;" data-name="date">',
                                                    '        Date&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                    '    </div>',
                                                    '    <div style="width: 20%;" data-name="commissionable_ammount">',
                                                    '        Commissionable amount &nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                    '    </div>',
                                                    '    <div style="width: 15%;" data-name="salesperson_commission">',
                                                    '        Commission %&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                    '    </div>',
                                                    '    <div style="width: 15%;" data-name="commisson">',
                                                    '        Commission&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                    '    </div>',
                                                    '</div>'
                                                    )
                                                    );

                                                    headers.refresh();

                                                    var list = component.down('#mainList');
                                                    list.setStore('InhouseCommissionStore');
                                                    list.setDeferEmptyText(false);
                                                    list.setEmptyText('<p class="x-rm-emptytext">No Data available</p>');
                                                    list.setItemHeight('22');
                                                    list.addCls('x-rm-rdvendorslist');
                                                    list.setItemTpl(
                                                    Ext.create('Ext.XTemplate',
                                                    '<div class="x-rm-listtpl-main">',
                                                    '    <div style="width: 20%;">{store_name}</div>',
                                                    '    <div style="width: 15%;">{invoice_number}</div>',
                                                    '    <div style="width: 12%;">{date}</div>',
                                                    '    <div style="width: 20%;text-align: right;padding-right: 4%;">${commissionable_ammount}</div>',
                                                    '    <div style="width: 15%;text-align: right;padding-right: 4%;">{salesperson_commission}%</div>',
                                                    '    <div style="width: 15%;text-align: right;padding-right: 4%;">${commisson}</div>',
                                                    '</div>'
                                                    )
                                                    );
                                                },
                                                event: 'initialize'
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                xtype: 'titlebar',
                                baseCls: 'x-toolbar noBorder',
                                cls: [
                                    'titleBarHtml',
                                    'pointerCursor'
                                ],
                                docked: 'top',
                                html: '<center>Manage User Roles</center>',
                                itemId: 'inhouseUserPermissionsTtlBar',
                                style: 'margin-top:-30px;margin-left:80%;background:transparent;',
                                width: '20%',
                                layout: {
                                    type: 'hbox',
                                    align: 'center'
                                }
                            }
                        ],
                        tabBar: {
                            docked: 'top',
                            width: '90%'
                        }
                    },
                    {
                        xtype: 'container',
                        flex: 1,
                        itemId: 'inhouseSideContainer',
                        margin: '8 0 0 8',
                        layout: {
                            type: 'card',
                            animation: false
                        },
                        items: [
                            {
                                xtype: 'container',
                                height: '100%',
                                hidden: false,
                                itemId: 'inhouseProfileSideContainer',
                                width: '100%',
                                layout: 'fit',
                                items: [
                                    {
                                        xtype: 'tabpanel',
                                        cls: [
                                            'x-rm-tabpanel',
                                            'x-rm-tabpanelWidth50'
                                        ],
                                        height: '100%',
                                        itemId: 'inhouseProfileSideTabPanel',
                                        ui: 'light',
                                        width: '100%',
                                        items: [
                                            {
                                                xtype: 'container',
                                                title: 'CUSTOMERS ACCOUNT',
                                                layout: 'fit',
                                                items: [
                                                    {
                                                        xtype: 'container',
                                                        itemId: 'mycontainer124',
                                                        margin: '4%',
                                                        layout: 'vbox',
                                                        items: [
                                                            {
                                                                xtype: 'inhousecustomerslist',
                                                                height: '70%',
                                                                itemId: 'inhouse.customerslist'
                                                            },
                                                            {
                                                                xtype: 'container',
                                                                hidden: true,
                                                                minHeight: '4%',
                                                                style: 'background-color:#2EC1DA;',
                                                                layout: {
                                                                    type: 'vbox',
                                                                    pack: 'center'
                                                                },
                                                                items: [
                                                                    {
                                                                        xtype: 'label',
                                                                        cls: 'x-rm-rdtipslabel',
                                                                        html: 'WHAT\'S NEW',
                                                                        itemId: 'RDManagerWhatsNewLabel'
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'list',
                                                                action: 'setScrollBarVisible',
                                                                cls: [
                                                                    'x-rm-list',
                                                                    'x-rm-tipslist'
                                                                ],
                                                                height: '20%',
                                                                hidden: true,
                                                                itemId: 'inhouseProfileWhatsNewList',
                                                                margin: '2%',
                                                                itemTpl: [
                                                                    '<ul class="x-rm-tipslist-tpl">',
                                                                    '    <li style = "list-style-position: inside;list-style-type: disc;">{notification}</li>',
                                                                    '</ul>'
                                                                ],
                                                                store: 'notificationsNew',
                                                                itemHeight: 20
                                                            },
                                                            {
                                                                xtype: 'container',
                                                                hidden: true,
                                                                minHeight: '4%',
                                                                style: 'background-color:#3D3E3D;',
                                                                layout: {
                                                                    type: 'vbox',
                                                                    pack: 'center'
                                                                },
                                                                items: [
                                                                    {
                                                                        xtype: 'label',
                                                                        cls: 'x-rm-rdtipslabel',
                                                                        html: 'DO\'S & DONT\'S',
                                                                        itemId: 'inhouseProfileSideDosDontLabel'
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'list',
                                                                action: 'setScrollBarVisible',
                                                                cls: [
                                                                    'x-rm-list',
                                                                    'x-rm-tipslist'
                                                                ],
                                                                height: '20%',
                                                                hidden: true,
                                                                itemId: 'inhouseProfileSideDosDontList',
                                                                margin: '2%',
                                                                itemTpl: [
                                                                    '<ul class="x-rm-tipslist-tpl">',
                                                                    '    <li style = "list-style-position: inside;list-style-type: disc;">',
                                                                    '        <input type="text" class="x-rm-rdinlinecmt" data-id="{id}" value="{notification}"',
                                                                    '          onchange="RMdatalink.app.getController(\'inhouse.DetailScreenController\').saveDoDonts(this);"/>',
                                                                    '    </li>',
                                                                    '</ul>'
                                                                ],
                                                                store: 'inhouseDoDontsStore',
                                                                itemHeight: 20
                                                            },
                                                            {
                                                                xtype: 'container',
                                                                hidden: true,
                                                                minHeight: '4%',
                                                                style: 'background-color:#3D3E3D;',
                                                                layout: {
                                                                    type: 'vbox',
                                                                    pack: 'center'
                                                                },
                                                                items: [
                                                                    {
                                                                        xtype: 'label',
                                                                        cls: 'x-rm-rdtipslabel',
                                                                        html: 'FOLLOW UP\'S',
                                                                        itemId: 'inhouseProfileSideFollowUpsLabel'
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'list',
                                                                action: 'setScrollBarVisible',
                                                                cls: [
                                                                    'x-rm-list',
                                                                    'x-rm-tipslist'
                                                                ],
                                                                height: '15%',
                                                                hidden: true,
                                                                itemId: 'inhouseProfileSideFollowUpsLists',
                                                                margin: '2%',
                                                                itemTpl: [
                                                                    '<ul class="x-rm-tipslist-tpl">',
                                                                    '    <li style = "list-style-position: inside;list-style-type: disc;">',
                                                                    '        <input type="text" class="x-rm-rdinlinecmt" data-id="{id}" value="{notification}" ',
                                                                    '          onchange="RMdatalink.app.getController(\'inhouse.DetailScreenController\').saveFollowUps(this);"/>',
                                                                    '    </li>',
                                                                    '</ul>'
                                                                ],
                                                                store: 'inhousefollowUpsStore',
                                                                itemHeight: 20
                                                            },
                                                            {
                                                                xtype: 'container',
                                                                cls: [
                                                                    'x-rm-rdnotes-sticky',
                                                                    'x-rm-rdbluenotessticky'
                                                                ],
                                                                height: '25%',
                                                                layout: 'vbox',
                                                                items: [
                                                                    {
                                                                        xtype: 'container',
                                                                        height: '15%',
                                                                        style: 'background-color:#3D3E3D;',
                                                                        layout: {
                                                                            type: 'vbox',
                                                                            pack: 'center'
                                                                        },
                                                                        items: [
                                                                            {
                                                                                xtype: 'label',
                                                                                cls: 'x-rm-rdtipslabel',
                                                                                html: 'BLUE NOTES',
                                                                                itemId: 'inhouseProfileSideBlueStickyLabel'
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        xtype: 'formpanel',
                                                                        flex: 1,
                                                                        cls: 'x-rm-rdformpanel',
                                                                        itemId: 'inhouseProfileSideBlueSticky',
                                                                        margin: '2%',
                                                                        scrollable: false,
                                                                        layout: {
                                                                            type: 'vbox',
                                                                            align: 'center'
                                                                        },
                                                                        items: [
                                                                            {
                                                                                xtype: 'textareafield',
                                                                                itemId: 'inhouseProfileSideBlueStickyTextArea',
                                                                                clearIcon: false,
                                                                                placeHolder: 'Add any extremely important reminders here...'
                                                                            }
                                                                        ]
                                                                    }
                                                                ]
                                                            }
                                                        ],
                                                        listeners: [
                                                            {
                                                                fn: function(component, eOpts) {



                                                                    var headers = component.down("#inHouseCustomersListHeader");
                                                                    headers.setData([{}]);
                                                                    headers.setItemTpl(
                                                                    Ext.create('Ext.XTemplate',
                                                                    '<div class="x-rm-listtpl-main">',
                                                                    '    <div style="width: 20%;"></div>',
                                                                    '    <div style="width: 45%;" data-name="customer_name">',
                                                                    '        Name&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                                    '    </div>',
                                                                    '    <div style="width: 30%;" data-name="customer_type">',
                                                                    '       Type&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                                    '    </div>',
                                                                    '</div>'
                                                                    )
                                                                    );
                                                                    headers.refresh();

                                                                    var list = component.down('#inHouseCustomersList');
                                                                    list.setStore('inhouse.CustomersStore');
                                                                    list.setItemTpl(
                                                                    Ext.create('Ext.XTemplate',
                                                                    '<div class="x-rm-listtpl-main pointerCursor">',
                                                                    '    <div style="width: 20%;"></div>',
                                                                    '    <div style="width: 45%;">{customer_name}</div>',
                                                                    '    <div style="width: 30%;">{customer_type}</div>',
                                                                    '</div>'
                                                                    )
                                                                    );
                                                                    list.setMode("SINGLE");
                                                                    list.on("select",function(customerlist, record, eOpts){
                                                                        RMdatalink.app.getController('inhouse.DetailScreenController').onInhouseCustomerSelect(customerlist, record, eOpts);
                                                                    });

                                                                    list.addCls('delMark-list') ;

                                                                },
                                                                event: 'initialize'
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'container',
                                                title: 'RELATIONSHIP DETAILS',
                                                height: '100%',
                                                itemId: 'inhouseProfileSideRelDetailsTab',
                                                width: '100%',
                                                items: [
                                                    {
                                                        xtype: 'formpanel',
                                                        action: 'setScrollBarVisible',
                                                        cls: [
                                                            'x-rm-rdformpanel',
                                                            'x-rm-rdmanagerform'
                                                        ],
                                                        height: '90%',
                                                        itemId: 'inhouseProfileSideRelationDetailsForm',
                                                        margin: '2%',
                                                        width: '100%',
                                                        scrollable: true,
                                                        items: [
                                                            {
                                                                xtype: 'textfield',
                                                                actionChange: 'textChange',
                                                                itemId: 'inhouseProfileSideMRDYrsAtStore',
                                                                label: 'Years employed',
                                                                labelWidth: '102px'
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                itemId: 'inhouseProfileSideUserPartner1',
                                                                label: ' Spouse/Partner',
                                                                labelWidth: '100px'
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                hidden: true,
                                                                itemId: 'inhouseProfileSideUserPartner2',
                                                                label: ' Spouse/Partner',
                                                                labelWidth: '100px',
                                                                maxLength: 20
                                                            },
                                                            {
                                                                xtype: 'fieldset',
                                                                layout: 'hbox',
                                                                items: [
                                                                    {
                                                                        xtype: 'textfield',
                                                                        actionChange: 'textChange',
                                                                        itemId: 'inhouseProfileSideUserDOBMonth',
                                                                        width: '100%',
                                                                        label: 'DOB',
                                                                        labelWidth: '100px'
                                                                    },
                                                                    {
                                                                        xtype: 'textfield',
                                                                        actionChange: 'textChange',
                                                                        hidden: true,
                                                                        itemId: 'inhouseProfileSideUserDOBDay',
                                                                        margin: '0 1%',
                                                                        width: '15%',
                                                                        maxLength: 2
                                                                    },
                                                                    {
                                                                        xtype: 'textfield',
                                                                        actionChange: 'textChange',
                                                                        hidden: true,
                                                                        itemId: 'inhouseProfileSideUserDOBYear',
                                                                        width: '15%',
                                                                        maxLength: 4
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'panel',
                                                                height: '130px',
                                                                margin: '0 0 10px 0',
                                                                style: 'border: 1px solid #2EC1DA ;',
                                                                layout: {
                                                                    type: 'hbox',
                                                                    align: 'center'
                                                                },
                                                                items: [
                                                                    {
                                                                        xtype: 'fieldset',
                                                                        baseCls: 'x-form-fieldset normalTitle',
                                                                        width: '90%',
                                                                        title: '<center style = "color: #2EC1DA;"> Emergency Contacts <center>',
                                                                        items: [
                                                                            {
                                                                                xtype: 'textfield',
                                                                                itemId: 'inhouseEmergencyNameFld',
                                                                                margin: '5px 0px 5px 0px',
                                                                                inputCls: 'fontNormalForDiscount',
                                                                                label: 'Name',
                                                                                labelCls: 'discountFieldsetLabel',
                                                                                labelWidth: '100px'
                                                                            },
                                                                            {
                                                                                xtype: 'textfield',
                                                                                action: 'clearIconTap',
                                                                                actionChange: 'textChange',
                                                                                itemId: 'inhouseEmergencyPhoneFld',
                                                                                margin: '5px 0px 5px 0px',
                                                                                inputCls: 'fontNormalForDiscount',
                                                                                label: 'Phone',
                                                                                labelCls: ' discountFieldsetLabel',
                                                                                labelWidth: '100px'
                                                                            },
                                                                            {
                                                                                xtype: 'emailfield',
                                                                                action: 'clearIconTap',
                                                                                itemId: 'inhouseEmergencyEmailFld',
                                                                                margin: '5px 0px 5px 0px',
                                                                                inputCls: 'fontNormalForDiscount',
                                                                                label: 'Email',
                                                                                labelCls: 'discountFieldsetLabel',
                                                                                labelWidth: '100px',
                                                                                placeHolder: 'email@example.com'
                                                                            }
                                                                        ]
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                hidden: true,
                                                                itemId: 'inhouseProfileSideUserWife',
                                                                label: 'Wife',
                                                                labelWidth: '100px',
                                                                maxLength: 20
                                                            },
                                                            {
                                                                xtype: 'fieldset',
                                                                hidden: true,
                                                                itemId: 'inhouseProfileSideUserAniversary',
                                                                layout: 'hbox',
                                                                items: [
                                                                    {
                                                                        xtype: 'textfield',
                                                                        actionChange: 'textChange',
                                                                        itemId: 'inhouseProfileSideUserAniversaryMonth',
                                                                        width: '68%',
                                                                        label: 'Aniversary',
                                                                        labelWidth: '100px',
                                                                        maxLength: 4
                                                                    },
                                                                    {
                                                                        xtype: 'textfield',
                                                                        actionChange: 'textChange',
                                                                        itemId: 'inhouseProfileSideUserAniversaryDay',
                                                                        margin: '0 1%',
                                                                        width: '15%',
                                                                        maxLength: 2
                                                                    },
                                                                    {
                                                                        xtype: 'textfield',
                                                                        actionChange: 'textChange',
                                                                        itemId: 'RDMRDAniversaryYear',
                                                                        width: '15%',
                                                                        maxLength: 2
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                hidden: true,
                                                                itemId: 'inhouseProfileSideUserRelatives',
                                                                label: 'Relatives',
                                                                labelWidth: '100px',
                                                                maxLength: 40
                                                            },
                                                            {
                                                                xtype: 'fieldset',
                                                                itemId: 'RDMRDChild1',
                                                                layout: 'hbox',
                                                                items: [
                                                                    {
                                                                        xtype: 'textfield',
                                                                        itemId: 'inhouseProfileSideUserChild1Name',
                                                                        width: '100%',
                                                                        label: 'Children',
                                                                        labelWidth: '100px'
                                                                    },
                                                                    {
                                                                        xtype: 'textfield',
                                                                        actionChange: 'textChange',
                                                                        hidden: true,
                                                                        itemId: 'inhouseProfileSideUserChild1Age',
                                                                        width: '30%',
                                                                        label: 'Age',
                                                                        labelWidth: '60%',
                                                                        maxLength: 2
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'fieldset',
                                                                hidden: true,
                                                                layout: 'hbox',
                                                                items: [
                                                                    {
                                                                        xtype: 'textfield',
                                                                        itemId: 'inhouseProfileSideUserChild2Name',
                                                                        width: '70%',
                                                                        label: 'Child',
                                                                        labelWidth: '100px',
                                                                        maxLength: 20
                                                                    },
                                                                    {
                                                                        xtype: 'textfield',
                                                                        actionChange: 'textChange',
                                                                        itemId: 'inhouseProfileSideUserChild2Age',
                                                                        width: '30%',
                                                                        label: 'Age',
                                                                        labelWidth: '60%',
                                                                        maxLength: 2
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'fieldset',
                                                                hidden: true,
                                                                layout: 'hbox',
                                                                items: [
                                                                    {
                                                                        xtype: 'textfield',
                                                                        itemId: 'inhouseProfileSideUserChild3Name',
                                                                        width: '70%',
                                                                        label: 'Child',
                                                                        labelWidth: '100px',
                                                                        maxLength: 20
                                                                    },
                                                                    {
                                                                        xtype: 'textfield',
                                                                        actionChange: 'textChange',
                                                                        hidden: false,
                                                                        itemId: 'inhouseProfileSideUserChild3Age',
                                                                        width: '30%',
                                                                        label: 'Age',
                                                                        labelWidth: '60%',
                                                                        maxLength: 2
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                itemId: 'inhouseProfileSideUserHobbies',
                                                                label: 'Hobbies',
                                                                labelWidth: '100px'
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                hidden: true,
                                                                itemId: 'inhouseProfileSideUserCarOfChoice',
                                                                label: 'Car of Choice',
                                                                labelWidth: '100px',
                                                                maxLength: 30
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                action: 'clearIconTap',
                                                                actionChange: 'textChange',
                                                                itemId: 'inhouseProfileSideUserAltPhone',
                                                                label: 'Alt Phone',
                                                                labelWidth: '100px'
                                                            },
                                                            {
                                                                xtype: 'emailfield',
                                                                action: 'clearIconTap',
                                                                itemId: 'inhouseProfileSideUserAltEmail',
                                                                label: 'Alt Email',
                                                                labelWidth: '100px',
                                                                placeHolder: 'email@example.com'
                                                            },
                                                            {
                                                                xtype: 'urlfield',
                                                                action: 'clearIconTap',
                                                                hidden: true,
                                                                itemId: 'inhouseProfileSideUserWebsite',
                                                                label: 'Website',
                                                                labelWidth: '100px',
                                                                maxLength: 30,
                                                                placeHolder: 'http://example.com'
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'button',
                                                        handler: function(button, e) {
                                                            if(Ext.getCmp("addNewField"))
                                                            {
                                                                Ext.getCmp("addNewField").destroy();
                                                            }


                                                            var popup = Ext.widget('addNewField');

                                                            popup.showBy(button);
                                                        },
                                                        cls: 'x-rm-blueBtn',
                                                        margin: '5 5 5 5',
                                                        text: 'Add New Fields'
                                                    }
                                                ]
                                            }
                                        ],
                                        tabBar: {
                                            docked: 'top'
                                        }
                                    }
                                ]
                            },
                            {
                                xtype: 'container',
                                hidden: true,
                                itemId: 'inhouseSideForNotesSideContainer',
                                layout: 'fit',
                                items: [
                                    {
                                        xtype: 'tabpanel',
                                        cls: [
                                            'x-rm-tabpanel',
                                            'x-rm-tabpanelWidth33'
                                        ],
                                        itemId: 'RDCRMNotesSideTabPanel',
                                        ui: 'light',
                                        items: [
                                            {
                                                xtype: 'container',
                                                title: 'TIPS',
                                                layout: 'fit',
                                                items: [
                                                    {
                                                        xtype: 'container',
                                                        margin: '4%',
                                                        layout: 'vbox',
                                                        items: [
                                                            {
                                                                xtype: 'container',
                                                                minHeight: '4%',
                                                                style: 'background-color:#2EC1DA;',
                                                                layout: {
                                                                    type: 'vbox',
                                                                    pack: 'center'
                                                                },
                                                                items: [
                                                                    {
                                                                        xtype: 'label',
                                                                        cls: 'x-rm-rdtipslabel',
                                                                        html: 'WHAT\'S NEW',
                                                                        itemId: 'inhouseProfileNotesWhatsNewLabel'
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'list',
                                                                action: 'setScrollBarVisible',
                                                                cls: [
                                                                    'x-rm-list',
                                                                    'x-rm-tipslist'
                                                                ],
                                                                height: '20%',
                                                                itemId: 'inhouseProfileNotesWhatsNewList',
                                                                margin: '2%',
                                                                itemTpl: [
                                                                    '<ul class="x-rm-tipslist-tpl">',
                                                                    '    <li style = "list-style-position: inside;list-style-type: disc;">{notification}</li>',
                                                                    '</ul>'
                                                                ],
                                                                store: 'notificationsNew',
                                                                itemHeight: 20
                                                            },
                                                            {
                                                                xtype: 'container',
                                                                minHeight: '4%',
                                                                style: 'background-color:#3D3E3D;',
                                                                layout: {
                                                                    type: 'vbox',
                                                                    pack: 'center'
                                                                },
                                                                items: [
                                                                    {
                                                                        xtype: 'label',
                                                                        cls: 'x-rm-rdtipslabel',
                                                                        html: 'DO\'S & DONT\'S',
                                                                        itemId: 'inhouseProfileNotesNotesDosDontLabel'
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'list',
                                                                action: 'setScrollBarVisible',
                                                                cls: [
                                                                    'x-rm-list',
                                                                    'x-rm-tipslist'
                                                                ],
                                                                height: '20%',
                                                                itemId: 'inhouseProfileNotesNotesDosDontList',
                                                                margin: '2%',
                                                                itemTpl: [
                                                                    '<ul class="x-rm-tipslist-tpl">',
                                                                    '    <li style = "list-style-position: inside;list-style-type: disc;">',
                                                                    '        <input type="text" class="x-rm-rdinlinecmt" data-id="{id}" value="{notification}" maxlength="42"',
                                                                    '          onchange="RMdatalink.app.getController(\'inhouse.DetailScreenController\').saveDoDonts(this);"/>',
                                                                    '    </li>',
                                                                    '</ul>'
                                                                ],
                                                                store: 'inhouseDoDontsStore',
                                                                itemHeight: 20
                                                            },
                                                            {
                                                                xtype: 'container',
                                                                minHeight: '4%',
                                                                style: 'background-color:#3D3E3D;',
                                                                layout: {
                                                                    type: 'vbox',
                                                                    pack: 'center'
                                                                },
                                                                items: [
                                                                    {
                                                                        xtype: 'label',
                                                                        cls: 'x-rm-rdtipslabel',
                                                                        html: 'FOLLOW UP\'S',
                                                                        itemId: 'inhouseProfileNotesNotesFollowUpsLabel'
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'list',
                                                                action: 'setScrollBarVisible',
                                                                cls: [
                                                                    'x-rm-list',
                                                                    'x-rm-tipslist'
                                                                ],
                                                                height: '15%',
                                                                itemId: 'inhouseProfileNotesNotesFollowUpsLists',
                                                                margin: '2%',
                                                                itemTpl: [
                                                                    '<ul class="x-rm-tipslist-tpl">',
                                                                    '    <li style = "list-style-position: inside;list-style-type: disc;">',
                                                                    '        <input type="text" class="x-rm-rdinlinecmt" data-id="{id}" value="{notification}" maxlength="42"',
                                                                    '          onchange="RMdatalink.app.getController(\'inhouse.DetailScreenController\').saveFollowUps(this);"/>',
                                                                    '    </li>',
                                                                    '</ul>'
                                                                ],
                                                                store: 'inhousefollowUpsStore',
                                                                itemHeight: 20
                                                            },
                                                            {
                                                                xtype: 'container',
                                                                cls: [
                                                                    'x-rm-rdnotes-sticky',
                                                                    'x-rm-rdbluenotessticky'
                                                                ],
                                                                height: '25%',
                                                                style: 'background-color:#D9F1F7;',
                                                                layout: 'vbox',
                                                                items: [
                                                                    {
                                                                        xtype: 'container',
                                                                        height: '15%',
                                                                        style: 'background-color:#3D3E3D;',
                                                                        layout: {
                                                                            type: 'vbox',
                                                                            pack: 'center'
                                                                        },
                                                                        items: [
                                                                            {
                                                                                xtype: 'label',
                                                                                cls: 'x-rm-rdtipslabel',
                                                                                html: 'BLUE NOTES',
                                                                                itemId: 'inhouseProfileNotesNotesBlueStickyLabel'
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        xtype: 'formpanel',
                                                                        flex: 1,
                                                                        cls: 'x-rm-rdformpanel',
                                                                        itemId: 'inhouseProfileNotesBlueSticky1',
                                                                        margin: '2%',
                                                                        scrollable: false,
                                                                        layout: {
                                                                            type: 'vbox',
                                                                            align: 'center'
                                                                        },
                                                                        items: [
                                                                            {
                                                                                xtype: 'textareafield',
                                                                                itemId: 'inhouseProfileNotesBlueStickyTextArea',
                                                                                clearIcon: false,
                                                                                placeHolder: 'Add any extremely important reminders here...'
                                                                            }
                                                                        ]
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'container',
                                                title: 'PHOTOS',
                                                layout: {
                                                    type: 'vbox',
                                                    align: 'center'
                                                },
                                                items: [
                                                    {
                                                        xtype: 'dataview',
                                                        action: 'setScrollBarVisible',
                                                        cls: 'x-rm-rdphotosview',
                                                        height: '85%',
                                                        itemId: 'inhouseProfileNotesPhotosView',
                                                        margin: '5% 0',
                                                        width: '80%',
                                                        deferEmptyText: false,
                                                        emptyText: '<p class="x-rm-emptytext">No Photos</p>',
                                                        itemTpl: [
                                                            '<img class="x-rm-rdphoto" src="{image}" data-imagename="{imagename}"/>'
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'container',
                                                        height: '5%',
                                                        width: '90%',
                                                        layout: {
                                                            type: 'hbox',
                                                            align: 'center',
                                                            pack: 'end'
                                                        },
                                                        items: [
                                                            {
                                                                xtype: 'button',
                                                                cls: [
                                                                    'x-rm-rdclosebtns',
                                                                    'x-rm-smalliconbtns'
                                                                ],
                                                                height: '25px',
                                                                itemId: 'inhouseProfileNotesPhotosDeleteBtn',
                                                                margin: '0 2%',
                                                                ui: 'plain',
                                                                width: '25px',
                                                                icon: 'resources//images//retailerDetail//delete_btn.png'
                                                            },
                                                            {
                                                                xtype: 'button',
                                                                cls: [
                                                                    'x-rm-rdopenbtns',
                                                                    'x-rm-smalliconbtns'
                                                                ],
                                                                height: '25px',
                                                                itemId: 'inhouseProfileNotesPhotosAddBtn',
                                                                ui: 'plain',
                                                                width: '25px',
                                                                icon: 'resources//images//retailerDetail//add_image.png'
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'container',
                                                title: 'ATTACHMENTS',
                                                layout: {
                                                    type: 'vbox',
                                                    align: 'center'
                                                },
                                                items: [
                                                    {
                                                        xtype: 'list',
                                                        action: 'setScrollBarVisible',
                                                        cls: [
                                                            'x-rm-list',
                                                            'x-rm-rdattachmentslist'
                                                        ],
                                                        height: '35%',
                                                        itemId: 'inhouseProfileNotesAttList',
                                                        margin: '5% 0',
                                                        width: '90%',
                                                        deferEmptyText: false,
                                                        emptyText: '<p class="x-rm-emptytext">No attachments</p>',
                                                        itemTpl: [
                                                            '<div class="x-rm-listtpl-main">',
                                                            '    <div style="width:5%; height:100%">',
                                                            '        <div style="width:100%; height:100%; background-image:url(\'resources/images/retailerDetail/attachment.png\')"></div>',
                                                            '    </div>',
                                                            '    <div style="margin-left:5%;width:90%">{filename}</div>',
                                                            '</div>'
                                                        ],
                                                        store: 'inhouseDetailsNotesAttachments',
                                                        itemHeight: 22
                                                    },
                                                    {
                                                        xtype: 'container',
                                                        height: '35%',
                                                        margin: '5% 0',
                                                        width: '90%',
                                                        items: [
                                                            {
                                                                xtype: 'dataview',
                                                                cls: 'x-rm-rdattach-header',
                                                                data: [
                                                                    {
                                                                        
                                                                    }
                                                                ],
                                                                height: '10%',
                                                                itemId: 'inhouseProfileNotesAttRetailerHeader',
                                                                scrollable: false,
                                                                itemTpl: [
                                                                    '<div class="x-rm-listtpl-main">',
                                                                    '    <div style="width:75%">ATTACHMENTS SENT TO RETAILER</div>',
                                                                    '    <div style="width:25%">DATE</div>',
                                                                    '</div>'
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'list',
                                                                action: 'setScrollBarVisible',
                                                                cls: [
                                                                    'x-rm-list',
                                                                    'x-rm-rdattachmentslist'
                                                                ],
                                                                height: '90%',
                                                                itemId: 'inhouseProfileNotesAttRetailerList',
                                                                width: '100%',
                                                                deferEmptyText: false,
                                                                emptyText: '<p class="x-rm-emptytext">No attachments sent</p>',
                                                                itemTpl: [
                                                                    '<div class="x-rm-listtpl-main">',
                                                                    '    <div style="width:5%; height:100%">',
                                                                    '        <div style="width:100%; height:100%; background-image:url(\'resources/images/retailerDetail/attachment.png\')"></div>',
                                                                    '    </div>',
                                                                    '    <div style="margin-left:5%;width:65%">{filename}</div>',
                                                                    '    <div style="width:25%">{date}</div>',
                                                                    '</div>'
                                                                ],
                                                                store: 'inhouseDetailsNotesAttachments',
                                                                itemHeight: 22
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'container',
                                                        height: '5%',
                                                        margin: '10% 0 0 0',
                                                        width: '90%',
                                                        layout: {
                                                            type: 'hbox',
                                                            align: 'center',
                                                            pack: 'end'
                                                        },
                                                        items: [
                                                            {
                                                                xtype: 'button',
                                                                cls: [
                                                                    'x-rm-rdclosebtns',
                                                                    'x-rm-smalliconbtns'
                                                                ],
                                                                height: '25px',
                                                                itemId: 'inhouseProfileNotesAttDeleteBtn',
                                                                margin: '0 2%',
                                                                ui: 'plain',
                                                                width: '25px',
                                                                icon: 'resources//images//retailerDetail//delete_btn.png'
                                                            },
                                                            {
                                                                xtype: 'button',
                                                                cls: [
                                                                    'x-rm-rdopenbtns',
                                                                    'x-rm-smalliconbtns'
                                                                ],
                                                                height: '25px',
                                                                itemId: 'inhouseProfileNotesAttAddBtn',
                                                                ui: 'plain',
                                                                width: '25px',
                                                                icon: 'resources//images//retailerDetail//attachment.png'
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ],
                                        tabBar: {
                                            docked: 'top'
                                        }
                                    }
                                ]
                            },
                            {
                                xtype: 'container',
                                hidden: true,
                                itemId: 'inhouseDtlCommStructureSdCont',
                                layout: 'fit',
                                items: [
                                    {
                                        xtype: 'tabpanel',
                                        cls: [
                                            'x-rm-tabpanel',
                                            'x-rm-tabpanelWidth50'
                                        ],
                                        height: '100%',
                                        ui: 'light',
                                        width: '100%',
                                        items: [
                                            {
                                                xtype: 'container',
                                                title: 'COMMISSION STRUCTURE		',
                                                layout: 'vbox',
                                                items: [
                                                    {
                                                        xtype: 'label',
                                                        html: '<center>Monthly<center>',
                                                        style: 'background-color:#2EC1DA; color: #fff;',
                                                        width: '150px'
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        flex: 2,
                                                        itemId: 'inhouseDtlCommStruMontlyPanel',
                                                        layout: 'fit',
                                                        items: [
                                                            {
                                                                xtype: 'listwithheader'
                                                            }
                                                        ],
                                                        listeners: [
                                                            {
                                                                fn: function(component, eOpts) {

                                                                    var headers = component.down("#headerList");
                                                                    headers.setData([{}]);
                                                                    headers.setItemTpl(
                                                                    Ext.create('Ext.XTemplate',
                                                                    '<div class="x-rm-listtpl-main">',
                                                                    '    <div style="width: 30%;text-align: right;padding-right: 8%;" data-name="from">',
                                                                    '        From&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                                    '    </div>',
                                                                    '    <div style="width: 30%;text-align: right;padding-right: 8%;" data-name="to">',
                                                                    '        To&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                                    '    </div>',
                                                                    '    <div style="width: 30%;text-align: right;padding-right: 8%;" data-name="percentage">',
                                                                    '        Percentage&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                                    '    </div>',
                                                                    '</div>'
                                                                    )
                                                                    );
                                                                    headers.refresh();

                                                                    var list = component.down('#mainList');
                                                                    //list.setStore('retailersDetailsNotes');
                                                                    list.setDeferEmptyText(false);
                                                                    list.setEmptyText('<p class="x-rm-emptytext">No Data available</p>');
                                                                    list.setItemHeight('22');
                                                                    list.addCls('x-rm-rdvendorslist');
                                                                    list.setItemTpl(
                                                                    Ext.create('Ext.XTemplate',
                                                                    '<div class="x-rm-listtpl-main">',
                                                                    '    <div style="width: 30%;text-align: right;padding-right: 8%;">${from}</div>',
                                                                    '    <div style="width: 30%;text-align: right;padding-right: 8%;">${to}</div>',
                                                                    '    <div style="width: 30%;text-align: right;padding-right: 8%;">{percentage}%</div>',


                                                                    '</div>'
                                                                    )
                                                                    );


                                                                    //'    <div style="width: 30%;text-align: right;padding-right: 8%;">{percentage}%</div>',

                                                                    /*

                                                                    '    <input type="text" style="width: 30% !important;text-align:right;" class="x-rm-rdinlinecmt" data-id="{id}" value="{percentage}" maxlength="24"',
                                                                    '        onchange="RMdatalink.app.getController(\'inhouse.DetailScreenController\').onMontlyCommTxtFldLostFocus(this,\'percentage\');"/><div style="margin-top: 2px;">%</div>',

                                                                    inhouse.DetailScreenController
                                                                    onMontlyCommTxtFldLostFocus
                                                                    onYearlyCommTxtFldLostFocus
                                                                    */
                                                                },
                                                                event: 'initialize'
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'label',
                                                        html: '<center>Yearly<center>',
                                                        style: 'background-color:#2EC1DA; color: #fff;',
                                                        width: '150px'
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        flex: 2,
                                                        itemId: 'inhouseDtlCommStruYearlyPanel',
                                                        layout: 'fit',
                                                        items: [
                                                            {
                                                                xtype: 'listwithheader'
                                                            }
                                                        ],
                                                        listeners: [
                                                            {
                                                                fn: function(component, eOpts) {

                                                                    var headers = component.down("#headerList");
                                                                    headers.setData([{}]);
                                                                    headers.setItemTpl(
                                                                    Ext.create('Ext.XTemplate',
                                                                    '<div class="x-rm-listtpl-main">',
                                                                    '    <div style="width: 60%;" data-name="yearly_subscription_contract">',
                                                                    '        Year of Subscriber Contract &nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                                    '    </div>',
                                                                    '    <div style="width: 30%;text-align: right;padding-right: 8%;" data-name="percentage">',
                                                                    '        Percentage&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                                    '    </div>',
                                                                    '</div>'
                                                                    )
                                                                    );
                                                                    headers.refresh();

                                                                    var list = component.down('#mainList');
                                                                    //list.setStore('retailersDetailsNotes');
                                                                    list.setDeferEmptyText(false);
                                                                    list.setEmptyText('<p class="x-rm-emptytext">No Data available</p>');
                                                                    list.setItemHeight('22');
                                                                    list.addCls('x-rm-rdvendorslist');
                                                                    list.setItemTpl(
                                                                    Ext.create('Ext.XTemplate',
                                                                    '<div class="x-rm-listtpl-main">',
                                                                    '    <div style="width: 60%;text-align: center;">{yearly_subscription_contract}</div>',
                                                                    '    <div style="width: 30%;text-align: right;padding-right: 8%;">{percentage}%</div>',
                                                                    '</div>'
                                                                    )
                                                                    );
                                                                },
                                                                event: 'initialize'
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ],
                                        tabBar: {
                                            docked: 'top'
                                        }
                                    }
                                ]
                            }
                        ]
                    }
                ],
                listeners: [
                    {
                        fn: function(element, eOpts) {
                            //inhouseUserPermissionsTtlBar
                            try{
                                if(RMdatalink.app.getController('LoginHandler').config.userDetails.userRole == "Super Admin"){
                                    Ext.ComponentQuery.query('#inhouseUserPermissionsTtlBar')[0].setHidden(false) ;
                                    Ext.ComponentQuery.query('#inhouseUserProfileDirectPermissionFld')[0].setHidden(false) ;

                                }
                                else{

                                    Ext.ComponentQuery.query('#inhouseUserPermissionsTtlBar')[0].setHidden(true) ;
                                    Ext.ComponentQuery.query('#inhouseUserProfileDirectPermissionFld')[0].setHidden(true) ;
                                }
                            }catch(ex){

                                console.error(ex) ;
                            }


                        },
                        event: 'painted'
                    }
                ]
            }
        ],
        listeners: [
            {
                fn: 'onInhouseProfileAddPhotoImageHide',
                event: 'hide',
                delegate: '#inhouseProfileAddPhotoImage'
            },
            {
                fn: 'onInhouseProfileAddPhotoHide',
                event: 'hide',
                delegate: '#inhouseProfileAddPhoto'
            },
            {
                fn: 'onRDManagerStoreEditBtnTap',
                event: 'tap',
                delegate: '#inhouseProfileStoreEditBtn'
            },
            {
                fn: 'onRDManagerStoreEditBtnTap11',
                event: 'tap',
                delegate: '#inhouseProfileRegeneratePwdBtn'
            },
            {
                fn: 'onNotesListDeselect',
                event: 'deselect',
                delegate: '#RDNotesListItemID #mainList'
            },
            {
                fn: 'onNotesListSelect',
                event: 'select',
                delegate: '#RDNotesListItemID #mainList'
            },
            {
                fn: 'onRDNotesDelBtnTap',
                event: 'tap',
                delegate: '#inhouseNotesDelBtn'
            },
            {
                fn: 'onRDNotesAddBtnTap',
                event: 'tap',
                delegate: '#inhouseNotesAddBtn'
            },
            {
                fn: 'onRDNotepadNoteBlur',
                event: 'blur',
                delegate: '#inhouseNotepadNote'
            },
            {
                fn: 'onRDNotepadAdminBtnTap',
                event: 'tap',
                delegate: '#inhouseNotepadAdminBtn'
            },
            {
                fn: 'onRDTabPanelActiveItemChange',
                event: 'activeitemchange',
                delegate: '#inhouseDetailsMainTabPanel'
            },
            {
                fn: 'onRDManagerBlueStickyTextAreaBlur',
                event: 'blur',
                delegate: '#inhouseProfileSideBlueStickyTextArea'
            },
            {
                fn: 'onRDCRMNotesBlueStickyTextAreaBlur',
                event: 'blur',
                delegate: '#inhouseProfileNotesBlueStickyTextArea'
            },
            {
                fn: 'onRDCRMNotesPhotosViewItemTap',
                event: 'itemtap',
                delegate: '#inhouseProfileNotesPhotosView'
            },
            {
                fn: 'onRDCRMNotesPhotosDeleteBtnTap',
                event: 'tap',
                delegate: '#inhouseProfileNotesPhotosDeleteBtn'
            },
            {
                fn: 'onRDCRMNotesPhotosAddBtnTap',
                event: 'tap',
                delegate: '#inhouseProfileNotesPhotosAddBtn'
            },
            {
                fn: 'onRDCRMNotesAttDeleteBtnTap',
                event: 'tap',
                delegate: '#inhouseProfileNotesAttDeleteBtn'
            },
            {
                fn: 'onRDCRMNotesAttAddBtnTap',
                event: 'tap',
                delegate: '#inhouseProfileNotesAttAddBtn'
            },
            {
                fn: 'onContainerInitialize',
                event: 'initialize'
            }
        ]
    },

    onInhouseProfileAddPhotoImageHide: function(component, eOpts) {
        component.setHidden(false);
        component.setDisabled(false);

        // var fileFieldItemId = component.getItemId().substring(0,(component.getItemId().length - 5 ));

        // var fileField = Ext.ComponentQuery.query('#'+fileFieldItemId)[0] ;


        // fileField.removeCls('x-rm-rdNophoto');
        // fileField.setCls('x-rm-rdaddphoto');
        //component.setSrc('resources/images/retailerDetail/add_photo.png');
    },

    onInhouseProfileAddPhotoHide: function(component, eOpts) {
        component.setHidden(false);
        component.setDisabled(false);

        // component.removeCls('x-rm-rdaddphoto');
        // component.setCls('x-rm-rdNophoto');

        //component.getParent.down('image').setSrc('resources/images/logos/default_User.jpg');
    },

    onRDManagerStoreEditBtnTap: function(button, e, eOpts) {
            var mangerForm = Ext.ComponentQuery.query('#inhouseUserProfileFormPanel')[0];
            mangerForm.setDisabled(false) ;
            Ext.ComponentQuery.query('#inhouseProfileSideRelationDetailsForm')[0].setDisabled(false);
    },

    onRDManagerStoreEditBtnTap11: function(button, e, eOpts) {
        console.log("SEND PASSWORD TO THE USER ");

        var controller = RMdatalink.app.getController('inhouse.DetailScreenController');

        controller.sendPasswordToUser();

    },

    onNotesListDeselect: function(dataview, record, supressed, eOpts) {

        var notesTab = dataview.up("#inhouseNotesTab");
        var note = notesTab.down("#inhouseNotepadNote");
        var adminBtn = notesTab.down("#inhouseNotepadAdminBtn");
        var byLabel = notesTab.down("#inhouseNotesNameLabel");


        note.setValue('');
        byLabel.setHtml("by Me on "+Ext.Date.format(new Date(), 'Y/m/d'));
        adminBtn.selected = false;
        adminBtn.setCls('');
        adminBtn.addCls('x-rm-rdnotesadminbtn-unselected');
        adminBtn.setText('<div  style=" line-height: 8px;background-size: 8px 8px; background-image: url(\'resources/images/retailerDetail/dot2.png\');background-repeat: no-repeat;/">&nbsp &nbsp <span> Admin Only </span></div>');
    },

    onNotesListSelect: function(dataview, record, eOpts) {
        var notesTab = dataview.up("#inhouseNotesTab");
        var note = notesTab.down("#inhouseNotepadNote");
        var adminBtn = notesTab.down("#inhouseNotepadAdminBtn");
        var byLabel = notesTab.down("#inhouseNotesNameLabel");

        note.setValue(record.data.subject);
        byLabel.setHtml("by "+record.data.crmuser+" on "+record.data.date);
        if(record.data.adminonly) {
            adminBtn.selected = true;
            adminBtn.setCls('');
            adminBtn.addCls('x-rm-rdnotesadminbtn-selected');
            adminBtn.setText('<div  style=" line-height: 8px;background-size: 8px 8px; background-image: url(\'resources/images/retailerDetail/dot1.png\');background-repeat: no-repeat;/">&nbsp &nbsp <span> Admin Only </span></div>');
        }
        else {
            adminBtn.selected = false;
            adminBtn.setCls('');
            adminBtn.addCls('x-rm-rdnotesadminbtn-unselected');
            adminBtn.setText('<div  style=" line-height: 8px;background-size: 8px 8px; background-image: url(\'resources/images/retailerDetail/dot2.png\');background-repeat: no-repeat;/">&nbsp &nbsp <span> Admin Only </span></div>');

        }
    },

    onRDNotesDelBtnTap: function(button, e, eOpts) {
        var RDNotesListItemID  =  Ext.ComponentQuery.query('#RDNotesListItemID')[0];
        var noteList  = RDNotesListItemID.down('#mainList');
        var selectedNoteList = noteList.getSelection();

        if(Ext.isEmpty(selectedNoteList)) {
            Ext.Msg.alert('Alert', 'Please select a note to Delete', Ext.emptyFn);
            return;
        }
        else
        {

        if(Ext.getCmp("alertPopUp"))
            Ext.getCmp("alertPopUp").destroy();

        var popup = Ext.widget('alertPopUp');
        popup.setItemId("alertForNotesInhouseList");
        popup.down('#alertPopUpMsg').setHtml('Would you like to delete this note?');
        popup.showBy(button);

        }

    },

    onRDNotesAddBtnTap: function(button, e, eOpts) {
        var notePadMain = button.parent.parent;
        var notesList = notePadMain.down("#mainList");
        var notesStore = notesList.getStore();
        var selection = notesList.getSelection();
        var sticky = notePadMain.down("#inhouseNotepad");
        var textfield = Ext.ComponentQuery.query("#inhouseNotepadNote")[0];

        if(sticky.down("#inhouseNotepadNote").getValue()) {

            var noteText = {
                subject:sticky.down("#inhouseNotepadNote").getValue(),
                crmuser:"Me",
                date:new Date(),
                adminonly:sticky.down("#inhouseNotepadAdminBtn").selected
            };
            if(Ext.isEmpty(selection))
            {
                         if(notesStore)
                        {
                            notesStore.add(noteText);
                        }
                        else{
                            notesList.setData([noteText]);
                        }
            }
            else
            {

                selection[0].set('subject',textfield.getValue());
                notesList.deselectAll();

            }

            notesList.refresh();
            Ext.Msg.alert('Alert', 'Notes List Updated', Ext.emptyFn);
            textfield.setValue('');
        }
        else
            Ext.Msg.alert('Alert', 'Please enter valid Note.', Ext.emptyFn);






    },

    onRDNotepadNoteBlur: function(textfield, e, eOpts) {
        // var notePadMain = textfield.up('#inhouseNotesTab');
        // var notesList = notePadMain.down("#mainList");
        // var selectedNote = notesList.getSelection();

        // if(!Ext.isEmpty(selectedNote) && textfield.getValue()) {
        //     var notesStore = notesList.getStore();
        //     selectedNote[0].set('subject',textfield.getValue());
        // }


    },

    onRDNotepadAdminBtnTap: function(button, e, eOpts) {
        if(button.selected) {
            button.selected = false;
            button.setCls('');
            button.addCls('x-rm-rdnotesadminbtn-unselected');
             button.setText('<div  style=" line-height: 8px;background-size: 8px 8px; background-image: url(\'resources/images/retailerDetail/dot2.png\');background-repeat: no-repeat;/">&nbsp &nbsp <span> Admin Only </span></div>');
        }
        else {
            button.selected = true;
            button.setCls('');
            button.addCls('x-rm-rdnotesadminbtn-selected');
            button.setText('<div  style=" line-height: 8px; background-size: 8px 8px;background-image: url(\'resources/images/retailerDetail/dot1.png\');background-repeat: no-repeat;">&nbsp &nbsp <span>Admin Only</span> </div>');
        }

        var notePadMain = button.up('#inhouseNotesTab');
        var notesList = notePadMain.down("#mainList");
        var selectedNote = notesList.getSelection();

        if(!Ext.isEmpty(selectedNote)) {
            selectedNote[0].set('adminonly',button.selected);
        }

    },

    onRDTabPanelActiveItemChange: function(container, value, oldValue, eOpts) {
        var sideContainer = container.parent.down('#inhouseSideContainer');
        var managerSideContainer = sideContainer.down('#inhouseProfileSideContainer');
        var crmNotesSideContainer = sideContainer.down('#inhouseSideForNotesSideContainer');
        var inhouseDtlCommStructureSdCont = sideContainer.down('#inhouseDtlCommStructureSdCont') ;

        if(value.title === "PROFILE") {

            sideContainer.setActiveItem(0);

            return ;

            sideContainer.setHidden(false);
                inhouseDtlCommStructureSdCont.setHidden(true);
            managerSideContainer.setHidden(false);
            crmNotesSideContainer.setHidden(true);

        }

        else if( value.title === "NOTES") {
              sideContainer.setActiveItem(1);

            return ;

            sideContainer.setHidden(false);
            managerSideContainer.setHidden(true);
            crmNotesSideContainer.setHidden(false);
             inhouseDtlCommStructureSdCont.setHidden(true);
        }
        else if( value.title === "COMMISSION"){


              sideContainer.setActiveItem(2);

            return ;
                   sideContainer.setHidden(false);
                   managerSideContainer.setHidden(true);
                   crmNotesSideContainer.setHidden(true);
                 inhouseDtlCommStructureSdCont.setHidden(false);
            }

    },

    onRDManagerBlueStickyTextAreaBlur: function(textfield, e, eOpts) {

           Ext.ComponentQuery.query('#inhouseProfileNotesBlueStickyTextArea')[0].setValue(textfield.getValue());

    },

    onRDCRMNotesBlueStickyTextAreaBlur: function(textfield, e, eOpts) {
        Ext.ComponentQuery.query('#inhouseProfileSideBlueStickyTextArea')[0].setValue(textfield.getValue());


    },

    onRDCRMNotesPhotosViewItemTap: function(dataview, index, target, record, e, eOpts) {
        if(record.data.image) {

        }

        var popup = Ext.create('Ext.Sheet',{
                cls: 'x-rm-fbstylephotos',
                height: '100%',
                hideAnimation: false,
                id: 'fbstylephotos',
                showAnimation: 'pop',
                width: '100%',
                scrollable: false,
                items: [
                    {
                        xtype: 'container',
                        width: '100%',
                        height: '100%',
                        layout: {
                            type: 'fit'
                        },
                        items: [
                            {
                                xtype: 'image',
                                height: "100%",
                                width: "100%",
                                src: record.data.image
                            }
                        ]
                    }
                ]
            }
        );
        popup.element.on({
              tap: function(){
                  this.destroy();
              },
              scope:popup
        });
        Ext.Viewport.add(popup);
        popup.show();
    },

    onRDCRMNotesPhotosDeleteBtnTap: function(button, e, eOpts) {
        var photoList  =  Ext.ComponentQuery.query('#inhouseProfileNotesPhotosView')[0];
        var selectedPhotos = photoList.getSelection();

        if(Ext.isEmpty(selectedPhotos)) {
            Ext.Msg.alert('Alert', 'Please select a note to Delete', Ext.emptyFn);
            return;
        }
        else
        {

        if(Ext.getCmp("alertPopUp"))
            Ext.getCmp("alertPopUp").destroy();

        var popup = Ext.widget('alertPopUp');
        popup.setItemId("alertForPhotosInhouseListSide");
        popup.down('#alertPopUpMsg').setHtml('Would you like to delete this photo?');
        popup.showBy(button);
        }
    },

    onRDCRMNotesPhotosAddBtnTap: function(button, e, eOpts) {
        var fileSelect = document.createElement("input");
        fileSelect.type = "file";
        fileSelect.accept = "image/*";
        fileSelect.onchange = function() {

            var file = this.files[0];
            var imageType = /image.*/;
            if (!file.type.match(imageType)) {
              return;
            }
            var photoList = button.parent.parent.down('#inhouseProfileNotesPhotosView');
            var photoStore = photoList.getStore();

            var reader = new FileReader();
            reader.onload = function(event) {
                var dataUri = event.target.result;
                photoStore.add({
                    imagename:file.name,
                    image:dataUri
                });
            };
            reader.onerror = function(event) {
                console.error("File could not be read! Code " + event.target.error.code);
            };
            reader.readAsDataURL(file);

            photoList.refresh();
            this.remove();
            fileSelect = null;
        };
        fileSelect.click();


    },

    onRDCRMNotesAttDeleteBtnTap: function(button, e, eOpts) {
        var attList  =  Ext.ComponentQuery.query('#inhouseProfileNotesAttList')[0];
        var selectedAttList = attList.getSelection();

        if(Ext.isEmpty(selectedAttList)) {
            Ext.Msg.alert('Alert', 'Please select a note to Delete', Ext.emptyFn);
            return;
        }
        else
        {
        if(Ext.getCmp("alertPopUp"))
            Ext.getCmp("alertPopUp").destroy();

        var popup = Ext.widget('alertPopUp');

        popup.setItemId("alertForAttachmentsInhouseListSide");
        popup.down('#alertPopUpMsg').setHtml('Would you like to delete this file?');
        popup.showBy(button);
        }
    },

    onRDCRMNotesAttAddBtnTap: function(button, e, eOpts) {
        var fileSelect = document.createElement("input");
        fileSelect.type = "file";
        fileSelect.onchange = function() {

            var file = this.files[0];
            var attList = button.parent.parent.down('#inhouseProfileNotesAttList');
            var attStore = attList.getStore();
            var objectURL = window.URL.createObjectURL(file);
            attStore.add({
               filename: file.name,
               file:objectURL,
               date:"3/07/2014"
            });
            var timeout = setTimeout(function(){
                window.URL.revokeObjectURL(objectURL);
                clearTimeout(timeout);
            },2000);
            attList.refresh();
            fileSelect = null;
        };
        fileSelect.click();



    },

    onContainerInitialize: function(component, eOpts) {
        component.down('#detailsSaveBtn').element.on("tap",function(){


                 RMdatalink.app.getController('inhouse.DetailScreenController').saveUpdateInhouseStore();
        });
    }

});
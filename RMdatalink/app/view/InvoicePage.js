/*
 * File: app/view/InvoicePage.js
 *
 * This file was generated by Sencha Architect version 3.0.4.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Sencha Touch 2.3.x library, under independent license.
 * License of Sencha Architect does not include license for Sencha Touch 2.3.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('RMdatalink.view.InvoicePage', {
    extend: 'Ext.Sheet',
    alias: 'widget.InvoicePage',

    requires: [
        'RMdatalink.view.listWithHeaderForRtProductBullig',
        'RMdatalink.view.listWithHeader',
        'Ext.form.FieldSet',
        'Ext.Button',
        'Ext.form.Panel',
        'Ext.Img',
        'Ext.field.Text',
        'Ext.Label'
    ],

    config: {
        action: 'setScrollBarVisible',
        cls: 'x-rm-filterdd',
        height: '92%',
        itemId: 'InvoicePage',
        width: 600,
        layout: 'vbox',
        scrollable: true,
        items: [
            {
                xtype: 'fieldset',
                docked: 'top',
                margin: '0 0 0 0',
                width: '100%',
                items: [
                    {
                        xtype: 'button',
                        handler: function(button, e) {
                            var _this =this ;

                            var invoice = window.open("invoice.html", "invoice", "width = 595, height= 842 ");
                            invoice.focus();

                            Ext.Function.defer(addInvoiceToHtmlPage, 1000, _this);

                            Ext.ComponentQuery.query('#InvoicePage')[0].hide();




                            function addInvoiceToHtmlPage(){

                                invoice.window.document.body.appendChild( Ext.DomQuery.selectNode('#invoiceToPrint'));
                                Ext.Function.defer(printInvoicePdf, 100, _this);

                            }





                            function printInvoicePdf(){

                                invoice.print();
                            }

                            //Ext.ComponentQuery.query('#InvoicePage')[0].destroy() ;

                        },
                        cls: 'x-rm-blueBtn',
                        docked: 'right',
                        margin: '0 0 0 10',
                        width: '100px',
                        text: 'Print'
                    },
                    {
                        xtype: 'button',
                        handler: function(button, e) {



                            Ext.ComponentQuery.query('#InvoicePage')[0].hide();

                            Ext.ComponentQuery.query('#InvoicePage')[0].destroy() ;
                        },
                        cls: [
                            ' x-rm-detailsSaveBtn',
                            'x-rm-detailsInnerBtns'
                        ],
                        docked: 'right',
                        height: '20px',
                        width: '100px',
                        text: 'Cancel'
                    }
                ]
            },
            {
                xtype: 'formpanel',
                cls: 'x-rm-rdformpanel',
                height: 850,
                id: 'invoiceToPrint',
                itemId: 'invoiceToPrint',
                margin: '0 0 0 0',
                padding: '5 10 5 10',
                width: 595,
                layout: 'vbox',
                scrollable: false,
                items: [
                    {
                        xtype: 'fieldset',
                        cls: 'x-rm-no_borderflds',
                        width: '100%',
                        layout: {
                            type: 'vbox',
                            align: 'end'
                        },
                        items: [
                            {
                                xtype: 'image',
                                docked: 'left',
                                height: '64px',
                                margin: '10 0 0 10',
                                style: 'background-size: contain;',
                                width: 201,
                                src: 'resources/images/invoice/logo.png'
                            },
                            {
                                xtype: 'textfield',
                                disabled: true,
                                itemId: 'printinvoiceIdTxtfld',
                                width: '200px',
                                inputCls: 'boldInputFld inputdisabledClsFldAsLbl',
                                label: '<b>Invoice</b>',
                                labelWidth: '74px'
                            },
                            {
                                xtype: 'textfield',
                                disabled: true,
                                itemId: 'printinvoiceNofld',
                                width: '200px',
                                inputCls: 'boldInputFld inputdisabledClsFldAsLbl',
                                label: '<b>Invoice#</b>',
                                labelWidth: '74px'
                            }
                        ]
                    },
                    {
                        xtype: 'fieldset',
                        width: '100%',
                        layout: 'hbox',
                        items: [
                            {
                                xtype: 'image',
                                height: '76px',
                                margin: ' 5 5 0 5',
                                width: 36,
                                src: 'resources/images/invoice/address.png'
                            },
                            {
                                xtype: 'fieldset',
                                flex: 1,
                                baseCls: 'x-form-fieldset normalTitle',
                                margin: '5 0 5 0',
                                width: '100%',
                                title: '<div style=" color: #2EC1DA;">From</div>',
                                items: [
                                    {
                                        xtype: 'label',
                                        html: 'Innovations International'
                                    },
                                    {
                                        xtype: 'label',
                                        html: '11300 Decimal Drive, Suite C'
                                    },
                                    {
                                        xtype: 'label',
                                        html: 'Louisville, KY 40299'
                                    },
                                    {
                                        xtype: 'label',
                                        html: 'Phone:	(502) 267 7255 Fax:	(502) 267-8767'
                                    }
                                ]
                            },
                            {
                                xtype: 'fieldset',
                                flex: 1,
                                baseCls: 'x-form-fieldset normalTitle',
                                margin: '5 0 5 0',
                                width: '100%',
                                title: '<div style=" color: #2EC1DA;">To</div>',
                                items: [
                                    {
                                        xtype: 'label',
                                        itemId: 'printInvoiceToNameLbl'
                                    },
                                    {
                                        xtype: 'label',
                                        itemId: 'printInvoiceToAddr1Lbl'
                                    },
                                    {
                                        xtype: 'label',
                                        itemId: 'printInvoiceToCityStZipLbl'
                                    },
                                    {
                                        xtype: 'label',
                                        itemId: 'printInvoiceToPhoneLbl'
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        xtype: 'fieldset',
                        cls: 'x-rm-no_borderflds',
                        margin: '5 0 0 0',
                        width: '100%',
                        layout: 'hbox',
                        items: [
                            {
                                xtype: 'image',
                                height: '32px',
                                width: 36,
                                src: 'resources/images/invoice/calender.png'
                            },
                            {
                                xtype: 'textfield',
                                disabled: true,
                                disabledCls: 'disabledClsFldAsLbl',
                                itemId: 'printinvoiceTopDateFld',
                                width: '170px',
                                inputCls: 'inputdisabledClsFldAsLbl',
                                label: '<div style=" color: #2EC1DA;">Date</div>',
                                labelWidth: '70px'
                            },
                            {
                                xtype: 'textfield',
                                disabled: true,
                                docked: 'right',
                                itemId: 'printinvoiceDueDateFld',
                                width: '170px',
                                inputCls: 'inputdisabledClsFldAsLbl',
                                label: '<div style=" color: #2EC1DA;">Due Date</div>',
                                labelWidth: '70px'
                            }
                        ]
                    },
                    {
                        xtype: 'fieldset',
                        baseCls: 'x-form-fieldset normalTitle',
                        margin: '5 0 5 0',
                        padding: '0 10 0 5',
                        width: '100%',
                        layout: 'hbox',
                        title: '<div style=" color: #2EC1DA;">Summary</div>',
                        items: [
                            {
                                xtype: 'label',
                                html: '<center style="margin-top: 18px;color:white;font-size:bold;">$$</center>',
                                margin: '0 8 0 0',
                                style: 'background-color:rgb(27, 180, 222);',
                                width: '30px'
                            },
                            {
                                xtype: 'fieldset',
                                flex: 1,
                                margin: '5 0 0 0',
                                layout: 'vbox',
                                items: [
                                    {
                                        xtype: 'label',
                                        html: 'RM-PRO',
                                        itemId: 'printInvoiceProductLbl'
                                    },
                                    {
                                        xtype: 'label',
                                        html: 'Member package + 3 Add ons',
                                        itemId: 'printInvoiceProductModulesLbl'
                                    },
                                    {
                                        xtype: 'label',
                                        html: '1 month (6/1/14 - 6/30/14)',
                                        itemId: 'printInvoiceProductDurationLbl'
                                    }
                                ]
                            },
                            {
                                xtype: 'fieldset',
                                html: '<center>509$</center>',
                                itemId: 'printInvoiceTotalPaybleLbl',
                                margin: '5 0 0 0',
                                width: '204px',
                                layout: 'vbox'
                            },
                            {
                                xtype: 'fieldset',
                                flex: 1,
                                layout: 'vbox',
                                items: [
                                    {
                                        xtype: 'image',
                                        flex: 1,
                                        itemId: 'printInvoicePaidStampImg',
                                        src: 'resources/images/invoice/paid.png'
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        xtype: 'fieldset',
                        baseCls: 'x-form-fieldset normalTitle',
                        cls: 'noBottomBorderDiv',
                        itemId: 'printInvoicePackageListPanel',
                        width: '100%',
                        listeners: [
                            {
                                fn: function(component, eOpts) {

                                    var headers = component.down("#headerList");
                                    headers.setData([{}]);
                                    headers.setItemTpl(
                                    Ext.create('Ext.XTemplate',
                                    '<div style="font-size: 10px; color: #2EC1DA; height: 96%;" class="x-rm-listtpl-main onlyBottomBorderDiv">',
                                    '    <div style="width: 6%;">',
                                    '        <div style="width: 20px;" data-name="all"></div>',
                                    '    </div>',

                                    '    <div style="width: 30%;" data-name="module_name">',
                                    '        Product Name&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 10%;" data-name="quantity">',
                                    '        Qty&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 15%;" data-name="module_standard_price">',
                                    '        Unit Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 20%;" data-name="module_promotional_price">',
                                    '        Promotional Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 15%;" data-name="per_month">',
                                    '        Amount&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '</div>'
                                    )
                                    );
                                    headers.refresh();
                                    var list = component.down('#mainList');
                                    list.setStore(Ext.getStore('printInvoice.packModulesStore'));
                                    list.setItemTpl(
                                    Ext.create('Ext.XTemplate',
                                    '<div style="font-size: 10px;" class="x-rm-listtpl-main pointerCursor">',
                                    '    <div style="width: 6%;">',
                                    '    </div>',
                                    '    <div style="width: 30%;">{module_name}</div>',
                                    '    <div style="width: 10%;">{quantity}</div>',
                                    '    <div style="width: 15%;padding-right: 1%;">{module_standard_price}</div>',
                                    '    <div style="width: 20%;padding-right: 1%;">{module_promotional_price}</div>',
                                    '    <div style="width: 15%;padding-right: 1%;"></div>',
                                    '</div>'
                                    )
                                    );



                                    list.setItemHeight(22);


                                    list.addCls('x-rm-rdvendorslist');

                                    //list.refresh() ;
                                    //////////////////////////////////////////////////////////////////////////

                                },
                                event: 'initialize'
                            }
                        ],
                        items: [
                            {
                                xtype: 'listwithheaderforrtproductbullig',
                                itemId: 'printInvoicePackgsList'
                            }
                        ]
                    },
                    {
                        xtype: 'fieldset',
                        baseCls: 'x-form-fieldset normalTitle',
                        cls: 'noTopBorderDiv',
                        itemId: 'printInvoiceAddOnsListPanel',
                        width: '100%',
                        title: 'Add ons',
                        items: [
                            {
                                xtype: 'listwithheader',
                                itemId: 'printInvoiceAddonsList'
                            }
                        ],
                        listeners: [
                            {
                                fn: function(component, eOpts) {
                                    var headers = component.down("#headerList");

                                    headers.setHeight(0);
                                    headers.setHidden(true);
                                    /*
                                    headers.setData([{}]);
                                    headers.setItemTpl(
                                    Ext.create('Ext.XTemplate',
                                    '<div style="font-size: 10px;" class="x-rm-listtpl-main">',
                                    '    <div style="width: 6%;">',
                                    '        <div style="width: 20px;" data-name="all"></div>',
                                    '    </div>',

                                    '    <div style="width: 15%;" data-name="module_name">',
                                    '        Product Name&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 10%;" data-name="quantity">',
                                    '        Qty&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 15%;" data-name="module_standard_price">',
                                    '        Unit Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 15%;" data-name="module_promotional_price">',
                                    '        Promotional Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 15%;" data-name="per_month">',
                                    '        Amount&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '</div>'
                                    )
                                    );
                                    headers.refresh();*/
                                    var list = component.down('#mainList');
                                    list.setStore(Ext.getStore('printInvoice.addOnsModulesStore'));
                                    list.setItemTpl(
                                    Ext.create('Ext.XTemplate',
                                    '<div style="font-size: 10px;" class="x-rm-listtpl-main pointerCursor">',
                                    '    <div style="width: 6%;">',

                                    '    </div>',

                                    '    <div style="width: 30%;">{module_name}</div>',
                                    '    <div style="width: 10%;">{quantity}</div>',
                                    '    <div style="width: 15%;padding-right: 1%;">{module_standard_price}</div>',
                                    '    <div style="width: 20%;padding-right: 1%;">{module_promotional_price}</div>',
                                    '    <div style="width: 15%;padding-right: 1%;">{per_month}</div>',
                                    '</div>'
                                    )
                                    );


                                    list.setItemHeight(22);


                                    list.addCls('x-rm-rdvendorslist');

                                    //list.refresh() ;
                                    /////////////////////////////////////////////////////////////////////////////
                                },
                                event: 'initialize'
                            }
                        ]
                    },
                    {
                        xtype: 'fieldset',
                        cls: ' x-rm-no_borderflds',
                        margin: '5 0 0 0',
                        width: '100%',
                        layout: {
                            type: 'vbox',
                            align: 'end',
                            pack: 'end'
                        },
                        items: [
                            {
                                xtype: 'textfield',
                                disabled: true,
                                hidden: true,
                                html: '<div style= "margin:-20px 0 0 -12px;font-size:0.9em;">$</div>',
                                itemId: 'printInvoiceSubTotalAmtFld',
                                margin: '0 10 0 0',
                                width: '200px',
                                inputCls: 'boldInputFld inputdisabledClsFldAsLbl',
                                label: '<div style=" color: #2EC1DA;"><b>Sub Total</b></div>',
                                labelWidth: '105px'
                            },
                            {
                                xtype: 'textfield',
                                disabled: true,
                                html: '<div style= "margin:-20px 0 0 -12px;font-size:0.9em;">$</div>',
                                itemId: 'invoicePrintSavingFld',
                                margin: '0 10 0 0',
                                width: '200px',
                                inputCls: 'boldInputFld inputdisabledClsFldAsLbl',
                                label: '<div style=" color: #2EC1DA;"><b>Saving</b></div>',
                                labelWidth: '105px'
                            },
                            {
                                xtype: 'textfield',
                                disabled: true,
                                html: '<div style= "margin:-20px 0 0 -12px;font-size:0.9em;">$</div>',
                                itemId: 'printInvoiceTotalAmtFld',
                                margin: '0 10 0 0',
                                width: '200px',
                                inputCls: 'boldInputFld inputdisabledClsFldAsLbl',
                                label: '<div style=" color: #2EC1DA;"><b>Total Payble</b></div>',
                                labelWidth: '105px'
                            }
                        ]
                    },
                    {
                        xtype: 'fieldset',
                        cls: 'x-rm-no_borderflds',
                        width: '100%',
                        layout: 'hbox',
                        items: [
                            {
                                xtype: 'fieldset',
                                flex: 2,
                                baseCls: 'x-form-fieldset normalTitle',
                                itemId: 'printInoicePaymentDtlsPanel',
                                width: '100%',
                                items: [
                                    {
                                        xtype: 'label',
                                        html: 'Payment Method',
                                        itemId: 'printInvoicePaymentMethodLbl'
                                    },
                                    {
                                        xtype: 'label',
                                        html: 'Am Ex',
                                        itemId: 'printInvoiceAmExLbl'
                                    },
                                    {
                                        xtype: 'label',
                                        html: 'CC Approval #: ',
                                        itemId: 'printInvoiceCCApprovalLbl'
                                    }
                                ]
                            },
                            {
                                xtype: 'fieldset',
                                docked: 'right',
                                margin: '0 10 0 0',
                                width: '200px',
                                items: [
                                    {
                                        xtype: 'textfield',
                                        disabled: true,
                                        html: '<div style= "margin:-20px 0 0 -12px;font-size:0.9em;">$</div>',
                                        itemId: 'printInvoiceAmtPaidFld',
                                        margin: '0 10 0 0',
                                        width: '200px',
                                        inputCls: 'boldInputFld inputdisabledClsFldAsLbl',
                                        label: '<div style=" color: #2EC1DA;"><b>Amount Paid</b></div>',
                                        labelWidth: '105px'
                                    },
                                    {
                                        xtype: 'textfield',
                                        disabled: true,
                                        hidden: true,
                                        html: '<div style= "margin:-20px 0 0 -12px;font-size:0.9em;">$</div>',
                                        itemId: 'printInvoiceBalanceDueFld',
                                        margin: '0 10 0 0',
                                        width: '200px',
                                        inputCls: 'boldInputFld inputdisabledClsFldAsLbl',
                                        label: '<div style=" color: #2EC1DA;"><b>Balance Due</b></div>',
                                        labelWidth: '105px'
                                    },
                                    {
                                        xtype: 'textfield',
                                        disabled: true,
                                        itemId: 'printinvoiceBottomDateFld',
                                        width: '200px',
                                        inputCls: 'inputdisabledClsFldAsLbl',
                                        label: '<div style=" color: #2EC1DA;">Date</div>',
                                        labelWidth: '105px'
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        ]
    }

});
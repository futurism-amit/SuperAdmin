/*
 * File: app/view/productDatalinkInvoice.js
 *
 * This file was generated by Sencha Architect version 3.0.4.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Sencha Touch 2.3.x library, under independent license.
 * License of Sencha Architect does not include license for Sencha Touch 2.3.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('RMdatalink.view.productDatalinkInvoice', {
    extend: 'Ext.form.Panel',
    alias: 'widget.productdatalinkinvoice',

    requires: [
        'RMdatalink.view.billing.detailedListContainer',
        'RMdatalink.view.listWithHeader',
        'Ext.form.FieldSet',
        'Ext.Img',
        'Ext.Label',
        'Ext.Panel',
        'Ext.field.Search',
        'Ext.field.Select',
        'Ext.Button',
        'Ext.field.TextArea'
    ],

    config: {
        action: 'setScrollBarVisible',
        cls: ' x-rm-rdformpanel',
        id: 'productRmproInvoicePanel1',
        itemId: 'productDatalinkInvoicePanel',
        width: '100%',
        scrollable: 'vertical',
        layout: {
            type: 'vbox',
            align: 'start'
        },
        items: [
            {
                xtype: 'fieldset',
                baseCls: 'none',
                border: '0 0 0 0',
                itemId: 'invoiceDatalinkHideShowFldSet',
                margin: '10 0 0 20',
                layout: 'hbox',
                items: [
                    {
                        xtype: 'image',
                        height: '30px;',
                        itemId: 'invoiceDatalinkHideShowImg',
                        width: 35,
                        src: 'resources/images/labelHeader/downArrow.png',
                        listeners: [
                            {
                                fn: function(component, eOpts) {
                                    component.element.on('tap',function(){


                                        var rmProBillngPanel =  component.getParent().getParent().down('#invoiceDatalinkBillingFldsPanel');

                                        var childs = component.getParent().getParent().getItems().items ;
                                        for(var i=0;i< childs.length; i++){

                                            if(childs[i].config.xtype =="panel"){
                                                var child = childs[i] ;
                                                if(child.getItemId() != 'invoiceDatalinkPackageListPanel'){


                                                    child.setHidden(! child.getHidden());
                                                    if( child.getHidden()){

                                                        component.setSrc('resources/images/labelHeader/rightArrow.png');
                                                    }else{
                                                        component.setSrc('resources/images/labelHeader/downArrow.png') ;
                                                    }
                                                }
                                            }
                                        }

                                        rmProBillngPanel.setHidden(! rmProBillngPanel.getHidden());
                                        //   rmProBillngPanel.setScrollable(! rmProBillngPanel.getHidden()) ;
                                        if(rmProBillngPanel.getHidden())
                                        {
                                            Ext.ComponentQuery.query('#productDatalinkInvoicePanel')[0].setHeight(30);
                                        }else{
                                            Ext.ComponentQuery.query('#productDatalinkInvoicePanel')[0].setHeight(850);
                                            // RMdatalink.app.getController('InvoiceController').setDataLinkPanelHeight() ;
                                            // Ext.ComponentQuery.query('#productDatalinkInvoicePanel')[0].setHeight(650);
                                        }

                                        //     var child = component.getParent().getParent().down('panel') ;
                                        //     child.setHidden(! child.getHidden());
                                        //     if( child.getHidden()){

                                        //        component.setSrc('resources/images/labelHeader/rightArrow.png');
                                        //     }else{
                                        //         component.setSrc('resources/images/labelHeader/downArrow.png') ;
                                        //     }

                                    });
                                },
                                event: 'initialize'
                            }
                        ]
                    },
                    {
                        xtype: 'label',
                        html: 'DATALINK',
                        itemId: 'mylabel58',
                        style: 'font-size:12px;'
                    },
                    {
                        xtype: 'label',
                        itemId: 'billingDatalinkDtlsLbl',
                        margin: '0 0 0 20',
                        style: 'font-size:12px;'
                    }
                ]
            },
            {
                xtype: 'panel',
                hidden: true,
                itemId: 'invoiceDatalinkPackageListPanel',
                margin: '10 0 0 20',
                width: '98%',
                layout: 'vbox',
                items: [
                    {
                        xtype: 'fieldset',
                        baseCls: 'none',
                        border: '0 0 0 0',
                        margin: '10 0 0 20',
                        layout: 'hbox',
                        items: [
                            {
                                xtype: 'image',
                                height: '30px;',
                                itemId: 'myimg8',
                                width: 35,
                                src: 'resources/images/labelHeader/downArrow.png',
                                listeners: [
                                    {
                                        fn: function(component, eOpts) {
                                            component.element.on('tap',function(){

                                                var child = component.getParent().getParent().down('panel') ;
                                                child.setHidden(! child.getHidden());
                                                if( child.getHidden()){

                                                    component.setSrc('resources/images/labelHeader/rightArrow.png');
                                                }else{
                                                    component.setSrc('resources/images/labelHeader/downArrow.png') ;
                                                }

                                            });
                                        },
                                        event: 'initialize'
                                    }
                                ]
                            },
                            {
                                xtype: 'label',
                                html: 'Package Name',
                                itemId: 'invoiceDatalinkPackNameLbl'
                            },
                            {
                                xtype: 'label',
                                docked: 'right',
                                html: 'Bundel Price',
                                itemId: 'invoiceDatalinkBundelPriceLbl',
                                margin: '0 25% 0 0'
                            }
                        ]
                    },
                    {
                        xtype: 'billingdetailedlistcontainer',
                        height: '200px',
                        hidden: false,
                        itemId: 'invoiceDatalinkPackageListSubPanel',
                        margin: '10 0 0 50',
                        padding: '0 0 0 0'
                    }
                ],
                listeners: [
                    {
                        fn: function(component, eOpts) {

                            var headers = component.down("#billingDetListHeader");
                            headers.setData([{}]);
                            headers.setItemTpl(
                            Ext.create('Ext.XTemplate',
                            '<div class="x-rm-listtpl-main">',
                            '    <div style="width: 6%;">',
                            '        <div style="width: 20px;" data-name="all"></div>',
                            '    </div>',

                            '    <div style="width: 15%;" data-name="module_name">',
                            '        Product Name&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                            '    </div>',
                            '    <div style="width: 10%;" data-name="quantity">',
                            '        Qty&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                            '    </div>',
                            '    <div style="width: 15%;" data-name="module_standard_price">',
                            '        Unit Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                            '    </div>',
                            '    <div style="width: 15%;" data-name="module_promotional_price">',
                            '        Promotional Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                            '    </div>',
                            '    <div style="width: 15%;" data-name="per_month">',
                            '        Amount&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                            '    </div>',
                            '</div>'
                            )
                            );
                            headers.refresh();
                            var list = component.down('#billingDetList');
                            list.setStore(Ext.getStore('products.BillingFromPackages'));
                            list.setItemTpl(
                            Ext.create('Ext.XTemplate',
                            '<div class="x-rm-listtpl-main pointerCursor">',
                            '    <div style="width: 6%;">',
                            '    </div>',
                            '    <div style="width: 15%;">{module_name}</div>',
                            '    <div style="width: 10%;">{quantity}</div>',
                            '    <div style="width: 15%;padding-right: 1%;">{module_standard_price}</div>',
                            '    <div style="width: 15%;padding-right: 1%;">{module_promotional_price}</div>',
                            '    <div style="width: 15%;padding-right: 1%;"></div>',
                            '</div>'
                            )
                            );

                            // list.setMode("SINGLE");
                            //     list.on("select",function(rmProlist, record, eOpts){
                            //         RMdatalink.app.getController('RMProController').onProductRMProListSelect(rmProlist, record, eOpts);
                            // });

                            list.setItemHeight(22);
                            list.setMode('MULTI');
                            list.addCls('x-rm-rdvendorslist');


                            //////////////////////////////////////////////////////////////////////////

                        },
                        event: 'initialize'
                    }
                ]
            },
            {
                xtype: 'panel',
                hidden: false,
                itemId: 'invoiceDatalinkAddOnsListPanel',
                margin: '10 0 0 20',
                width: '98%',
                layout: 'vbox',
                items: [
                    {
                        xtype: 'fieldset',
                        baseCls: 'none',
                        border: '0 0 0 0',
                        hidden: true,
                        margin: '10 0 0 20',
                        layout: 'hbox',
                        items: [
                            {
                                xtype: 'image',
                                height: '30px;',
                                itemId: 'myimg8',
                                width: 35,
                                src: 'resources/images/labelHeader/downArrow.png',
                                listeners: [
                                    {
                                        fn: function(component, eOpts) {
                                            component.element.on('tap',function(){

                                                var child = component.getParent().getParent().down('panel') ;
                                                child.setHidden(! child.getHidden());
                                                if( child.getHidden()){

                                                    component.setSrc('resources/images/labelHeader/rightArrow.png');
                                                }else{
                                                    component.setSrc('resources/images/labelHeader/downArrow.png') ;
                                                }

                                            });
                                        },
                                        event: 'initialize'
                                    }
                                ]
                            },
                            {
                                xtype: 'label',
                                html: 'Add-ons',
                                itemId: 'mylabel58'
                            }
                        ]
                    },
                    {
                        xtype: 'billingdetailedlistcontainer',
                        height: '200px',
                        hidden: false,
                        itemId: 'invoiceDatalinkAddOnsListSubPanel',
                        margin: '10 0 0 50',
                        padding: '0 0 0 0'
                    }
                ],
                listeners: [
                    {
                        fn: function(component, eOpts) {
                            var headers = component.down("#billingDetListHeader");
                            headers.setData([{}]);
                            headers.setItemTpl(
                            Ext.create('Ext.XTemplate',
                            '<div class="x-rm-listtpl-main">',
                            '    <div style="width: 6%;">',
                            '        <div style="width: 20px;" data-name="all"></div>',
                            '    </div>',

                            '    <div style="width: 15%;" data-name="module_name">',
                            '        Product Name&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                            '    </div>',
                            '    <div style="width: 10%;" data-name="quantity">',
                            '        Qty&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                            '    </div>',
                            '    <div style="width: 15%;" data-name="module_standard_price">',
                            '        Unit Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                            '    </div>',
                            '    <div style="width: 15%;" data-name="module_promotional_price">',
                            '        Promotional Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                            '    </div>',
                            '    <div style="width: 15%;" data-name="per_month">',
                            '        Amount&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                            '    </div>',
                            '</div>'
                            )
                            );
                            headers.refresh();
                            var list = component.down('#billingDetList');
                            list.setStore(Ext.getStore('invoice.DatalinkModuleAddons'));
                            list.setItemTpl(
                            Ext.create('Ext.XTemplate',
                            '<div class="x-rm-listtpl-main pointerCursor">',
                            '    <div style="width: 6%;">',

                            '    </div>',

                            '    <div style="width: 15%;">{module_name}</div>',
                            '    <div style="width: 10%;">{quantity}</div>',
                            '    <div style="width: 15%;padding-right: 1%;">{module_standard_price}</div>',
                            '    <div style="width: 15%;padding-right: 1%;">{module_promotional_price}</div>',
                            '    <div style="width: 15%;padding-right: 1%;">{per_month}</div>',
                            '</div>'
                            )
                            );

                            ///////////////////
                            // list.setMode("SINGLE");
                            //     list.on("select",function(rmProlist, record, eOpts){
                            //         RMdatalink.app.getController('RMProController').onProductRMProListSelect(rmProlist, record, eOpts);
                            // });

                            list.setItemHeight(22);
                            list.setMode('MULTI');
                            list.addCls('x-rm-rdvendorslist');




                            /////////////////////////////////////////////////////////////////////////////
                        },
                        event: 'initialize'
                    }
                ]
            },
            {
                xtype: 'fieldset',
                itemId: 'invoiceDatalinkBillingFldsPanel',
                width: '99%',
                items: [
                    {
                        xtype: 'fieldset',
                        margin: '0 10 0 70',
                        layout: {
                            type: 'vbox',
                            align: 'end'
                        },
                        items: [
                            {
                                xtype: 'textfield',
                                disabled: true,
                                itemId: 'invoiceDatalinkSubtotal',
                                width: '200px',
                                inputCls: 'boldInputFld',
                                label: 'Sub Total',
                                labelWidth: '100px'
                            },
                            {
                                xtype: 'textfield',
                                disabled: true,
                                hidden: true,
                                itemId: 'invoiceDatalinkSaving',
                                width: '200px',
                                label: 'Saving',
                                labelWidth: '100px'
                            }
                        ]
                    },
                    {
                        xtype: 'fieldset',
                        padding: '0 0 0 0',
                        layout: 'hbox',
                        items: [
                            {
                                xtype: 'fieldset',
                                layout: 'hbox',
                                items: [
                                    {
                                        xtype: 'fieldset',
                                        margin: '0 10px 0 0',
                                        padding: '0 0 0 0',
                                        width: '250px',
                                        title: '  <div style="font-size:12px;">Commission</div>',
                                        items: [
                                            {
                                                xtype: 'textfield',
                                                action: 'invoiceDatalinkCommission',
                                                itemId: 'invoiceDatalinkCommissionableAmtFld',
                                                width: '250px',
                                                label: 'Commissionable Amount',
                                                labelWidth: '150px'
                                            },
                                            {
                                                xtype: 'textfield',
                                                action: 'invoiceDatalinkCommission',
                                                html: '<div style= "margin:-20% 0 0% 100% ;">%</div>',
                                                itemId: 'invoiceDatalinkCommissionPercentFld',
                                                width: '250px',
                                                label: 'Commission percent',
                                                labelWidth: '150px'
                                            }
                                        ]
                                    },
                                    {
                                        xtype: 'fieldset',
                                        flex: 1,
                                        itemId: 'datalinkInvoiceSalesPersonsPanel',
                                        layout: 'vbox',
                                        title: '  <div style="font-size:12px;">Sales person(s)</div>',
                                        items: [
                                            {
                                                xtype: 'searchfield',
                                                action: 'fillSearchDropDown',
                                                cls: 'x-field-techLogsearch',
                                                itemId: 'rtDatalinkSalesPersonSearchFld',
                                                label: 'Salesperon(s)',
                                                labelWidth: '100px'
                                            },
                                            {
                                                xtype: 'listwithheader',
                                                height: '150px'
                                            }
                                        ],
                                        listeners: [
                                            {
                                                fn: function(component, eOpts) {
                                                    var headers = component.down("#headerList");
                                                    headers.setMargin(0);
                                                    headers.setHeight(0);
                                                    /*headers.setData([{}]);
                                                    headers.setItemTpl(
                                                    Ext.create('Ext.XTemplate',
                                                    '<div class="x-rm-listtpl-main" style="background-color: #DCDCDE ;">',

                                                    '    <div style="width: 40%;" data-name="discount_name">',
                                                    '        Advance Payment Benifits&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                    '    </div>',
                                                    '    <div style="width: 15%;" data-name="discount_value">',
                                                    '        Discount&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                    '    </div>',
                                                    '    <div style="width: 15%;" data-name="discount_saving">',
                                                    '        Saving&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                    '    </div>',
                                                    '    <div style="width: 15%;" data-name="discount_total">',
                                                    '        Total&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                    '    </div>',
                                                    '    <div style="width: 15%;" data-name="discount_per_month">',
                                                    '        Per Month&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                    '    </div>',

                                                    '</div>'
                                                    )
                                                    );
                                                    headers.refresh();*/
                                                    var list = component.down('#mainList');
                                                    list.setMargin(0);
                                                    list.setStore(Ext.getStore('invoice.RtDatalinkSalesPersonStore'));
                                                    list.setItemTpl(
                                                    Ext.create('Ext.XTemplate',
                                                    '<div class="x-rm-listtpl-main pointerCursor" style="margin-top: 12px;">',
                                                    '    <div style="width: 10%;"></div>',
                                                    '    <div style="width: 60%;padding: 0px 0px 0px 10px; padding-left: 7px;">{salesperson_name}</div>',
                                                    '    <input type="text" style="width: 20% !important;text-align:right;" class="x-rm-rdinlinecmt" data-id="{_id}" value="{salesperson_commission}" maxlength="24"',
                                                    '        onchange="RMdatalink.app.getController(\'InvoiceController\').updateDatalinkSalesPersonsList(this,\'salesperson_commission\');"/><div style="margin-top: 2px;">%</div>',
                                                    '</div>'
                                                    )
                                                    );
                                                    list.setItemHeight(22);
                                                    list.setMode("SINGLE");
                                                    list.addCls('x-rm-rdvendorslist');
                                                    list.addCls('delMark-list') ;

                                                    list.setDisableSelection(true);
                                                    list.setOnItemDisclosure(true);
                                                    list.refresh();

                                                    list.on("disclose",function(salesPersonList, record, eOpts){
                                                        salesPersonList.getStore().remove(record) ;
                                                    });

                                                    //disclose( this, record, target, index, e, eOpts )
                                                },
                                                event: 'initialize'
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                xtype: 'fieldset',
                                docked: 'right',
                                margin: '0 10 0 0',
                                width: '250px',
                                layout: 'vbox',
                                items: [
                                    {
                                        xtype: 'fieldset',
                                        padding: '0 0 0 0',
                                        width: '300px',
                                        items: [
                                            {
                                                xtype: 'selectfield',
                                                itemId: 'invoiceDatalinkPaymentPrdSlFld',
                                                width: '250px',
                                                label: 'Payment Period',
                                                labelWidth: '150px',
                                                options: [
                                                    {
                                                        text: '1 Month',
                                                        value: 1
                                                    },
                                                    {
                                                        text: '3 Month',
                                                        value: 3
                                                    },
                                                    {
                                                        text: '6 Month',
                                                        value: 6
                                                    },
                                                    {
                                                        text: '9 Month',
                                                        value: 9
                                                    },
                                                    {
                                                        text: '1 Year',
                                                        value: 12
                                                    },
                                                    {
                                                        text: '2 Year',
                                                        value: 24
                                                    },
                                                    {
                                                        text: '3 Year',
                                                        value: 36
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'textfield',
                                                disabled: true,
                                                html: '<div style= "margin:-20% 0 0% 100% ;">%</div>',
                                                itemId: 'invoiceDatalinkDiscountAppliedFld',
                                                width: '250px',
                                                label: 'Discount Applied',
                                                labelWidth: '150px'
                                            },
                                            {
                                                xtype: 'textfield',
                                                disabled: true,
                                                itemId: 'invoiceDatalinkTotalSavingFld',
                                                width: '250px',
                                                label: 'Total Saving',
                                                labelWidth: '150px'
                                            }
                                        ]
                                    },
                                    {
                                        xtype: 'fieldset',
                                        padding: '0 0 0 0',
                                        width: '300px',
                                        items: [
                                            {
                                                xtype: 'textfield',
                                                eventAction: 'DatalinkSubscriptionEdited',
                                                disabled: true,
                                                itemId: 'invoiceDatalinkTotalPaybleFld',
                                                width: '250px',
                                                inputCls: 'boldInputFld',
                                                label: '<b>Total Payble</b>',
                                                labelWidth: '150px'
                                            },
                                            {
                                                xtype: 'textfield',
                                                action: 'calDatalinkBalDue',
                                                itemId: 'invoiceDatalinkPastDueFld',
                                                width: '250px',
                                                label: 'Past Due',
                                                labelWidth: '150px'
                                            },
                                            {
                                                xtype: 'textfield',
                                                disabled: true,
                                                itemId: 'invoiceDatalinkBalanceDueFld',
                                                width: '250px',
                                                label: 'Balance Due',
                                                labelWidth: '150px'
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        xtype: 'fieldset',
                        itemId: 'rmProextradtl1',
                        layout: 'hbox',
                        items: [
                            {
                                xtype: 'textfield',
                                action: 'inputByDatePicker',
                                itemId: 'datalinkSubscrPaymentStartDateFld',
                                width: '250px',
                                label: 'From Date'
                            },
                            {
                                xtype: 'textfield',
                                action: 'inputByDatePicker',
                                itemId: 'datalinkSubscrPaymentEndDateFld',
                                width: '250px',
                                label: 'To Date'
                            },
                            {
                                xtype: 'textfield',
                                action: 'inputByDatePicker',
                                eventAction: 'RMPROsubscriptionEdited',
                                itemId: 'datalinkSubscrPaymentDueDateFld',
                                width: '250px',
                                label: 'Due Date'
                            }
                        ]
                    },
                    {
                        xtype: 'fieldset',
                        itemId: 'myfieldset50',
                        layout: 'vbox',
                        items: [
                            {
                                xtype: 'label',
                                html: 'Previous Payments',
                                style: 'font-size:0.8em;'
                            },
                            {
                                xtype: 'listwithheader',
                                height: '90px',
                                width: '100%'
                            }
                        ],
                        listeners: [
                            {
                                fn: function(component, eOpts) {
                                    /*

                                    proccessed_by: ""
                                    pay_date: "06/17/2014"
                                    payment_method_detail: ""
                                    paid_by: "cash"

                                    ammount_paying: "400"
                                    cc_approval: ""
                                    date: "06/17/2014"

                                    */

                                    var headers = component.down("#headerList");
                                    headers.setData([{}]);
                                    headers.setItemTpl(
                                    Ext.create('Ext.XTemplate',
                                    '<div class="x-rm-listtpl-main">',
                                    '    <div style="width: 15%;" data-name="proccessed_by">',
                                    '        Proccessed by&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 15%;" data-name="pay_date">',
                                    '        Pay Date&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 15%;" data-name="paid_by">',
                                    '        Paid by&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 15%;" data-name="cc_approval">',
                                    '        CC Approval&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 15%;" data-name="payment_method_detail">',
                                    '        Check # / CC #&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 15%;" data-name="ammount_paying">',
                                    '        Amount&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',

                                    '</div>'
                                    )
                                    );
                                    headers.refresh();
                                    var list = component.down('#mainList');
                                    list.setStore(Ext.getStore('DatalinkInvoicePaymentsStore'));
                                    list.setItemTpl(
                                    Ext.create('Ext.XTemplate',
                                    '<div class="x-rm-listtpl-main pointerCursor">',
                                    '<div style="width: 15%;">{proccessed_by}</div>',
                                    '<div style="width: 15%;">{pay_date}</div>',
                                    '<div style="width: 15%;">{paid_by}</div>',
                                    '<div style="width: 15%;">{cc_approval}</div>',
                                    '<div style="width: 15%;">{payment_method_detail}</div>',
                                    '<div style="width: 15%;">{ammount_paying}</div>',
                                    '</div>'
                                    )
                                    );

                                    ///////////////////
                                    // list.setMode("SINGLE");
                                    //     list.on("select",function(rmProlist, record, eOpts){
                                    //         RMdatalink.app.getController('RMProController').onProductRMProListSelect(rmProlist, record, eOpts);
                                    // });

                                    list.setItemHeight(22);
                                    list.setMode('MULTI');
                                    list.addCls('x-rm-rdvendorslist');




                                },
                                event: 'initialize'
                            }
                        ]
                    },
                    {
                        xtype: 'fieldset',
                        layout: 'hbox',
                        items: [
                            {
                                xtype: 'fieldset',
                                layout: 'vbox',
                                title: '  <div style="font-size:12px;">Payments</div>',
                                items: [
                                    {
                                        xtype: 'textfield',
                                        action: 'inputByDatePicker',
                                        itemId: 'invoiceDatalinkPayDateFld',
                                        label: 'Pay Date',
                                        labelWidth: '100px'
                                    },
                                    {
                                        xtype: 'selectfield',
                                        itemId: 'invoiceDatalinkPaidByFld',
                                        label: 'Paid By',
                                        labelWidth: '100px',
                                        options: [
                                            {
                                                text: 'by Cash',
                                                value: 'cash'
                                            },
                                            {
                                                text: 'by Check',
                                                value: 'check'
                                            },
                                            {
                                                text: 'by Am Express',
                                                value: 'am_express'
                                            }
                                        ]
                                    },
                                    {
                                        xtype: 'textfield',
                                        itemId: 'invoiceDatalinkPaymentDetailFld',
                                        label: 'Check # / CC #',
                                        labelWidth: '100px'
                                    },
                                    {
                                        xtype: 'textfield',
                                        itemId: 'invoiceDatalinkCCApprovalFld',
                                        label: 'CCApproval',
                                        labelWidth: '100px'
                                    }
                                ]
                            },
                            {
                                xtype: 'fieldset',
                                margin: '35px 10px 0 5px',
                                layout: 'vbox',
                                items: [
                                    {
                                        xtype: 'textfield',
                                        action: 'calDatalinkBalDue',
                                        itemId: 'invoiceDatalinkAmmountFld',
                                        label: 'Ammount',
                                        labelWidth: '100px'
                                    },
                                    {
                                        xtype: 'textfield',
                                        itemId: 'invoiceDatalinkCommissionFld',
                                        label: 'Commission',
                                        labelWidth: '100px'
                                    },
                                    {
                                        xtype: 'textfield',
                                        itemId: 'invoiceDatalinkProcessedByFld',
                                        label: 'Proccessed By',
                                        labelWidth: '100px'
                                    },
                                    {
                                        xtype: 'textfield',
                                        action: 'inputByDatePicker',
                                        itemId: 'invoiceDatalinkDateFld',
                                        label: 'Date',
                                        labelWidth: '100px'
                                    }
                                ]
                            },
                            {
                                xtype: 'fieldset',
                                height: '150px',
                                margin: '35px 0px 0 5px',
                                items: [
                                    {
                                        xtype: 'button',
                                        cls: 'x-rm-blueBtn',
                                        docked: 'bottom',
                                        height: '25px',
                                        itemId: 'invoiceDatalinkProductSetupBtn',
                                        margin: '10 20 10 0',
                                        width: '150px',
                                        text: 'Product Setup'
                                    },
                                    {
                                        xtype: 'button',
                                        handler: function(button, e) {
                                            if(RMdatalink.app.getController('InvoiceHistoryController').config.displayGeneratedInvoice ){
                                                if(Ext.ComponentQuery.query('#InvoicePage')[0]){

                                                    Ext.ComponentQuery.query('#InvoicePage')[0].destroy() ;
                                                }






                                                var printTimeout = setTimeout(function(){


                                                    Ext.widget('InvoicePage').show();


                                                    RMdatalink.app.getController('InvoiceController').setDatalinkInvoiceToPrint();



                                                    clearTimeout(printTimeout);


                                                },100);

                                                return ;
                                            }

                                            var rmProInvoicePanel = Ext.ComponentQuery.query('#productDatalinkInvoicePanel')[0] ;


                                            if(! rmProInvoicePanel.down('#invoiceDatalinkAmmountFld').getValue() || rmProInvoicePanel.down('#invoiceDatalinkAmmountFld').getValue() <= 0 ){

                                                Ext.Msg.alert("Alert","Please Enter Ammount.");
                                                return ;
                                            }

                                            if(! rmProInvoicePanel.down('#invoiceDatalinkBalanceDueFld').getValue() || rmProInvoicePanel.down('#invoiceDatalinkBalanceDueFld').getValue() <= 0){

                                                RMdatalink.app.getController('InvoiceController').config.isSalesCommissionForDatalink = true ;

                                                RMdatalink.app.getController('InvoiceController').saveRmProInvoice(true,"product_datalink");

                                            }

                                            else{


                                                RMdatalink.app.getController('InvoiceController').addDatalinkProductBilling();

                                                if(Ext.ComponentQuery.query('#InvoicePage')[0]){

                                                    Ext.ComponentQuery.query('#InvoicePage')[0].destroy() ;
                                                }






                                                var printTimeout = setTimeout(function(){


                                                    Ext.widget('InvoicePage').show();


                                                    RMdatalink.app.getController('InvoiceController').setDatalinkInvoiceToPrint();

                                                    RMdatalink.app.getController('InvoiceController').hideShowPrintPaymentInfo(true);

                                                    clearTimeout(printTimeout);


                                                },100);
                                            }
                                        },
                                        cls: 'x-rm-blueBtn',
                                        docked: 'bottom',
                                        height: '25px',
                                        itemId: 'invoiceDatalinkPrintBtn',
                                        margin: '0 20 0 0',
                                        width: '150px',
                                        text: 'Print Invoice'
                                    },
                                    {
                                        xtype: 'label',
                                        html: 'Note:'
                                    },
                                    {
                                        xtype: 'textareafield',
                                        height: '50px',
                                        itemId: 'datalinkPaymentNoteFld'
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        ]
    }

});
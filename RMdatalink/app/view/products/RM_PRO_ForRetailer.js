/*
 * File: app/view/products/RM_PRO_ForRetailer.js
 *
 * This file was generated by Sencha Architect version 3.0.4.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Sencha Touch 2.3.x library, under independent license.
 * License of Sencha Architect does not include license for Sencha Touch 2.3.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('RMdatalink.view.products.RM_PRO_ForRetailer', {
    extend: 'Ext.Panel',
    alias: 'widget.productsrm_pro_forretailer',

    requires: [
        'RMdatalink.view.listWithHeaderForRtProductBullig',
        'RMdatalink.view.listWithHeader',
        'Ext.Label',
        'Ext.dataview.List',
        'Ext.XTemplate',
        'Ext.form.FieldSet',
        'Ext.field.Radio',
        'Ext.form.Panel',
        'Ext.field.Text'
    ],

    config: {
        layout: 'hbox',
        items: [
            {
                xtype: 'panel',
                flex: 3,
                layout: 'vbox',
                items: [
                    {
                        xtype: 'panel',
                        flex: 3,
                        itemId: 'rmProModulesForRtListPanel',
                        layout: 'vbox',
                        items: [
                            {
                                xtype: 'listwithheaderforrtproductbullig',
                                itemId: 'rmProModulesForRtList',
                                flex: 1
                            },
                            {
                                xtype: 'label',
                                html: '<div style="font-size: 14px;margin-left: 10px;">Add ons</div>',
                                itemId: 'productPackageNameLabel1',
                                style: 'color: #555;'
                            },
                            {
                                xtype: 'list',
                                action: 'setScrollBarVisible',
                                flex: 0.8,
                                cls: 'x-rm-list',
                                itemId: 'rtProductAddOnsModuleLst',
                                allowDeselect: true,
                                itemHeight: 22
                            },
                            {
                                xtype: 'fieldset',
                                cls: 'noBorderFldSet',
                                layout: 'hbox',
                                items: [
                                    {
                                        xtype: 'label',
                                        html: 'Sub Total:',
                                        style: 'text-align:right;',
                                        width: '77%'
                                    },
                                    {
                                        xtype: 'label',
                                        html: '0$',
                                        itemId: 'rmProStdPriceTotalLbl',
                                        style: 'text-align:right;padding-right:4%;',
                                        width: '10%'
                                    },
                                    {
                                        xtype: 'label',
                                        html: '0$',
                                        itemId: 'rmProPrmotionalPriceTotalLbl',
                                        style: 'text-align:right;padding-right:4%;',
                                        width: '10%'
                                    }
                                ]
                            }
                        ],
                        listeners: [
                            {
                                fn: function(component, eOpts) {
                                    //var packageStore = Ext.getStore('products.BillingFromPackages') ;
                                    //var addOnsStore = Ext.getStore('products.BillingModuleAddons') ;


                                    var headers = component.down("#headerList");
                                    headers.setData([{}]);
                                    headers.setItemTpl(
                                    Ext.create('Ext.XTemplate',
                                    '<div class="x-rm-listtpl-main">',
                                    '    <div style="width: 6%;">',
                                    '        <div style="width: 20px;" data-name="all"></div>',
                                    '    </div>',
                                    '    <div style="width: 15%;" data-name="module_name">',
                                    '        Product Name&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 25%;" data-name="module_description">',
                                    '       Description&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 20%;" data-name="trial">',
                                    '        Trial&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 10%;" data-name="quantity">',
                                    '        Qty&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 10%;" data-name="module_standard_price">',
                                    '        Rate&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 10%;" data-name="per_month">',
                                    '        Per Month&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '</div>'
                                    )
                                    );
                                    headers.refresh();
                                    var list = component.down('#mainList');
                                    list.setStore(Ext.getStore('products.BillingFromPackages'));
                                    list.setItemTpl(
                                    Ext.create('Ext.XTemplate',
                                    '<div class="x-rm-listtpl-main pointerCursor">',
                                    '    <div style="width: 6%;">',
                                    '    </div>',
                                    '    <div style="width: 15%;">{module_name}</div>',
                                    '    <div style="width: 25%;">{module_description}</div>',
                                    '    <input type="text" style="width: 20% !important;" class="x-rm-rdinlinecmt" data-id="{_id}" value="{trial}" maxlength="24"',
                                    '        onchange="RMdatalink.app.getController(\'ProductBillingController\').updateModuleList(this,\'trial\');"/>',
                                    '    <div style="width: 10%;">{quantity}</div>',
                                    '    <div style="width: 10%;text-align: right;padding-right: 6%;">{module_standard_price}</div>',
                                    '    <div style="width: 10%;text-align: right;">{standard_total}</div>',

                                    '</div>'
                                    )
                                    );

                                    // list.setMode("SINGLE");
                                    //     list.on("select",function(rmProlist, record, eOpts){
                                    //         RMdatalink.app.getController('RMProController').onProductRMProListSelect(rmProlist, record, eOpts);
                                    // });

                                    list.setItemHeight(22);
                                    list.setMode('MULTI');
                                    list.addCls('x-rm-rdvendorslist');

                                    var moduleList = component.down('#rtProductAddOnsModuleLst') ;

                                    moduleList.setStore(Ext.getStore('products.BillingModuleAddons'));
                                    moduleList.setItemTpl(
                                    Ext.create('Ext.XTemplate',
                                    '<div class="x-rm-listtpl-main pointerCursor">',
                                    '    <div style="width: 6%;">',
                                    '        <div style="width: 19px; height:19px;"    {[RMdatalink.util.globalConfig.getListAttrForDelHandling()]} ="onCartTap" ></div>',
                                    '    </div>',
                                    '    <div style="width: 15%;">{module_name}</div>',
                                    '    <div style="width: 25%;">{module_description}</div>',
                                    '    <input type="text" style="width: 20% !important;" class="x-rm-rdinlinecmt" data-id="{_id}" value="{trial}" maxlength="24"',
                                    '        onchange="RMdatalink.app.getController(\'ProductBillingController\').updateModuleList(this,\'trial\');"/>',
                                    '    <input type="text" style="width: 10% !important;" class="x-rm-rdinlinecmt" data-id="{_id}" value="{quantity}" maxlength="24"',
                                    '        onchange="RMdatalink.app.getController(\'ProductBillingController\').updateModuleList(this,\'quantity\');"/>',
                                    '    <div style="width: 10%;text-align: right;padding-right: 6%;">{module_standard_price}</div>',
                                    '    <div style="width: 10%;text-align: right;">{standard_total}</div>',
                                    '</div>'
                                    )
                                    );

                                    // list.setMode("SINGLE");
                                    //     list.on("select",function(rmProlist, record, eOpts){
                                    //         RMdatalink.app.getController('RMProController').onProductRMProListSelect(rmProlist, record, eOpts);
                                    // });

                                    moduleList.setItemHeight(22);
                                    moduleList.setMode('MULTI');
                                    moduleList.addCls('x-rm-rdvendorslist');
                                },
                                event: 'initialize'
                            }
                        ]
                    },
                    {
                        xtype: 'panel',
                        height: '160px',
                        itemId: 'rmProDiscountsForRtListPanel',
                        layout: 'hbox',
                        items: [
                            {
                                xtype: 'fieldset',
                                flex: 3,
                                height: '100%',
                                hidden: false,
                                layout: 'vbox',
                                items: [
                                    {
                                        xtype: 'listwithheader',
                                        itemId: 'rmProDiscountsForRtList',
                                        margin: '5 0 0 0',
                                        flex: 1
                                    },
                                    {
                                        xtype: 'fieldset',
                                        cls: [
                                            'x-rm-radiordformpanel',
                                            'x-rm-rdformpanel'
                                        ],
                                        height: '28px',
                                        hidden: true,
                                        margin: '0 0 0 0',
                                        layout: 'hbox',
                                        items: [
                                            {
                                                xtype: 'radiofield',
                                                cls: 'pointerCursor',
                                                itemId: 'monthlyPaymentRTBillrdoFld',
                                                width: '40%',
                                                inputCls: 'radiofieldInput',
                                                label: 'Monthly Payment',
                                                labelCls: 'transparentBack',
                                                labelWidth: 'auto',
                                                name: 'productPaymentOptions'
                                            },
                                            {
                                                xtype: 'radiofield',
                                                cls: 'pointerCursor',
                                                itemId: 'yearlyPaymentRTBillrdoFld',
                                                width: '40%',
                                                inputCls: 'radiofieldInput',
                                                label: 'Yearly Payment',
                                                labelCls: 'transparentBack',
                                                labelWidth: 'auto',
                                                name: 'productPaymentOptions'
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                xtype: 'formpanel',
                                cls: 'x-rm-rdformpanel',
                                width: '360px',
                                scrollable: false,
                                items: [
                                    {
                                        xtype: 'textfield',
                                        disabled: true,
                                        hidden: true,
                                        itemId: 'rtBillTotalMonthlyMbrShipFld',
                                        width: '100%',
                                        label: 'Total Monthly Membership',
                                        labelWidth: '160px'
                                    },
                                    {
                                        xtype: 'textfield',
                                        disabled: true,
                                        itemId: 'rtBillDiscountTxtFld',
                                        width: '80%',
                                        inputCls: 'inputTextRightAlign',
                                        label: 'Discount',
                                        labelWidth: '160px'
                                    },
                                    {
                                        xtype: 'textfield',
                                        itemId: 'rtBillMonthlyMemberShipFld',
                                        width: '80%',
                                        inputCls: 'inputTextRightAlign',
                                        label: 'Monthly Membership',
                                        labelWidth: '160px'
                                    },
                                    {
                                        xtype: 'textfield',
                                        disabled: true,
                                        itemId: 'rtBillYearlyMemberShipFld',
                                        width: '80%',
                                        inputCls: 'inputTextRightAlign',
                                        label: 'Yearly Membership',
                                        labelWidth: '160px'
                                    }
                                ]
                            }
                        ],
                        listeners: [
                            {
                                fn: function(component, eOpts) {
                                    var headers = component.down("#headerList");
                                    headers.setData([{}]);
                                    headers.setItemTpl(
                                    Ext.create('Ext.XTemplate',
                                    '<div class="x-rm-listtpl-main" style="background-color: #DCDCDE ;">',
                                    '    <div style="width: 5%;"></div>',
                                    '    <div style="width: 35%;" data-name="discount_name">',
                                    '        Advance Payment Benifits&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 15%;" data-name="discount_value">',
                                    '        Discount&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 15%;" data-name="discount_saving">',
                                    '        Saving&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 15%;" data-name="discount_total">',
                                    '        Total&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 15%;" data-name="discount_per_month">',
                                    '        Per Month&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',

                                    '</div>'
                                    )
                                    );
                                    headers.refresh();
                                    var list = component.down('#mainList');
                                    list.setStore(Ext.getStore('products.BillingDiscount'));
                                    list.setItemTpl(
                                    Ext.create('Ext.XTemplate',
                                    '<div class="x-rm-listtpl-main pointerCursor">',
                                    '    <div style="width: 5%;">',
                                    '        <div style="width: 19px; height:19px;"    {[RMdatalink.util.globalConfig.getListAttrForDelHandling()]} ="onCartTap" ></div>',
                                    '    </div>',
                                    '    <div style="width: 35%;">{discount_name}</div>',
                                    '    <div style="width: 15%;">{discount_value}%</div>',
                                    '    <div style="width: 15%;">$ {discount_saving}</div>',
                                    '    <div style="width: 15%;">$ {discount_total}</div>',
                                    '    <div style="width: 15%; font-weight: bold;">$ {discount_per_month}</div>',
                                    '</div>'
                                    )
                                    );
                                    list.setItemHeight(22);
                                    list.setMode("SINGLE");
                                    list.addCls('x-rm-rdvendorslist');
                                    list.on("select",function(discountList, record, eOpts){
                                    });
                                },
                                event: 'initialize'
                            }
                        ]
                    }
                ]
            },
            {
                xtype: 'formpanel',
                flex: 0.8,
                cls: ' x-rm-rdformpanel',
                layout: 'vbox',
                scrollable: false,
                items: [
                    {
                        xtype: 'label',
                        html: '<center>SELECT PACKAGE</center>',
                        itemId: 'rtBillingSlctPackLbl',
                        margin: '15 0 5 0',
                        width: '100%'
                    },
                    {
                        xtype: 'list',
                        scrollable: 'false',
                        flex: 2,
                        cls: [
                            'x-rm-list',
                            'x-rm-rdvendorslist'
                        ],
                        itemId: 'rmProSelectPackageList',
                        margin: '35 0 0 0',
                        minHeight: '150px',
                        itemTpl: [
                            '<div class="x-rm-listtpl-main pointerCursor">',
                            '       <div style="width: 12%;">',
                            ' <div style="width: 19px; height:19px;"></div>',
                            '    </div>',
                            '        ',
                            '<div style="width: 85%;">{text}</div>',
                            '              ',
                            '</div>'
                        ],
                        itemHeight: 22
                    },
                    {
                        xtype: 'label',
                        html: '<center>SELECT RATE</center>',
                        width: '100%'
                    },
                    {
                        xtype: 'list',
                        scrollable: 'false',
                        cls: [
                            'x-rm-list',
                            'x-rm-rdvendorslist'
                        ],
                        data: [
                            {
                                text: 'Standard Price',
                                value: 'module_standard_price'
                            },
                            {
                                text: 'Promotional Price',
                                value: 'module_promotional_price'
                            }
                        ],
                        height: '60px',
                        itemId: 'rmProSelectRateList',
                        margin: '35 0 0 0',
                        itemTpl: [
                            '<div class="x-rm-listtpl-main pointerCursor">',
                            '       <div style="width: 12%;">',
                            ' <div style="width: 19px; height:19px;"></div>',
                            '    </div>',
                            '        ',
                            '<div style="width: 85%;">{text}</div>',
                            '              ',
                            '</div>'
                        ],
                        itemHeight: 22
                    },
                    {
                        xtype: 'label',
                        html: '<center>Select Term</center>',
                        itemId: 'productRmproSlctTermLbl',
                        width: '100%'
                    },
                    {
                        xtype: 'textfield',
                        action: 'inputByDatePicker',
                        itemId: 'productRmProSlctTermStrtDtFld',
                        margin: '35 0 0 0',
                        width: '95%',
                        label: 'Start Date',
                        labelWidth: '50%'
                    },
                    {
                        xtype: 'list',
                        scrollable: 'false',
                        cls: [
                            'x-rm-list',
                            'x-rm-rdvendorslist'
                        ],
                        data: [
                            {
                                text: '1 Year',
                                value: '12'
                            },
                            {
                                text: '2 Year',
                                value: '24'
                            },
                            {
                                text: '3 Year',
                                value: '36'
                            }
                        ],
                        height: '90px',
                        itemId: 'rmProSlctTermList',
                        itemTpl: [
                            '<div class="x-rm-listtpl-main pointerCursor">',
                            '       <div style="width: 12%;">',
                            ' <div style="width: 19px; height:19px;"></div>',
                            '    </div>',
                            '        ',
                            '<div style="width: 85%;">{text}</div>',
                            '              ',
                            '</div>'
                        ],
                        itemHeight: 22
                    },
                    {
                        xtype: 'label',
                        html: '<center>Payment Frequency</center>',
                        itemId: 'productRmproPaymentFreqLbl',
                        width: '100%'
                    },
                    {
                        xtype: 'list',
                        scrollable: 'true',
                        action: 'setScrollBarVisible',
                        cls: [
                            'x-rm-list',
                            'x-rm-rdvendorslist'
                        ],
                        data: [
                            {
                                text: 'Monthly',
                                value: '1'
                            },
                            {
                                text: 'Quarterly',
                                value: '3'
                            },
                            {
                                text: 'Half-yearly',
                                value: '6'
                            },
                            {
                                text: 'Half and Quarterly',
                                value: '9'
                            },
                            {
                                text: 'Yearly',
                                value: '12'
                            },
                            {
                                text: '2 Yearly',
                                value: '24'
                            },
                            {
                                text: '3 Yearly',
                                value: '36'
                            }
                        ],
                        height: '120px',
                        itemId: 'rmProPaymentFreqList',
                        margin: '35 0 0 0',
                        itemTpl: [
                            '<div class="x-rm-listtpl-main pointerCursor">',
                            '       <div style="width: 12%;">',
                            ' <div style="width: 19px; height:19px;"></div>',
                            '    </div>',
                            '        ',
                            '<div style="width: 85%;">{text}</div>',
                            '              ',
                            '</div>'
                        ],
                        itemHeight: 22
                    },
                    {
                        xtype: 'label',
                        html: '<center>Vendor Discount</center>',
                        itemId: 'productDatalinkVdrDiscTtlLbl',
                        width: '100%'
                    },
                    {
                        xtype: 'fieldset',
                        flex: 3,
                        itemId: 'myfieldset169',
                        margin: '45 0 0 5',
                        width: '98%',
                        layout: 'vbox',
                        items: [
                            {
                                xtype: 'listwithheader',
                                itemId: 'productDatalinkVdrDiscLst',
                                flex: 1
                            },
                            {
                                xtype: 'textfield',
                                hidden: true,
                                itemId: 'rtBillingCommissionableAmtFld',
                                label: 'Commissionable Ammount',
                                labelWidth: '160px'
                            },
                            {
                                xtype: 'textfield',
                                hidden: true,
                                itemId: 'rtBillingCommissionPercentFld',
                                label: 'Commission Percent',
                                labelWidth: '160px'
                            }
                        ],
                        listeners: [
                            {
                                fn: function(component, eOpts) {
                                    if(Ext.getStore("pricing.datalink_discount").getData().all.length == 0){
                                        RMdatalink.app.getController('BillingDetailsController').setDataForPricingSideContainer(1);

                                    }


                                    var headers1 =  component.down("#headerList");
                                    headers1.setData([{}]);
                                    headers1.setItemTpl(
                                    Ext.create('Ext.XTemplate',
                                    '<div class="x-rm-listtpl-main" style="width: 98%;">',
                                    '    <div style="width: 45%;margin-left:10px;" data-name="of_vendors">',
                                    '        #OF VENDORS&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '    <div style="width: 45%;" data-name="discount_level">',
                                    '       DISCOUNT LEVEL&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                    '    </div>',
                                    '</div>'
                                    )
                                    );
                                    headers1.refresh();
                                    // ** MAIN LIST ****
                                    var list1 =  component.down("#mainList");
                                    list1.setStore(Ext.getStore("pricing.datalink_discount"));

                                    list1.setItemTpl(
                                    Ext.create('Ext.XTemplate',
                                    '<div class="x-rm-listtpl-main" style="width: 100%;">',
                                    '    <div style="width: 45%;padding-left: 15px;">{of_vendors}</div>',
                                    '    <div style="width: 45%;text-align: right;">{discount_level}</div>',
                                    '    <div>%</div>',
                                    '</div>'

                                    )
                                    );
                                    list1.setItemHeight(22);
                                    list1.addCls('x-rm-rdvendorslist');
                                },
                                event: 'initialize'
                            }
                        ]
                    }
                ]
            }
        ],
        listeners: [
            {
                fn: 'onListItemTap',
                event: 'itemtap',
                delegate: '#rmProModulesForRtList #mainList'
            },
            {
                fn: 'onRtProductAddOnsModuleLstItemTap',
                event: 'itemtap',
                delegate: '#rtProductAddOnsModuleLst'
            },
            {
                fn: 'onrmProSelectRateSelect',
                event: 'select',
                delegate: '#rmProSelectRateList'
            },
            {
                fn: 'onrmProSelectRateSelect1',
                event: 'select',
                delegate: '#rmProSlctTermList'
            },
            {
                fn: 'onrmProSelectRateSelect11',
                event: 'select',
                delegate: '#rmProPaymentFreqList'
            }
        ]
    },

    onListItemTap: function(dataview, index, target, record, e, eOpts) {

        var attrToSearch = RMdatalink.util.globalConfig.getListAttrForDelHandling();
        var targetEl = e.target;


        if( RMdatalink.util.globalConfig.isAttributePresentInTarget( attrToSearch,targetEl )  ){


            if(dataview.isSelected(record))
            {

                dataview.deselect(record,true) ;
            }else{

                dataview.select(record,true) ;
            }

        //    RMdatalink.app.getController('ProductBillingController').onModuleListSelectUnSelect() ;

        }else{

            if(dataview.isSelected(record))
            {

                dataview.deselect(record,true) ;
            }else{

                dataview.select(record,true) ;
            }
        }


    },

    onRtProductAddOnsModuleLstItemTap: function(dataview, index, target, record, e, eOpts) {

        var attrToSearch = RMdatalink.util.globalConfig.getListAttrForDelHandling();
        var targetEl = e.target;


        if( RMdatalink.util.globalConfig.isAttributePresentInTarget( attrToSearch,targetEl )  ){


            RMdatalink.app.getController('ProductBillingController').onModuleListSelectUnSelect() ;

        }else{

            if(dataview.isSelected(record))
            {

                dataview.deselect(record,true) ;
            }else{

                dataview.select(record,true) ;
            }
        }


    },

    onrmProSelectRateSelect: function(dataview, record, eOpts) {


        var moduleList = Ext.ComponentQuery.query('#rmProModulesForRtListPanel')[0].down('#mainList') ;
        var addOnsList = Ext.ComponentQuery.query('#rtProductAddOnsModuleLst')[0] ;
        var headers = Ext.ComponentQuery.query('#rmProModulesForRtListPanel')[0].down("#headerList");

        if(record.data.value == "module_standard_price")
        {



            moduleList.setItemTpl(
            Ext.create('Ext.XTemplate',
                       '<div class="x-rm-listtpl-main pointerCursor">',
                       '    <div style="width: 6%;">',
                       '    </div>',
                       '    <div style="width: 15%;">{module_name}</div>',
                       '    <div style="width: 30%;">{module_description}</div>',
                       '    <input type="text" style="width: 20% !important;" class="x-rm-rdinlinecmt" data-id="{_id}" value="{trial}" ',
                       '        onchange="RMdatalink.app.getController(\'ProductBillingController\').updateModuleList(this,\'trial\');"/>',
                       '    <div style="width: 6%;">{quantity}</div>',
                       '    <div style="width: 10%;text-align: right;padding-right: 4%;">$ {module_standard_price}</div>',
                       '    <div style="width: 10%;text-align: right;padding-right: 4%;">$ {standard_total}</div>',
                       '</div>'
                      )
        );


             addOnsList.setItemTpl(
            Ext.create('Ext.XTemplate',
                       '<div class="x-rm-listtpl-main pointerCursor">',
                       '    <div style="width: 6%;">',
                       '        <div style="width: 19px; height:19px;"    {[RMdatalink.util.globalConfig.getListAttrForDelHandling()]} ="onCartTap" ></div>',
                       '    </div>',

                       '    <div style="width: 15%;">{module_name}</div>',
                       '    <div style="width: 30%;">{module_description}</div>',

                       '    <input type="text" style="width: 20% !important;" class="x-rm-rdinlinecmt" data-id="{_id}" value="{trial}" ',
                       '        onchange="RMdatalink.app.getController(\'ProductBillingController\').updateModuleList(this,\'trial\');"/>',

                       '    <input type="text" style="width: 6% !important;" class="x-rm-rdinlinecmt" data-id="{_id}" value="{quantity}"',
                       '        onchange="RMdatalink.app.getController(\'ProductBillingController\').updateModuleList(this,\'quantity\');"/>',



                       '    <div style="width: 10%;text-align: right;padding-right: 4%;">$ {module_standard_price}</div>',
                       '    <div style="width: 10%;text-align: right;padding-right: 4%;">$ {standard_total}</div>',
                       '</div>'
                      )
        );




        headers.setItemTpl(
            Ext.create('Ext.XTemplate',
                       '<div class="x-rm-listtpl-main" style="line-height: 1em;">',
                       '    <div style="width: 6%;">',
                       '        <div style="width: 20px;" data-name="all"></div>',
                       '    </div>',

                       '    <div style="width: 15%;" data-name="module_name">',
                       '        Product Name&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                       '    </div>',
                       '    <div style="width: 30%;" data-name="module_description">',
                       '       Description&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                       '    </div>',
                       '    <div style="width: 20%;" data-name="trial">',
                       '        Trial&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                       '    </div>',
                        '    <div style="width: 6%;" data-name="quantity">',
                       '        Qty&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                       '    </div>',
                        '    <div style="width: 10%;line-height: 1em;" data-name="module_standard_price">',
                       '        Standard<br>Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                       '    </div>',
                        '    <div style="width: 10%;" data-name="per_month">',
                       '        Standard<br>Total&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                       '    </div>',
                       '</div>'
                      )
        );
        headers.refresh();


        }else{

        /*        moduleList.setItemTpl(
           Ext.create('Ext.XTemplate',
                       '<div class="x-rm-listtpl-main pointerCursor">',
                       '    <div style="width: 6%;">',

                       '    </div>',

                       '    <div style="width: 15%;">{module_name}</div>',
                       '    <div style="width: 25%;">{module_description}</div>',

                       '    <input type="text" style="width: 20% !important;" class="x-rm-rdinlinecmt" data-id="{_id}" value="{trial}" ',
                       '        onchange="RMdatalink.app.getController(\'ProductBillingController\').updateModuleList(this,\'trial\');"/>',

                        '    <div style="width: 10%;">{quantity}</div>',


                       '    <div style="width: 10%;text-align: right;padding-right: 6%;">{module_promotional_price}</div>',
                       '    <div style="width: 10%;text-align: right;">{per_month}</div>',
                       '</div>'
                      )
        );

             addOnsList.setItemTpl(
           Ext.create('Ext.XTemplate',
                       '<div class="x-rm-listtpl-main pointerCursor">',
                       '    <div style="width: 6%;">',
                       '        <div style="width: 19px; height:19px;"    {[RMdatalink.util.globalConfig.getListAttrForDelHandling()]} ="onCartTap" ></div>',
                       '    </div>',

                       '    <div style="width: 15%;">{module_name}</div>',
                       '    <div style="width: 25%;">{module_description}</div>',

                       '    <input type="text" style="width: 20% !important;" class="x-rm-rdinlinecmt" data-id="{_id}" value="{trial}" ',
                       '        onchange="RMdatalink.app.getController(\'ProductBillingController\').updateModuleList(this,\'trial\');"/>',

                       '    <input type="text" style="width: 10% !important;" class="x-rm-rdinlinecmt" data-id="{_id}" value="{quantity}"',
                       '        onchange="RMdatalink.app.getController(\'ProductBillingController\').updateModuleList(this,\'quantity\');"/>',



                       '    <div style="width: 10%;text-align: right;padding-right: 6%;">{module_promotional_price}</div>',
                       '    <div style="width: 10%;text-align: right;">{per_month}</div>',
                       '</div>'
                      )
        );
        */



                moduleList.setItemTpl(
           Ext.create('Ext.XTemplate',
                       '<div class="x-rm-listtpl-main pointerCursor">',
                       '    <div style="width: 6%;">',

                       '    </div>',

                       '    <div style="width: 15%;">{module_name}</div>',
                       '    <div style="width: 20%;">{module_description}</div>',

                       '    <input type="text" style="width: 10% !important;" class="x-rm-rdinlinecmt" data-id="{_id}" value="{trial}" ',
                       '        onchange="RMdatalink.app.getController(\'ProductBillingController\').updateModuleList(this,\'trial\');"/>',

                        '    <div style="width: 6%;">{quantity}</div>',

                         '    <div class="textThroughLine" style="width: 10%;text-align: right;padding-right: 4%;">$ {module_standard_price}</div>',

                       '    <div style="width: 10%;text-align: right;padding-right: 4%;">$ {module_promotional_price}</div>',
                       '    <div  class="textThroughLine" style="width: 10%;text-align: right;padding-right: 4%;">$ {standard_total}</div>',
                        '    <div style="width: 10%;text-align: right;padding-right: 4%;">$ {promotional_total}</div>',
                       '</div>'
                      )
        );

             addOnsList.setItemTpl(
           Ext.create('Ext.XTemplate',
                       '<div class="x-rm-listtpl-main pointerCursor">',
                       '    <div style="width: 6%;">',
                       '        <div style="width: 19px; height:19px;"    {[RMdatalink.util.globalConfig.getListAttrForDelHandling()]} ="onCartTap" ></div>',
                       '    </div>',

                       '    <div style="width: 15%;">{module_name}</div>',
                       '    <div style="width: 20%;">{module_description}</div>',

                       '    <input type="text" style="width: 10% !important;" class="x-rm-rdinlinecmt" data-id="{_id}" value="{trial}" ',
                       '        onchange="RMdatalink.app.getController(\'ProductBillingController\').updateModuleList(this,\'trial\');"/>',

                       '    <input type="text" style="width: 6% !important;" class="x-rm-rdinlinecmt" data-id="{_id}" value="{quantity}"',
                       '        onchange="RMdatalink.app.getController(\'ProductBillingController\').updateModuleList(this,\'quantity\');"/>',

                       '    <div class="textThroughLine" style="width: 10%;text-align: right;padding-right: 4%;">$ {module_standard_price}</div>',



                       '    <div style="width: 10%;text-align: right;padding-right: 4%;">$ {module_promotional_price}</div>',

                       '    <div  class="textThroughLine" style="width: 10%;text-align: right;padding-right: 4%;">$ {standard_total}</div>',

                       '    <div style="width: 10%;text-align: right;padding-right: 4%;">$ {promotional_total}</div>',
                       '</div>'
                      )
        );


        headers.setItemTpl(
            Ext.create('Ext.XTemplate',
                       '<div class="x-rm-listtpl-main" style="line-height: 1em;">',
                       '    <div style="width: 6%;">',
                       '        <div style="width: 20px;" data-name="all"></div>',
                       '    </div>',
                       '    <div style="width: 15%;" data-name="module_name">',
                       '        Product Name&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                       '    </div>',
                       '    <div style="width: 20%;" data-name="module_description">',
                       '       Description&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                       '    </div>',
                       '    <div style="width: 10%;" data-name="trial">',
                       '        Trial&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                       '    </div>',
                       '    <div style="width: 6%;" data-name="quantity">',
                       '        Qty&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                       '    </div>',
                       '    <div style="width: 10%;" data-name="module_standard_price">',
                       '        Standard<br>Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                       '    </div>',
                       '    <div style="width: 10%;" data-name="module_promotional_price">',
                       '        Promotional<br>Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                       '    </div>',

                       '    <div style="width: 10%;" data-name="module_promotional_price">',
                       '        Standard<br>Total&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                       '    </div>',
                       '    <div style="width: 10%;" data-name="per_month">',
                       '        Promotional<br>Total&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                       '    </div>',
                       '</div>'
                      )
        ) ;

        headers.refresh() ;

        }
        moduleList.refresh() ;

        addOnsList.refresh() ;

                            var timeout = setTimeout(function(){

                                RMdatalink.app.getController('ProductBillingController').calculateBillingPrices() ;

                                clearTimeout(timeout);
                            },100);


    },

    onrmProSelectRateSelect1: function(dataview, record, eOpts) {

    },

    onrmProSelectRateSelect11: function(dataview, record, eOpts) {

    }

});
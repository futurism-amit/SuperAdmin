/*
 * File: app/view/products/EcomMain.js
 *
 * This file was generated by Sencha Architect version 3.0.4.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Sencha Touch 2.3.x library, under independent license.
 * License of Sencha Architect does not include license for Sencha Touch 2.3.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('RMdatalink.view.products.EcomMain', {
    extend: 'Ext.Panel',
    alias: 'widget.productsecommain',

    requires: [
        'RMdatalink.view.CardHeaderPanel',
        'RMdatalink.view.listWithHeader',
        'RMdatalink.view.pricing.ListContainer',
        'Ext.form.FieldSet',
        'Ext.Button',
        'Ext.tab.Panel',
        'Ext.tab.Bar',
        'Ext.Label',
        'Ext.form.Panel',
        'Ext.field.Select',
        'Ext.field.TextArea',
        'Ext.field.Radio',
        'Ext.dataview.List',
        'Ext.XTemplate'
    ],

    config: {
        itemId: 'productecomMainPanel',
        layout: 'vbox',
        scrollable: false,
        items: [
            {
                xtype: 'CardHeaderPanel',
                flex: 1
            },
            {
                xtype: 'panel',
                flex: 15,
                layout: 'vbox',
                scrollable: false,
                items: [
                    {
                        xtype: 'fieldset',
                        border: '0px',
                        height: '38px',
                        margin: '0 0 0 0',
                        style: 'background-color:transparent !important;border:none !important;',
                        layout: {
                            type: 'hbox',
                            align: 'end',
                            pack: 'end'
                        },
                        items: [
                            {
                                xtype: 'button',
                                handler: function(button, e) {


                                    RMdatalink.app.getController('ecomPricingController').SAVEDatalinkSetup();
                                    RMdatalink.app.getController('ecomPricingController').resetPricingListTemplate();
                                    RMdatalink.app.getController('ecomPricingController').resetDiscountListTemplate();
                                },
                                action: 'addNew',
                                cls: 'x-rm-blueBtn',
                                height: '30px',
                                hidden: true,
                                itemId: 'ecomSetupSaveBtn',
                                margin: '0 10 2 1',
                                width: '90px',
                                text: 'Save'
                            },
                            {
                                xtype: 'button',
                                handler: function(button, e) {

                                    RMdatalink.app.getController('ecomController').enableDisableDlFlds(false);

                                    RMdatalink.app.getController('ecomPricingController').setPricingListTemplate();

                                    RMdatalink.app.getController('ecomPricingController').setDiscountTemplate();
                                },
                                action: 'addNew',
                                cls: 'x-rm-blueBtn',
                                height: '30px',
                                itemId: 'ecomSetupEditBtn',
                                margin: '0 10 2 1',
                                width: '90px',
                                text: 'Edit'
                            },
                            {
                                xtype: 'button',
                                handler: function(button, e) {

                                    RMdatalink.app.getController('ecomController').enableDisableDlFlds(true);

                                    RMdatalink.app.getController('ecomPricingController').resetPricingListTemplate();
                                    RMdatalink.app.getController('ecomPricingController').resetDiscountListTemplate();
                                },
                                cls: 'x-rm-card-actionbtn',
                                height: '24px',
                                itemId: 'ecomSetupCancelBtn',
                                margin: '0 4 2 0',
                                width: '90px',
                                pressedCls: 'x-rm-card-actionbtn-pressing',
                                text: 'Cancel'
                            }
                        ]
                    },
                    {
                        xtype: 'tabpanel',
                        flex: 1,
                        cls: 'x-rm-tabpanel',
                        ui: 'light',
                        layout: {
                            type: 'card',
                            animation: false
                        },
                        tabBar: {
                            docked: 'top',
                            style: 'margin-top: -44px;',
                            width: '60%'
                        },
                        items: [
                            {
                                xtype: 'container',
                                title: 'Setup',
                                itemId: 'ecomMainListContainer',
                                layout: 'hbox',
                                scrollable: false,
                                listeners: [
                                    {
                                        fn: function(component, eOpts) {


                                            return;

                                            ////////////////////////////////////////////////////

                                            var headers = component.down("#headerList");
                                            headers.setData([{}]);
                                            headers.setItemTpl(
                                            Ext.create('Ext.XTemplate',
                                            '<div class="x-rm-listtpl-main" style="border-bottom: 1px solid #9b9b9b; background-color: gainsboro;font-weight: bold;color: #555;font-size: 1.0em;">',
                                            '    <div style="width: 6%;">',
                                            '        <div style="width: 20px;" data-name="all"></div>',
                                            '    </div>',
                                            '    <div class="rightBorderDiv" style="width: 4%;text-align: center;" data-name="module_listed_order">',
                                            '        index&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',
                                            '    <div class="rightBorderDiv" style="width: 14%;" data-name="module_sku">',
                                            '        SKU&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',
                                            '    <div class="rightBorderDiv" style="width: 14%;text-align: center;" data-name="module_name">',
                                            '        Products/ Add-ons&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',
                                            '    <div class="rightBorderDiv" style="width: 38%;text-align: center;" data-name="module_description">',
                                            '       Description&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',
                                            '    <div class="rightBorderDiv" style="width: 10%;text-align: center;" data-name="module_standard_price">',
                                            '        Std. Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',
                                            '    <div style="width: 12%;text-align: center;" data-name="module_promotional_price">',
                                            '        Promo. Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',
                                            '</div>'
                                            )
                                            );
                                            headers.refresh();
                                            var list = component.down('#mainList');


                                            list.setStore(Ext.getStore('products.ecomMain'));


                                            list.setItemTpl(
                                            Ext.create('Ext.XTemplate',
                                            '<div class="x-rm-listtpl-main pointerCursor" style="{[this.getSelectedColor(values)]}">',
                                            '    <div style="width: 6%;">',
                                            '        <div style="width: 19px; height:19px;"    {[RMdatalink.util.globalConfig.getListAttrForDelHandling()]} ="onCartTap" ></div>',
                                            '    </div>',
                                            '    <div class="rightBorderDiv" style="width: 4%;"> {module_listed_order}</div>',
                                            '    <div class="rightBorderDiv boldText" style="width: 14%;">{module_skus}</div>',
                                            '    <div class="rightBorderDiv boldText" style="width: 14%;">{module_name}</div>',
                                            '    <div class="rightBorderDiv" style="width: 38%;">{module_description}</div>',
                                            '    <div class="rightBorderDiv" style="width: 10%;text-align: right;padding-right: 1%;">${[formatNum(values.module_standard_price)]}</div>',
                                            '    <div style="width: 12%;text-align: right;padding-right: 1%;">${[formatNum(values.module_promotional_price)]}</div>',
                                            '</div>',
                                            {
                                                getSelectedColor:function(values){
                                                    if(values.is_itemtap){
                                                        return "background-color: #94DCF0;";
                                                    }else{
                                                        return "background-color: transparent;" ;
                                                    }
                                                }
                                            }

                                            )
                                            );

                                            // list.setMode("SINGLE");
                                            //     list.on("select",function(rmProlist, record, eOpts){
                                            //         RMdatalink.app.getController('RMProController').onProductRMProListSelect(rmProlist, record, eOpts);
                                            // });

                                            list.setItemHeight(22);
                                            list.setMode('MULTI');
                                            list.addCls('x-rm-rdvendorslist');


                                        },
                                        event: 'initialize'
                                    },
                                    {
                                        fn: function(element, eOpts) {
                                            RMdatalink.app.getController('BillingDetailsController').loadVendorTotalCountDataForEcommerce();
                                            return ;
                                            RMdatalink.app.getController('DatalinkController').setDlDataPrice() ;
                                            RMdatalink.app.getController('DatalinkController').onRmProSelectUnselect() ;

                                            /*
                                            var list = Ext.ComponentQuery.query('#datalinkAdvancePaymentDiscountList')[0].down('#mainList') ;


                                            var allRecPanelHeight =  list.getStore().getData().all.length * list.getItemHeight() + 14 ;
                                            Ext.ComponentQuery.query('#datalinkAdvancePaymentDiscountList')[0].setHeight(allRecPanelHeight);



                                            var h1 =  Ext.ComponentQuery.query('#datalinkProductSetupSideP1')[0].getEl().getHeight() ;
                                            var h2 =  Ext.ComponentQuery.query('#datalinkProductSetupSideP2')[0].getEl().getHeight() ;
                                            var h3 =  Ext.ComponentQuery.query('#datalinkDiscountListPanel')[0].getEl().getHeight() ;

                                            Ext.ComponentQuery.query('#productDatalinkaddUpdateFrmPanel')[0].setHeight(h1+h2+h3 + 26) ;
                                            Ext.ComponentQuery.query('#productDatalinkaddUpdateFrmPanel')[0].setMaxHeight(window.innerHeight - 122 );

                                            */
                                            RMdatalink.app.getController('DatalinkController').refreshDatalinkSideCntHeight() ;

                                        },
                                        event: 'painted'
                                    }
                                ],
                                items: [
                                    {
                                        xtype: 'panel',
                                        flex: 3,
                                        itemId: 'mypanel41',
                                        layout: 'vbox',
                                        items: [
                                            {
                                                xtype: 'label',
                                                cls: [
                                                    'pointerCursor',
                                                    'fieldLbl',
                                                    'onePixTopBottomMargin'
                                                ],
                                                html: 'E-Commerce<img src="resources/images/labelHeader/downArrow.png" style="float: right;"/>',
                                                itemId: 'mylabel143',
                                                listeners: [
                                                    {
                                                        fn: function(component, eOpts) {

                                                            component.element.on('tap',function(){

                                                                var cmp = component.getParent();
                                                                var containerSibling = cmp.down("#productSetupecomListPanel");
                                                                console.log("COPONENT CLICKED");
                                                                console.log(cmp.getHeight());
                                                                if(  containerSibling.getHidden() ){


                                                                    component.getEl().query('img')[0].src = "resources/images/labelHeader/downArrow.png";
                                                                    containerSibling.setHidden(false);

                                                                }else{


                                                                    containerSibling.setHidden(true);
                                                                    component.getEl().query('img')[0].src = "resources/images/labelHeader/rightArrow.png";
                                                                }

                                                            });
                                                        },
                                                        event: 'initialize'
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'panel',
                                                flex: 3,
                                                cls: 'borderedDiv',
                                                itemId: 'productSetupecomListPanel',
                                                margin: '0 0 5 0',
                                                layout: 'vbox',
                                                items: [
                                                    {
                                                        xtype: 'listwithheader',
                                                        itemId: 'listwithheader',
                                                        flex: 1
                                                    },
                                                    {
                                                        xtype: 'panel',
                                                        cls: 'onlyTopBorderDiv',
                                                        style: ' background-color: gainsboro;font-weight: bold;',
                                                        layout: 'hbox',
                                                        items: [
                                                            {
                                                                xtype: 'fieldset',
                                                                margin: 0,
                                                                width: '74%',
                                                                layout: 'hbox',
                                                                items: [
                                                                    {
                                                                        xtype: 'textfield',
                                                                        hidden: true,
                                                                        itemId: 'ecomBundlePriceTxtFld',
                                                                        width: '280px',
                                                                        inputCls: 'highlightedColor',
                                                                        label: 'Bundle Price',
                                                                        labelCls: 'highlightedColor',
                                                                        labelWidth: '120px'
                                                                    },
                                                                    {
                                                                        xtype: 'button',
                                                                        cls: 'x-rm-blueBtn',
                                                                        height: '28px',
                                                                        hidden: true,
                                                                        itemId: 'saveecomBundleBtn',
                                                                        margin: '0 5 0 5',
                                                                        text: 'Save Bundle'
                                                                    },
                                                                    {
                                                                        xtype: 'label',
                                                                        cls: 'fontDefination',
                                                                        docked: 'right',
                                                                        html: 'Total price for selected items::',
                                                                        margin: '5 5 5 10',
                                                                        style: 'font-size: 0.75em;'
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'label',
                                                                itemId: 'ecomSumOfStdPriceLbl',
                                                                margin: '5 5 5 5',
                                                                minWidth: '10%',
                                                                style: 'text-align: right;font-size: 0.75em;'
                                                            },
                                                            {
                                                                xtype: 'label',
                                                                itemId: 'ecomSumOfPromoPriceLbl',
                                                                margin: '5 5 5 5',
                                                                minWidth: '10%',
                                                                style: 'text-align: right;font-size: 0.75em;'
                                                            }
                                                        ]
                                                    }
                                                ],
                                                listeners: [
                                                    {
                                                        fn: function(component, eOpts) {




                                                            ////////////////////////////////////////////////////

                                                            var headers = component.down("#headerList");
                                                            headers.setData([{}]);
                                                            headers.setItemTpl(
                                                            Ext.create('Ext.XTemplate',
                                                            '<div class="x-rm-listtpl-main fontDefination" style="border-bottom: 1px solid #9b9b9b; background-color: gainsboro;font-weight: bold;color: #555;">',
                                                            '    <div style="width: 4%;">',
                                                            '        <div style="width: 20px;" data-name="all"></div>',
                                                            '    </div>',
                                                            '    <div class="rightBorderDiv" style="width: 6%;text-align: center;" data-name="module_listed_order">',
                                                            '        index&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                            '    </div>',
                                                            '    <div class="rightBorderDiv" style="width: 14%;" data-name="module_sku">',
                                                            '        SKU&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                            '    </div>',
                                                            '    <div class="rightBorderDiv" style="width: 14%;text-align: center;" data-name="module_name">',
                                                            '        Products/ Add-ons&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                            '    </div>',
                                                            '    <div class="rightBorderDiv" style="width: 38%;text-align: center;" data-name="module_description">',
                                                            '       Description&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                            '    </div>',
                                                            '    <div class="rightBorderDiv" style="width: 10%;text-align: center;" data-name="module_standard_price">',
                                                            '        Std. Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                            '    </div>',
                                                            '    <div style="width: 12%;text-align: center;" data-name="module_promotional_price">',
                                                            '        Promo. Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                            '    </div>',
                                                            '</div>'
                                                            )
                                                            );
                                                            headers.refresh();
                                                            var list = component.down('#mainList');


                                                            //list.setStore(Ext.getStore('products.ecomMain'));


                                                            list.setItemTpl(
                                                            Ext.create('Ext.XTemplate',
                                                            '<div class="x-rm-listtpl-main pointerCursor fontDefination" style="{[this.getSelectedColor(values)]}">',
                                                            '    <div style="width: 4%;">',
                                                            '        <div style="width: 19px; height:19px;"    {[RMdatalink.util.globalConfig.getListAttrForDelHandling()]} ="onCartTap" ></div>',
                                                            '    </div>',
                                                            '    <div class="rightBorderDiv" style="width: 6%;"> {module_listed_order}</div>',
                                                            '    <div class="rightBorderDiv boldText" style="width: 14%;">{module_skus}</div>',
                                                            '    <div class="rightBorderDiv boldText" style="width: 14%;">{module_name}</div>',
                                                            '    <div class="rightBorderDiv" style="width: 38%;">{module_description}</div>',
                                                            '    <div class="rightBorderDiv" style="width: 10%;text-align: right;padding-right: 1%;">${[formatNum(values.module_standard_price)]}</div>',
                                                            '    <div style="width: 12%;text-align: right;padding-right: 1%;">${[formatNum(values.module_promotional_price)]}</div>',
                                                            '</div>',
                                                            {
                                                                getSelectedColor:function(values){
                                                                    if(values.is_itemtap){
                                                                        return "background-color: #94DCF0;";
                                                                    }else{
                                                                        return "background-color: transparent;" ;
                                                                    }
                                                                }
                                                            }

                                                            )
                                                            );

                                                            // list.setMode("SINGLE");
                                                            //     list.on("select",function(rmProlist, record, eOpts){
                                                            //         RMdatalink.app.getController('RMProController').onProductRMProListSelect(rmProlist, record, eOpts);
                                                            // });

                                                            list.setItemHeight(22);
                                                            list.setMode('MULTI');
                                                            list.addCls('x-rm-rdvendorslist');

                                                            component.addListener('painted' , function(){
                                                                //     var dataToPush = [];
                                                                //     var ecomMainStore = Ext.getStore('products.ecomMain') ;
                                                                //     var data = ecomMainStore.getData();
                                                                //     for( var i =0 ; i < data.all.length ; i++ ){

                                                                //         var record = data.all[i];
                                                                //         console.log(record.data.product_type);
                                                                //         if(record.data.product_type != 1){

                                                                //             dataToPush.push( record.raw );
                                                                //         }
                                                                //     }


                                                                //     var store = list.getStore( );
                                                                //     if( store){
                                                                //         store.setData(dataToPush);
                                                                //     }else if (dataToPush.length){
                                                                //         list.setData(dataToPush);
                                                                //     }

                                                                getItemsOfOnlyECommerceFromEcomStore(component);
                                                            } , this, {

                                                                single:true
                                                            });
                                                        },
                                                        event: 'initialize'
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'label',
                                                cls: [
                                                    'pointerCursor',
                                                    'fieldLbl',
                                                    'onePixTopBottomMargin'
                                                ],
                                                html: 'VIP<img src="resources/images/labelHeader/downArrow.png" style="float: right;"/>',
                                                itemId: 'mylabel144',
                                                listeners: [
                                                    {
                                                        fn: function(component, eOpts) {

                                                            component.element.on('tap',function(){

                                                                var cmp = component.getParent();
                                                                var containerSibling = cmp.down("#productSetupeVipListPanel");
                                                                console.log("COPONENT CLICKED");
                                                                console.log(cmp.getHeight());
                                                                if(  containerSibling.getHidden() ){


                                                                    component.getEl().query('img')[0].src = "resources/images/labelHeader/downArrow.png";
                                                                    containerSibling.setHidden(false);

                                                                }else{


                                                                    containerSibling.setHidden(true);
                                                                    component.getEl().query('img')[0].src = "resources/images/labelHeader/rightArrow.png";
                                                                }

                                                            });
                                                        },
                                                        event: 'initialize'
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'panel',
                                                flex: 3,
                                                cls: 'borderedDiv',
                                                itemId: 'productSetupeVipListPanel',
                                                margin: '0 0 5 0',
                                                layout: 'vbox',
                                                items: [
                                                    {
                                                        xtype: 'listwithheader',
                                                        itemId: 'listwithheader',
                                                        flex: 1
                                                    },
                                                    {
                                                        xtype: 'panel',
                                                        cls: 'onlyTopBorderDiv',
                                                        style: ' background-color: gainsboro;font-weight: bold;',
                                                        layout: 'hbox',
                                                        items: [
                                                            {
                                                                xtype: 'fieldset',
                                                                margin: 0,
                                                                width: '74%',
                                                                layout: 'hbox',
                                                                items: [
                                                                    {
                                                                        xtype: 'textfield',
                                                                        hidden: true,
                                                                        itemId: 'ecomBundlePriceTxtFld',
                                                                        width: '280px',
                                                                        inputCls: 'highlightedColor',
                                                                        label: 'Bundle Price',
                                                                        labelCls: 'highlightedColor',
                                                                        labelWidth: '120px'
                                                                    },
                                                                    {
                                                                        xtype: 'button',
                                                                        cls: 'x-rm-blueBtn',
                                                                        height: '28px',
                                                                        hidden: true,
                                                                        itemId: 'saveecomBundleBtn',
                                                                        margin: '0 5 0 5',
                                                                        text: 'Save Bundle'
                                                                    },
                                                                    {
                                                                        xtype: 'label',
                                                                        cls: 'fontDefination',
                                                                        docked: 'right',
                                                                        html: 'Total price for selected items::',
                                                                        margin: '5 5 5 10',
                                                                        style: 'font-size: 0.75em;'
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'label',
                                                                itemId: 'ecomSumOfStdPriceLbl',
                                                                margin: '5 5 5 5',
                                                                minWidth: '10%',
                                                                style: 'text-align: right;font-size: 0.75em;'
                                                            },
                                                            {
                                                                xtype: 'label',
                                                                itemId: 'ecomSumOfPromoPriceLbl',
                                                                margin: '5 5 5 5',
                                                                minWidth: '10%',
                                                                style: 'text-align: right;font-size: 0.75em;'
                                                            }
                                                        ]
                                                    }
                                                ],
                                                listeners: [
                                                    {
                                                        fn: function(component, eOpts) {




                                                            ////////////////////////////////////////////////////

                                                            var headers = component.down("#headerList");
                                                            headers.setData([{}]);
                                                            headers.setItemTpl(
                                                            Ext.create('Ext.XTemplate',
                                                            '<div class="x-rm-listtpl-main fontDefination" style="border-bottom: 1px solid #9b9b9b; background-color: gainsboro;font-weight: bold;color: #555;">',
                                                            '    <div style="width: 4%;">',
                                                            '        <div style="width: 20px;" data-name="all"></div>',
                                                            '    </div>',
                                                            '    <div class="rightBorderDiv" style="width: 6%;text-align: center;" data-name="module_listed_order">',
                                                            '        index&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                            '    </div>',
                                                            '    <div class="rightBorderDiv" style="width: 14%;" data-name="module_sku">',
                                                            '        SKU&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                            '    </div>',
                                                            '    <div class="rightBorderDiv" style="width: 14%;text-align: center;" data-name="module_name">',
                                                            '        Products/ Add-ons&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                            '    </div>',
                                                            '    <div class="rightBorderDiv" style="width: 38%;text-align: center;" data-name="module_description">',
                                                            '       Description&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                            '    </div>',
                                                            '    <div class="rightBorderDiv" style="width: 10%;text-align: center;" data-name="module_standard_price">',
                                                            '        Std. Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                            '    </div>',
                                                            '    <div style="width: 12%;text-align: center;" data-name="module_promotional_price">',
                                                            '        Promo. Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                            '    </div>',
                                                            '</div>'
                                                            )
                                                            );
                                                            headers.refresh();
                                                            var list = component.down('#mainList');





                                                            list.setItemTpl(
                                                            Ext.create('Ext.XTemplate',
                                                            '<div class="x-rm-listtpl-main pointerCursor fontDefination" style="{[this.getSelectedColor(values)]}">',
                                                            '    <div style="width: 4%;">',
                                                            '        <div style="width: 19px; height:19px;"    {[RMdatalink.util.globalConfig.getListAttrForDelHandling()]} ="onCartTap" ></div>',
                                                            '    </div>',
                                                            '    <div class="rightBorderDiv" style="width: 6%;"> {module_listed_order}</div>',
                                                            '    <div class="rightBorderDiv boldText" style="width: 14%;">{module_skus}</div>',
                                                            '    <div class="rightBorderDiv boldText" style="width: 14%;">{module_name}</div>',
                                                            '    <div class="rightBorderDiv" style="width: 38%;">{module_description}</div>',
                                                            '    <div class="rightBorderDiv" style="width: 10%;text-align: right;padding-right: 1%;">${[formatNum(values.module_standard_price)]}</div>',
                                                            '    <div style="width: 12%;text-align: right;padding-right: 1%;">${[formatNum(values.module_promotional_price)]}</div>',
                                                            '</div>',
                                                            {
                                                                getSelectedColor:function(values){
                                                                    if(values.is_itemtap){
                                                                        return "background-color: #94DCF0;";
                                                                    }else{
                                                                        return "background-color: transparent;" ;
                                                                    }
                                                                }
                                                            }

                                                            )
                                                            );

                                                            // list.setMode("SINGLE");
                                                            //     list.on("select",function(rmProlist, record, eOpts){
                                                            //         RMdatalink.app.getController('RMProController').onProductRMProListSelect(rmProlist, record, eOpts);
                                                            // });

                                                            list.setItemHeight(22);
                                                            list.setMode('MULTI');
                                                            list.addCls('x-rm-rdvendorslist');


                                                            //getItemsOfVIPFromEcomStore
                                                            component.addListener('painted' , function(){
                                                                getItemsOfVIPFromEcomStore( component );
                                                                var list = component.down('#mainList');



                                                            } , this, {

                                                                single:true
                                                            });
                                                        },
                                                        event: 'initialize'
                                                    }
                                                ]
                                            }
                                        ],
                                        listeners: [
                                            {
                                                fn: function(component, eOpts) {
                                                    function onRmProListItemTap(  dataview , index , target , record , e , eOpts  ){

                                                    }
                                                },
                                                event: 'initialize'
                                            }
                                        ]
                                    },
                                    {
                                        xtype: 'button',
                                        handler: function(button, e) {


                                            var form = Ext.ComponentQuery.query('#productecomaddUpdateFrmPanel')[0];
                                            var state;


                                            form.setHidden(! form.getHidden() ) ;

                                            if(form.getHidden()){

                                                button.setIconCls("arrow_left");
                                                state = 0;
                                            }else{

                                                button.setIconCls("arrow_right");
                                                state = 1;
                                                //arrow_down
                                            }


                                            //LoginHandler.config.userDetails.right_naviagtion_panel_state

                                            var stateToSave = state;
                                            var LoginHandler = RMdatalink.app.getController('LoginHandler') ;
                                            var _id = LoginHandler.config.userDetails._id ;

                                            var inhouseMasterStore = Ext.getStore('inhouseMasterStore');











                                            var dataToUpdate = {
                                                right_naviagtion_panel_state:stateToSave
                                            };

                                            LoginHandler.config.userDetails.right_naviagtion_panel_state = stateToSave;
                                            RMdatalink.iwa.rdl.doUpdateCollection(inhouseMasterStore, dataToUpdate , _id, success, error);

                                            function success(){

                                            }

                                            function error(){


                                            }



                                        },
                                        border: '0 0 0 0',
                                        cls: 'borderedDiv',
                                        height: 100,
                                        itemId: 'ecomSetUpHideShowArrowBtn',
                                        margin: '18% 0 0 0',
                                        padding: '0px 0px 0px 0px',
                                        style: 'background:transparent;border-radius: 20px;border-width: 1px !important;',
                                        width: 24,
                                        iconAlign: 'center',
                                        iconCls: 'arrow_right'
                                    },
                                    {
                                        xtype: 'formpanel',
                                        action: 'setScrollBarVisible',
                                        cls: 'x-rm-rdformpanel borderedDiv',
                                        itemId: 'productecomaddUpdateFrmPanel',
                                        margin: '0 5 5 0',
                                        width: '360px',
                                        scrollable: true,
                                        layout: {
                                            type: 'vbox',
                                            align: 'center'
                                        },
                                        items: [
                                            {
                                                xtype: 'fieldset',
                                                itemId: 'ecomProductSetupSideP1',
                                                width: '100%',
                                                items: [
                                                    {
                                                        xtype: 'label',
                                                        labelAction: 'dropDown',
                                                        cls: [
                                                            'fieldLbl',
                                                            'pointerCursor'
                                                        ],
                                                        html: 'Bundle Setup (Add-ons)<img src="resources/images/labelHeader/downArrow.png" style="float: right;"/>',
                                                        itemId: 'mylabel5',
                                                        margin: '0 0 2 0',
                                                        style: 'background-color: gainsboro;font-weight:bold;font-size:0.8em;'
                                                    },
                                                    {
                                                        xtype: 'selectfield',
                                                        itemId: 'ecomPoductBundeleSelectFld',
                                                        margin: 'margin: 0px 0px -3px 0px;',
                                                        width: '98%',
                                                        label: 'Bundle:',
                                                        labelWidth: '80px',
                                                        placeHolder: 'Select Pricing Policy',
                                                        autoSelect: false,
                                                        store: 'ecomProductBundle'
                                                    },
                                                    {
                                                        xtype: 'textfield',
                                                        itemId: 'ecomPoductBundeleTextFld',
                                                        margin: '0px 0px 0px 0',
                                                        width: '98%',
                                                        label: 'Name:',
                                                        labelWidth: '80px'
                                                    },
                                                    {
                                                        xtype: 'textfield',
                                                        isCurrency: true,
                                                        html: '<div style= "margin:-16px 0 0 -12px;font-size:12px;">$</div>',
                                                        itemId: 'ecomPoductBundelePriceTextFld',
                                                        margin: '0 0 0 0',
                                                        width: '60%',
                                                        label: 'Price:',
                                                        labelWidth: '80px'
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        margin: '10 2px 0 80',
                                                        padding: '0 2 0 0',
                                                        layout: {
                                                            type: 'hbox',
                                                            align: 'start'
                                                        },
                                                        items: [
                                                            {
                                                                xtype: 'button',
                                                                handler: function(button, e) {

                                                                    RMdatalink.app.getController('ecomPricingController').updateProductBundle();
                                                                },
                                                                action: 'addNew',
                                                                cls: 'x-rm-blueBtn',
                                                                height: '20px',
                                                                itemId: 'addUpdate',
                                                                width: '80px',
                                                                text: 'Add'
                                                            },
                                                            {
                                                                xtype: 'button',
                                                                handler: function(button, e) {


                                                                    RMdatalink.app.getController('ecomPricingController').deleteProductBundle();
                                                                },
                                                                cls: 'newGrayBtn',
                                                                height: '20px',
                                                                itemId: 'delete',
                                                                margin: '0 5 0 5',
                                                                minHeight: '24px',
                                                                width: '80px',
                                                                pressedCls: 'x-rm-card-actionbtn-pressing',
                                                                text: 'Delete'
                                                            },
                                                            {
                                                                xtype: 'button',
                                                                handler: function(button, e) {

                                                                    RMdatalink.app.getController('ecomPricingController').clearProductBundle();
                                                                },
                                                                cls: [
                                                                    'x-rm-blueBtn',
                                                                    'x-rm-rdopenbtns',
                                                                    'x-rm-smalliconbtns'
                                                                ],
                                                                height: '20px',
                                                                itemId: 'clear',
                                                                margin: '0 4 0 0',
                                                                width: '80px',
                                                                badgeText: '',
                                                                iconAlign: 'center',
                                                                text: 'Clear'
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'fieldset',
                                                itemId: 'ecomProductSetupSideP2',
                                                margin: '0 0 0 0',
                                                width: '100%',
                                                items: [
                                                    {
                                                        xtype: 'label',
                                                        labelAction: 'dropDown',
                                                        cls: [
                                                            'fieldLbl',
                                                            'pointerCursor'
                                                        ],
                                                        html: 'Features Setup<img src="resources/images/labelHeader/downArrow.png" style="float: right;"/>',
                                                        margin: '0 0 2 0',
                                                        style: 'font-size:0.8em;'
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        margin: '0 0 -1px 0',
                                                        width: '98%',
                                                        layout: {
                                                            type: 'hbox',
                                                            align: 'center',
                                                            pack: 'center'
                                                        },
                                                        items: [
                                                            {
                                                                xtype: 'textfield',
                                                                flex: 1,
                                                                itemId: 'prodecomModuleIndexFld',
                                                                width: '98%',
                                                                label: 'Index:',
                                                                labelWidth: '80px'
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                flex: 1,
                                                                itemId: 'ecomSKUTxtFld',
                                                                width: '98%',
                                                                label: 'SKU:',
                                                                labelWidth: '80px'
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'textfield',
                                                        itemId: 'ecomModuleNameTxtFld',
                                                        margin: '0 0 0 0',
                                                        width: '98%',
                                                        label: 'Name:',
                                                        labelWidth: '80px'
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        width: '98%',
                                                        items: [
                                                            {
                                                                xtype: 'textareafield',
                                                                height: '86px',
                                                                itemId: 'ecomModuleDescriptionTxtAreaFld',
                                                                margin: '0 0 3 0',
                                                                width: '100%',
                                                                label: 'Description:',
                                                                labelWidth: '80px'
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'textareafield',
                                                        hidden: true,
                                                        itemId: 'ecomDetailsTxtAreaFld',
                                                        margin: '10 0 2 0',
                                                        width: '98%',
                                                        label: 'Details',
                                                        labelWidth: '110px'
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        width: '98%',
                                                        layout: {
                                                            type: 'hbox',
                                                            align: 'center',
                                                            pack: 'center'
                                                        },
                                                        items: [
                                                            {
                                                                xtype: 'textfield',
                                                                isCurrency: true,
                                                                flex: 1,
                                                                html: '<div style= "margin:-16px 0 0 -12px;font-size:12px;">$</div>',
                                                                itemId: 'ecomStandardPriceTxtFld',
                                                                width: '98%',
                                                                label: 'Price Std:',
                                                                labelWidth: '80px'
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                isCurrency: true,
                                                                flex: 1,
                                                                html: '<div style= "margin:-16px 0 0 -12px;font-size:12px;">$</div>',
                                                                itemId: 'ecomPromotionalPriceTxtFld',
                                                                width: '98%',
                                                                label: 'Promo:',
                                                                labelWidth: '80px'
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        width: '98%',
                                                        layout: 'hbox',
                                                        items: [
                                                            {
                                                                xtype: 'textfield',
                                                                flex: 1,
                                                                hidden: true,
                                                                itemId: 'ecomModuleQuantityTxtFld',
                                                                width: '30%',
                                                                label: 'Quantity:',
                                                                labelWidth: '80px'
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                flex: 1,
                                                                itemId: 'prodecomModuleProductIdFld',
                                                                margin: '0 1 0 1',
                                                                width: '35%',
                                                                label: 'Product Id:',
                                                                labelWidth: '80px'
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'panel',
                                                        layout: 'hbox',
                                                        items: [
                                                            {
                                                                xtype: 'label',
                                                                html: 'Charges:',
                                                                style: 'font-weight: 700; font-size: 11px; height: 24px; padding: 4px 0px 0px 8px; width: 80px !important; text-overflow: ellipsis; font-family: \'OpenSans\'; font-size: 70% !important; color: #555555 !important; font-weight: bold;margin-left:2px; ',
                                                                width: '80px'
                                                            },
                                                            {
                                                                xtype: 'formpanel',
                                                                flex: 1,
                                                                height: '35px',
                                                                itemId: 'chargeMeOtcFormPanel',
                                                                width: '100%',
                                                                scrollable: false,
                                                                layout: {
                                                                    type: 'hbox',
                                                                    align: 'start'
                                                                },
                                                                items: [
                                                                    {
                                                                        xtype: 'radiofield',
                                                                        cls: 'removeBorderCheckBox',
                                                                        margin: '',
                                                                        style: 'margin-left:5px;',
                                                                        width: '100px',
                                                                        label: 'OTC',
                                                                        labelAlign: 'right',
                                                                        labelWidth: '80px',
                                                                        name: 'charge_mode',
                                                                        value: '1'
                                                                    },
                                                                    {
                                                                        xtype: 'radiofield',
                                                                        cls: 'removeBorderCheckBox',
                                                                        width: '100px',
                                                                        label: 'Monthly',
                                                                        labelAlign: 'right',
                                                                        labelWidth: '80px',
                                                                        name: 'charge_mode',
                                                                        value: '2',
                                                                        checked: true
                                                                    },
                                                                    {
                                                                        xtype: 'radiofield',
                                                                        flex: 1,
                                                                        cls: 'removeBorderCheckBox',
                                                                        hidden: true,
                                                                        label: '3 Month',
                                                                        labelWidth: '80px',
                                                                        name: 'charge_mode',
                                                                        value: '3'
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'panel',
                                                        layout: 'hbox',
                                                        items: [
                                                            {
                                                                xtype: 'label',
                                                                html: 'Product:',
                                                                style: 'font-weight: 700; font-size: 11px; height: 24px; padding: 4px 0px 0px 8px; width: 80px !important; text-overflow: ellipsis; font-family: \'OpenSans\'; font-size: 70% !important; color: #555555 !important; font-weight: bold;margin-left:2px;',
                                                                width: '80px'
                                                            },
                                                            {
                                                                xtype: 'formpanel',
                                                                flex: 1,
                                                                height: '35px',
                                                                itemId: 'productTypeFormE_Comm',
                                                                width: '100%',
                                                                scrollable: false,
                                                                layout: {
                                                                    type: 'hbox',
                                                                    align: 'start'
                                                                },
                                                                items: [
                                                                    {
                                                                        xtype: 'radiofield',
                                                                        cls: 'removeBorderCheckBox',
                                                                        style: 'margin-left:5px;',
                                                                        width: '100px',
                                                                        label: 'VIP',
                                                                        labelAlign: 'right',
                                                                        labelWidth: '80px',
                                                                        name: 'product_type',
                                                                        value: '1'
                                                                    },
                                                                    {
                                                                        xtype: 'radiofield',
                                                                        cls: 'removeBorderCheckBox',
                                                                        width: '100px',
                                                                        label: 'Ecom',
                                                                        labelAlign: 'right',
                                                                        labelWidth: '80px',
                                                                        name: 'product_type',
                                                                        value: '2',
                                                                        checked: true
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        margin: '10 2px 0 80',
                                                        layout: {
                                                            type: 'hbox',
                                                            align: 'start'
                                                        },
                                                        items: [
                                                            {
                                                                xtype: 'button',
                                                                handler: function(button, e) {
                                                                    console.log("CLICKED");

                                                                    return;

                                                                    if(eCommerceListSetupSelecteDRecord){

                                                                    }
                                                                    else{
                                                                        return;
                                                                    }

                                                                    var store = Ext.getStore('products.ecomMain');


                                                                    var component = Ext.ComponentQuery.query("#ecomMainListContainer")[0];
                                                                    var list = component.down('#mainList');
                                                                    var record = eCommerceListSetupSelecteDRecord;


                                                                    var chargeMeOtcFormPanel = Ext.ComponentQuery.query("#chargeMeOtcFormPanel")[0];

                                                                    dataToupdate = chargeMeOtcFormPanel.getValues();


                                                                    function updateSuccess(){}
                                                                    function updateError(){}
                                                                    RMdatalink.iwa.rdl.doUpdateCollection(store, dataToupdate , record.get('_id'), updateSuccess, updateError );
                                                                },
                                                                action: 'addNew',
                                                                cls: 'x-rm-blueBtn',
                                                                height: '20px',
                                                                itemId: 'ecomAddModuleBtn',
                                                                margin: '0 0 0 1',
                                                                width: '80px',
                                                                text: 'Add'
                                                            },
                                                            {
                                                                xtype: 'button',
                                                                handler: function(button, e) {

                                                                    RMdatalink.app.getController('DeleteRecords').deleteecom();
                                                                },
                                                                cls: 'newGrayBtn',
                                                                height: '20px',
                                                                itemId: 'delBtn',
                                                                margin: '0 0 0 5',
                                                                minHeight: '24px',
                                                                width: '80px',
                                                                pressedCls: 'x-rm-card-actionbtn-pressing',
                                                                text: 'Delete'
                                                            },
                                                            {
                                                                xtype: 'button',
                                                                cls: [
                                                                    'x-rm-blueBtn',
                                                                    'x-rm-rdopenbtns',
                                                                    'x-rm-smalliconbtns'
                                                                ],
                                                                height: '20px',
                                                                itemId: 'ecomNewResetBtn',
                                                                margin: '0 5 0 5',
                                                                width: '80px',
                                                                badgeText: '',
                                                                iconAlign: 'center',
                                                                text: 'Clear'
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'fieldset',
                                                border: '1 1 1 1',
                                                itemId: 'ecomDiscountListPanel',
                                                margin: '0 0 0 0',
                                                width: '100%',
                                                layout: 'vbox',
                                                items: [
                                                    {
                                                        xtype: 'label',
                                                        labelAction: 'dropDown',
                                                        cls: [
                                                            'fieldLbl',
                                                            'pointerCursor'
                                                        ],
                                                        html: 'Advance Payment Benefits<img src="resources/images/labelHeader/downArrow.png" style="float: right;"/>',
                                                        itemId: 'mylabel6',
                                                        margin: '0 0 2 0',
                                                        style: 'background-color: gainsboro;font-weight:bold;font-size:0.8em;'
                                                    },
                                                    {
                                                        xtype: 'listwithheader',
                                                        height: '110px',
                                                        itemId: 'ecomAdvancePaymentDiscountList',
                                                        margin: '0 0 0 0'
                                                    },
                                                    {
                                                        xtype: 'panel',
                                                        layout: 'hbox',
                                                        items: [
                                                            {
                                                                xtype: 'label',
                                                                html: 'Display In VIP:',
                                                                style: 'font-weight: 700; font-size: 11px; height: 24px; padding: 6px 0px 0px 8px; width: 80px !important; text-overflow: ellipsis; font-family: \'OpenSans\'; font-size: 70% !important; color: #555555 !important; font-weight: bold;',
                                                                width: '80px'
                                                            },
                                                            {
                                                                xtype: 'formpanel',
                                                                flex: 1,
                                                                height: '35px',
                                                                itemId: 'displayInVIPPanel',
                                                                width: '100%',
                                                                scrollable: false,
                                                                layout: {
                                                                    type: 'hbox',
                                                                    align: 'start'
                                                                },
                                                                items: [
                                                                    {
                                                                        xtype: 'radiofield',
                                                                        cls: 'removeBorderCheckBox',
                                                                        margin: '',
                                                                        style: 'margin-left:5px;',
                                                                        width: '100px',
                                                                        label: 'Yes',
                                                                        labelAlign: 'right',
                                                                        labelWidth: '80px',
                                                                        name: 'displayvalue',
                                                                        value: '1'
                                                                    },
                                                                    {
                                                                        xtype: 'radiofield',
                                                                        cls: 'removeBorderCheckBox',
                                                                        width: '100px',
                                                                        label: 'No',
                                                                        labelAlign: 'right',
                                                                        labelWidth: '80px',
                                                                        name: 'displayvalue',
                                                                        value: '2',
                                                                        checked: true
                                                                    }
                                                                ],
                                                                listeners: [
                                                                    {
                                                                        fn: function(component, eOpts) {
                                                                            component.addListener("painted" , function(){

                                                                                var values = component.getValues() || {};

                                                                                values.displayvalue = RMdatalink.app.getController('BillingDetailsController').config.pricingData[2].displayVIPAdvancePaymentBenfit;
                                                                                component.setValues(values);
                                                                            } , this);
                                                                        },
                                                                        event: 'initialize'
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        hidden: true,
                                                        margin: '10 2px 10 80',
                                                        padding: '0 2 0 0',
                                                        layout: {
                                                            type: 'hbox',
                                                            align: 'start'
                                                        },
                                                        items: [
                                                            {
                                                                xtype: 'button',
                                                                action: 'addNew',
                                                                cls: 'x-rm-blueBtn',
                                                                height: '20px',
                                                                itemId: 'ecomDiscountSaveBtn',
                                                                width: '80px',
                                                                text: 'Update'
                                                            },
                                                            {
                                                                xtype: 'button',
                                                                cls: 'newGrayBtn',
                                                                height: '20px',
                                                                margin: '0 5 0 5',
                                                                minHeight: '24px',
                                                                width: '80px',
                                                                pressedCls: 'x-rm-card-actionbtn-pressing',
                                                                text: 'Delete'
                                                            },
                                                            {
                                                                xtype: 'button',
                                                                handler: function(button, e) {

                                                                },
                                                                cls: [
                                                                    'x-rm-blueBtn',
                                                                    'x-rm-rdopenbtns',
                                                                    'x-rm-smalliconbtns'
                                                                ],
                                                                height: '20px',
                                                                margin: '0 4 0 0',
                                                                width: '80px',
                                                                badgeText: '',
                                                                iconAlign: 'center',
                                                                text: 'Clear'
                                                            }
                                                        ]
                                                    }
                                                ],
                                                listeners: [
                                                    {
                                                        fn: function(component, eOpts) {

                                                            var headers = component.down("#headerList");
                                                            headers.setData([{}]);
                                                            headers.setItemTpl(
                                                            Ext.create('Ext.XTemplate',
                                                            '<div class="x-rm-listtpl-main">',

                                                            '    <div style="width: 20%;" data-name="discount_name">',
                                                            '        Name&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                            '    </div>',
                                                            '    <div style="width: 15%;" data-name="discount_value">',
                                                            '        Discount&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                            '    </div>',

                                                            '</div>'
                                                            )
                                                            );
                                                            headers.refresh();
                                                            headers.setHidden(true);

                                                            var list = component.down('#mainList');
                                                            list.setStore( Ext.getStore('products.ecomDiscountStore') );
                                                            list.setItemTpl(
                                                            Ext.create('Ext.XTemplate',
                                                            '<div class="x-rm-listtpl-main pointerCursor">',

                                                            '    <div style="width: 74%;padding-left: 15%;" >{discount_name}</div>',
                                                            '    <div style="width: 5%;">%</div>',

                                                            '<div style="width: 15%;text-align: center;">',
                                                            '<div style="" class="x-rm-rdinlinecmt prodDlSetupFlds" data-id="{id}" >',
                                                            ' {discount_value}</div>',
                                                            '</div>',


                                                            '</div>'
                                                            )
                                                            );

                                                            list.setMode("SINGLE");

                                                            //    list.on("select",function(discountList, record, eOpts){
                                                            //         RMdatalink.app.getController('DatalinkController').onDatalinkDiscountSelect(discountList, record);
                                                            //     });
                                                        },
                                                        event: 'initialize'
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'fieldset',
                                                hidden: true,
                                                itemId: 'ecomProductSetupSideP3',
                                                width: '100%',
                                                layout: {
                                                    type: 'vbox',
                                                    align: 'center',
                                                    pack: 'center'
                                                },
                                                items: [
                                                    {
                                                        xtype: 'label',
                                                        labelAction: 'dropDown',
                                                        cls: [
                                                            'fieldLbl',
                                                            'pointerCursor'
                                                        ],
                                                        html: 'Charge Mode<img src="resources/images/labelHeader/downArrow.png" style="float: right;"/>',
                                                        itemId: 'mylabel5',
                                                        margin: '0 0 2 0',
                                                        style: 'background-color: gainsboro;font-weight:bold;font-size:0.8em;',
                                                        width: '100%'
                                                    },
                                                    {
                                                        xtype: 'button',
                                                        handler: function(button, e) {
                                                            console.log("CLICKED");



                                                            if(eCommerceListSetupSelecteDRecord){

                                                            }
                                                            else{
                                                                return;
                                                            }
                                                            var store = Ext.getStore('products.ecomMain');


                                                            var component = Ext.ComponentQuery.query("#ecomMainListContainer")[0];
                                                            var list = component.down('#mainList');
                                                            var record = eCommerceListSetupSelecteDRecord;

                                                            var chargeMeOtcFormPanel = Ext.ComponentQuery.query("#chargeMeOtcFormPanel")[0];

                                                            dataToupdate = chargeMeOtcFormPanel.getValues();


                                                            function updateSuccess(){}
                                                            function updateError(){}
                                                            RMdatalink.iwa.rdl.doUpdateCollection(store, dataToupdate , record.get('_id'), updateSuccess, updateError );
                                                        },
                                                        action: 'addNew',
                                                        cls: 'x-rm-blueBtn',
                                                        height: '20px',
                                                        hidden: false,
                                                        itemId: 'addUpdate',
                                                        width: '80px',
                                                        text: 'Update'
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        margin: '10 2px 0 80',
                                                        padding: '0 2 0 0',
                                                        layout: {
                                                            type: 'hbox',
                                                            align: 'start'
                                                        }
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                xtype: 'container',
                                actionInit: 'containerInit',
                                title: 'Vendor Pricing',
                                itemId: 'productsecomPricingTab',
                                layout: 'hbox',
                                scrollable: false,
                                items: [
                                    {
                                        xtype: 'pricinglistcontainer',
                                        cls: 'ecommercePricingListCls',
                                        itemId: 'ecomListItemID',
                                        flex: 1
                                    },
                                    {
                                        xtype: 'button',
                                        handler: function(button, e) {

                                            var form = Ext.ComponentQuery.query('#ecompricingPolicyTab1')[0];
                                            var state;
                                            form.setHidden(! form.getHidden() ) ;

                                            if(form.getHidden()){

                                                button.setIconCls("arrow_left");
                                                state = 0;
                                            }else{

                                                button.setIconCls("arrow_right");
                                                state = 1;
                                                //arrow_down
                                            }

                                            var stateToSave = state;
                                            var LoginHandler = RMdatalink.app.getController('LoginHandler') ;
                                            var _id = LoginHandler.config.userDetails._id ;

                                            var inhouseMasterStore = Ext.getStore('inhouseMasterStore');











                                            var dataToUpdate = {
                                                right_naviagtion_panel_state:stateToSave
                                            };

                                            LoginHandler.config.userDetails.right_naviagtion_panel_state = stateToSave;
                                            RMdatalink.iwa.rdl.doUpdateCollection(inhouseMasterStore, dataToUpdate , _id, success, error);

                                            function success(){

                                            }

                                            function error(){


                                            }

                                        },
                                        border: '0 0 0 0',
                                        cls: 'borderedDiv',
                                        height: 100,
                                        itemId: 'ecomSetUpHideShowArrowBtn',
                                        margin: '18% 0 0 0',
                                        padding: '0px 0px 0px 0px',
                                        style: 'background:transparent;border-radius: 20px;border-width: 1px !important;',
                                        width: 24,
                                        iconAlign: 'center',
                                        iconCls: 'arrow_right'
                                    },
                                    {
                                        xtype: 'formpanel',
                                        actionInit: 'containerInit',
                                        action: 'setScrollBarVisible',
                                        cls: [
                                            'x-rm-rdformpanel',
                                            'borderedDiv'
                                        ],
                                        itemId: 'ecompricingPolicyTab1',
                                        margin: '0 0 2 2',
                                        padding: '0 0 2 0',
                                        ui: '',
                                        width: '340px',
                                        layout: 'vbox',
                                        scrollable: 'vertical',
                                        items: [
                                            {
                                                xtype: 'button',
                                                handler: function(button, e) {


                                                    var DlVendorPricingSetUp = null ;

                                                    if(Ext.ComponentQuery.query("#ecomVendorPricingSetUp")[0])
                                                    {

                                                        DlVendorPricingSetUp = Ext.ComponentQuery.query("#ecomVendorPricingSetUp")[0];

                                                    }else{

                                                        DlVendorPricingSetUp = Ext.widget('ecomVendorPricingSetUp');
                                                    }


                                                    DlVendorPricingSetUp.showBy(button);
                                                },
                                                cls: 'newGrayBtn',
                                                height: '24px',
                                                maxHeight: '24px',
                                                minHeight: '24px',
                                                text: 'Policy Setup'
                                            },
                                            {
                                                xtype: 'fieldset',
                                                cls: 'fieldSetCls',
                                                height: '26px',
                                                itemId: 'ecomVendorBundleSetupPanel',
                                                padding: '0 0 4 0',
                                                width: '100%',
                                                items: [
                                                    {
                                                        xtype: 'label',
                                                        labelAction: 'dropDown',
                                                        cls: [
                                                            'fieldLbl',
                                                            'pointerCursor'
                                                        ],
                                                        html: 'Bundle Setup (Vendors)<img src="resources/images/labelHeader/rightArrow.png" style="float: right;"/>',
                                                        itemId: 'mylabel5',
                                                        margin: '1 0 1 0',
                                                        style: 'background-color: gainsboro;font-weight:bold;font-size:0.8em;'
                                                    },
                                                    {
                                                        xtype: 'selectfield',
                                                        itemId: 'ecomVendorBundleSelectFld',
                                                        margin: 'margin: 0px 0px -3px 0px;',
                                                        width: '98%',
                                                        label: 'Bundle:',
                                                        labelWidth: '80px',
                                                        placeHolder: 'Select Pricing Policy',
                                                        autoSelect: false,
                                                        store: 'ecomVendors'
                                                    },
                                                    {
                                                        xtype: 'textfield',
                                                        itemId: 'ecomVendorBundleTxtFld',
                                                        margin: '0px 0px -1px 0',
                                                        width: '98%',
                                                        label: 'Name:',
                                                        labelWidth: '80px'
                                                    },
                                                    {
                                                        xtype: 'textfield',
                                                        isCurrency: true,
                                                        html: '<div style= "margin:-16px 0 0 -12px;font-size:12px;">$</div>',
                                                        itemId: 'ecomVendorPriceFld',
                                                        margin: '0 0 0 0',
                                                        width: '60%',
                                                        label: 'Price:',
                                                        labelWidth: '80px'
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        margin: '10 2px 0 80',
                                                        padding: '0 2 0 0',
                                                        layout: {
                                                            type: 'hbox',
                                                            align: 'start'
                                                        },
                                                        items: [
                                                            {
                                                                xtype: 'button',
                                                                handler: function(button, e) {
                                                                    RMdatalink.app.getController('ecomPricingController').updateVendorBundle();
                                                                },
                                                                action: 'addNew',
                                                                cls: 'x-rm-blueBtn',
                                                                height: '20px',
                                                                itemId: 'addUpdate',
                                                                width: '80px',
                                                                text: 'Add'
                                                            },
                                                            {
                                                                xtype: 'button',
                                                                handler: function(button, e) {
                                                                    RMdatalink.app.getController('ecomPricingController').deleteVendorBundle();
                                                                },
                                                                cls: 'newGrayBtn',
                                                                height: '20px',
                                                                itemId: 'delete',
                                                                margin: '0 5 0 5',
                                                                minHeight: '24px',
                                                                width: '80px',
                                                                pressedCls: 'x-rm-card-actionbtn-pressing',
                                                                text: 'Delete'
                                                            },
                                                            {
                                                                xtype: 'button',
                                                                handler: function(button, e) {
                                                                    RMdatalink.app.getController('ecomPricingController').clearVendorBundle();
                                                                },
                                                                cls: [
                                                                    'x-rm-blueBtn',
                                                                    'x-rm-rdopenbtns',
                                                                    'x-rm-smalliconbtns'
                                                                ],
                                                                height: '20px',
                                                                itemId: 'clear',
                                                                margin: '0 4 0 0',
                                                                width: '80px',
                                                                badgeText: '',
                                                                iconAlign: 'center',
                                                                text: 'Clear'
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'fieldset',
                                                cls: 'fieldSetCls',
                                                height: '26px',
                                                itemId: 'ecomVdrPricingbyVendorsPanel',
                                                style: ' border-bottom: 1px solid gainsboro;',
                                                width: '100%',
                                                items: [
                                                    {
                                                        xtype: 'label',
                                                        labelAction: 'dropDown',
                                                        cls: [
                                                            'fieldLbl',
                                                            'pointerCursor'
                                                        ],
                                                        html: 'Pricing Setup (Vendors)<img src="resources/images/labelHeader/rightArrow.png" style="float: right;"/>',
                                                        itemId: 'mylabel6',
                                                        style: 'background-color: gainsboro;font-weight:bold;font-size:0.8em;'
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        margin: '0 0 0 0',
                                                        layout: {
                                                            type: 'hbox',
                                                            align: 'start'
                                                        },
                                                        items: [
                                                            {
                                                                xtype: 'fieldset',
                                                                height: '48px',
                                                                margin: '0 0 0 0',
                                                                width: '100%',
                                                                layout: 'vbox',
                                                                items: [
                                                                    {
                                                                        xtype: 'selectfield',
                                                                        itemId: 'ecompolicySelectVendors',
                                                                        label: 'Pricing Policy:',
                                                                        autoSelect: false,
                                                                        store: 'ecomPricingVendors'
                                                                    },
                                                                    {
                                                                        xtype: 'textfield',
                                                                        flex: 1,
                                                                        itemId: 'policyText',
                                                                        label: 'Name:'
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'fieldset',
                                                                margin: '0 0 0 20',
                                                                padding: '0 4 0 0',
                                                                layout: 'vbox'
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        margin: '1 0 1 0',
                                                        padding: '0 2 0 0',
                                                        width: '98%',
                                                        layout: {
                                                            type: 'hbox',
                                                            align: 'start',
                                                            pack: 'center'
                                                        },
                                                        items: [
                                                            {
                                                                xtype: 'button',
                                                                handler: function(button, e) {
                                                                    RMdatalink.app.getController('ecomPricingController').updateVendorPricing();
                                                                },
                                                                action: 'addNew',
                                                                cls: 'x-rm-blueBtn',
                                                                height: '20px',
                                                                itemId: 'addUpdate',
                                                                margin: '0 0 0 20',
                                                                width: '80px',
                                                                text: 'Add'
                                                            },
                                                            {
                                                                xtype: 'button',
                                                                handler: function(button, e) {
                                                                    //RMdatalink.app.getController('ecomPricingController').deleteSkuImgs();
                                                                },
                                                                cls: 'newGrayBtn',
                                                                height: '20px',
                                                                itemId: 'delete',
                                                                margin: '0 0 0 20',
                                                                minHeight: '24px',
                                                                width: '80px',
                                                                pressedCls: 'x-rm-card-actionbtn-pressing',
                                                                text: 'Delete'
                                                            },
                                                            {
                                                                xtype: 'button',
                                                                handler: function(button, e) {

                                                                    var form = Ext.ComponentQuery.query('#ecomVdrPricingbyVendorsPanel')[0] ;
                                                                    form.down('#policyText').setValue("");


                                                                    form.down('#addUpdate').setText("Add");

                                                                    form.down('#ecompolicySelectVendors').reset();
                                                                },
                                                                cls: [
                                                                    'x-rm-blueBtn',
                                                                    'x-rm-rdopenbtns',
                                                                    'x-rm-smalliconbtns'
                                                                ],
                                                                height: '20px',
                                                                itemId: 'clear',
                                                                margin: '0 0 0 20',
                                                                width: '80px',
                                                                badgeText: '',
                                                                iconAlign: 'center',
                                                                text: 'Clear'
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'fieldset',
                                                cls: 'fieldSetCls',
                                                width: '100%',
                                                layout: 'vbox',
                                                items: [
                                                    {
                                                        xtype: 'label',
                                                        labelAction: 'dropDown1',
                                                        cls: [
                                                            'fieldLbl',
                                                            'pointerCursor'
                                                        ],
                                                        html: 'Pricing Setup (SKU + Images)<img src="resources/images/labelHeader/rightArrow.png" style="float: right;"/>',
                                                        itemId: 'mylabel6',
                                                        margin: '0 0 1 0',
                                                        style: 'background-color: gainsboro;font-weight:bold;font-size:0.8em;',
                                                        width: '100%',
                                                        listeners: [
                                                            {
                                                                fn: function(component, eOpts) {

                                                                    component.element.on('tap',function(){
                                                                        var cmp = component.getParent().getParent()  ;
                                                                        if(cmp.down('#cmp1').getHidden() || component.getParent().getHeight() == 26){
                                                                            cmp.down('#cmp1').setHidden(false);
                                                                            cmp.down('#ecompricingPolicy1stList').setHidden(false);
                                                                            // component.getParent().setHeight("auto"); //
                                                                            component.getParent().getEl().query('img')[0].src = "resources/images/labelHeader/downArrow.png";
                                                                        }else{

                                                                            cmp.down('#cmp1').setHidden(true);
                                                                            cmp.down('#ecompricingPolicy1stList').setHidden(true);
                                                                            //  component.getParent().setHeight(26);
                                                                            component.getParent().getEl().query('img')[0].src = "resources/images/labelHeader/rightArrow.png";
                                                                        }

                                                                    }) ;
                                                                },
                                                                event: 'initialize'
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'formpanel',
                                                        cls: 'x-rm-rdformpanel',
                                                        height: '30px',
                                                        hidden: true,
                                                        itemId: 'cmp1',
                                                        scrollable: false,
                                                        items: [
                                                            {
                                                                xtype: 'selectfield',
                                                                centered: true,
                                                                itemId: 'ecompricingPolicySkuIncrementSelectFld',
                                                                label: 'Pricing Policy:',
                                                                placeHolder: 'Select Pricing Policy',
                                                                autoSelect: false,
                                                                store: 'ecomVdPricingSkuImgs'
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'listwithheader',
                                                height: '350px',
                                                hidden: true,
                                                itemId: 'ecompricingPolicy1stList'
                                            },
                                            {
                                                xtype: 'fieldset',
                                                cls: 'fieldSetCls',
                                                width: '100%',
                                                layout: 'vbox',
                                                items: [
                                                    {
                                                        xtype: 'label',
                                                        labelAction: 'dropDown1',
                                                        cls: [
                                                            'fieldLbl',
                                                            'pointerCursor'
                                                        ],
                                                        html: 'Pricing Setup (SKU + Images + Addl Images)<img src="resources/images/labelHeader/rightArrow.png" style="float: right;"/>',
                                                        itemId: 'mylabel6',
                                                        margin: '0 0 1 0',
                                                        style: 'background-color: gainsboro;font-weight:bold;font-size:0.8em;',
                                                        width: '100%',
                                                        listeners: [
                                                            {
                                                                fn: function(component, eOpts) {

                                                                    component.element.on('tap',function(){
                                                                        var cmp = component.getParent().getParent()  ;
                                                                        if(cmp.down('#cmp3').getHidden() || component.getParent().getHeight() == 26){
                                                                            cmp.down('#cmp3').setHidden(false);
                                                                            cmp.down('#ecompricingPolicySkuImgsAddImgsListPnl').setHidden(false);
                                                                            // component.getParent().setHeight("auto"); //
                                                                            component.getParent().getEl().query('img')[0].src = "resources/images/labelHeader/downArrow.png";
                                                                        }else{

                                                                            cmp.down('#cmp3').setHidden(true);
                                                                            cmp.down('#ecompricingPolicySkuImgsAddImgsListPnl').setHidden(true);
                                                                            //  component.getParent().setHeight(26);
                                                                            component.getParent().getEl().query('img')[0].src = "resources/images/labelHeader/rightArrow.png";
                                                                        }

                                                                    }) ;
                                                                },
                                                                event: 'initialize'
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'formpanel',
                                                        cls: 'x-rm-rdformpanel',
                                                        height: '30px',
                                                        hidden: true,
                                                        itemId: 'cmp3',
                                                        scrollable: false,
                                                        items: [
                                                            {
                                                                xtype: 'selectfield',
                                                                centered: true,
                                                                itemId: 'ecompricingPolicySkuAddlImgsIncrementSelectFld',
                                                                label: 'Pricing Policy:',
                                                                placeHolder: 'Select Pricing Policy',
                                                                autoSelect: false,
                                                                store: 'ecomVdPricingSkuImgsAddlImages'
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'listwithheader',
                                                height: '350px',
                                                hidden: true,
                                                itemId: 'ecompricingPolicySkuImgsAddImgsListPnl'
                                            },
                                            {
                                                xtype: 'fieldset',
                                                cls: 'fieldSetCls',
                                                width: '100%',
                                                layout: 'vbox',
                                                items: [
                                                    {
                                                        xtype: 'label',
                                                        labelAction: 'dropDown1',
                                                        cls: [
                                                            'fieldLbl',
                                                            'pointerCursor'
                                                        ],
                                                        html: 'Discount Setup (Vendors)<img src="resources/images/labelHeader/rightArrow.png" style="float: right;"/>',
                                                        itemId: 'mylabel7',
                                                        margin: '0 0 1 0',
                                                        style: 'background-color: gainsboro;font-weight:bold;font-size:0.8em;',
                                                        width: '100%',
                                                        listeners: [
                                                            {
                                                                fn: function(component, eOpts) {

                                                                    component.element.on('tap',function(){

                                                                        var cmp = component.getParent().getParent()  ;

                                                                        if(cmp.down('#cmp2').getHidden() || component.getParent().getHeight() == 26){
                                                                            cmp.down('#cmp2').setHidden(false);
                                                                            cmp.down('#ecompricingPolicy2ndList').setHidden(false);
                                                                            // component.getParent().setHeight("auto"); //
                                                                            component.getParent().getEl().query('img')[0].src = "resources/images/labelHeader/downArrow.png";
                                                                        }else{

                                                                            cmp.down('#cmp2').setHidden(true);
                                                                            cmp.down('#ecompricingPolicy2ndList').setHidden(true);
                                                                            //  component.getParent().setHeight(26);
                                                                            component.getParent().getEl().query('img')[0].src = "resources/images/labelHeader/rightArrow.png";
                                                                        }

                                                                    }) ;
                                                                },
                                                                event: 'initialize'
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'formpanel',
                                                        cls: 'x-rm-rdformpanel',
                                                        height: '30px',
                                                        hidden: true,
                                                        itemId: 'cmp2',
                                                        scrollable: false,
                                                        items: [
                                                            {
                                                                xtype: 'selectfield',
                                                                centered: true,
                                                                itemId: 'ecomDiscountPolicyVendorsIncrementSelectFld',
                                                                label: 'Discount Policy:',
                                                                placeHolder: 'Select Discount Policy',
                                                                autoSelect: false,
                                                                store: 'ecomVdPricingVdrDiscount'
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'listwithheader',
                                                height: '350px',
                                                hidden: true,
                                                itemId: 'ecompricingPolicy2ndList'
                                            },
                                            {
                                                xtype: 'fieldset',
                                                cls: 'fieldSetCls',
                                                width: '100%',
                                                layout: 'vbox',
                                                items: [
                                                    {
                                                        xtype: 'label',
                                                        labelAction: 'dropDown1',
                                                        cls: [
                                                            'fieldLbl',
                                                            'pointerCursor'
                                                        ],
                                                        html: 'Discount Setup (SKU)<img src="resources/images/labelHeader/rightArrow.png" style="float: right;"/>',
                                                        itemId: 'mylabel7',
                                                        width: '100%',
                                                        listeners: [
                                                            {
                                                                fn: function(component, eOpts) {
                                                                    component.element.on('tap',function(){

                                                                        var cmp = component.getParent().getParent()  ;

                                                                        if(cmp.down('#cmp4').getHidden() || component.getParent().getHeight() == 26){
                                                                            cmp.down('#cmp4').setHidden(false);
                                                                            cmp.down('#ecompricingPolicySKUDiscountList').setHidden(false);
                                                                            // component.getParent().setHeight("auto"); //
                                                                            component.getParent().getEl().query('img')[0].src = "resources/images/labelHeader/downArrow.png";
                                                                        }else{

                                                                            cmp.down('#cmp4').setHidden(true);
                                                                            cmp.down('#ecompricingPolicySKUDiscountList').setHidden(true);
                                                                            //  component.getParent().setHeight(26);
                                                                            component.getParent().getEl().query('img')[0].src = "resources/images/labelHeader/rightArrow.png";
                                                                        }

                                                                    }) ;
                                                                },
                                                                event: 'initialize'
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'formpanel',
                                                        cls: 'x-rm-rdformpanel',
                                                        height: '30px',
                                                        hidden: true,
                                                        itemId: 'cmp4',
                                                        scrollable: false,
                                                        items: [
                                                            {
                                                                xtype: 'selectfield',
                                                                centered: true,
                                                                itemId: 'ecomDiscountPolicySKUIncrementSelectFld',
                                                                label: 'Discount Policy:',
                                                                placeHolder: 'Select Discount Policy',
                                                                autoSelect: false,
                                                                store: 'ecomVdPricingSKUDiscount'
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'listwithheader',
                                                height: '350px',
                                                hidden: true,
                                                itemId: 'ecompricingPolicySKUDiscountList'
                                            },
                                            {
                                                xtype: 'fieldset',
                                                cls: 'fieldSetCls',
                                                height: '26px',
                                                itemId: 'ecomVendorBundleSetupPanel1',
                                                style: ' border-bottom: 1px solid gainsboro;',
                                                width: '100%',
                                                layout: {
                                                    type: 'vbox',
                                                    align: 'end'
                                                },
                                                items: [
                                                    {
                                                        xtype: 'label',
                                                        labelAction: 'dropDown1',
                                                        cls: [
                                                            'fieldLbl',
                                                            'pointerCursor'
                                                        ],
                                                        docked: 'top',
                                                        html: 'Disable Vendors (VIP) <img src="resources/images/labelHeader/rightArrow.png" style="float: right;"/>',
                                                        itemId: 'mylabel5',
                                                        margin: '1 0 1 0',
                                                        style: 'background-color: gainsboro;font-weight:bold;font-size:0.8em;',
                                                        listeners: [
                                                            {
                                                                fn: function(component, eOpts) {

                                                                    component.element.on('tap',function(){
                                                                        console.log("CLICK ACTIONAED PERFORMED");
                                                                        var cmp = component.getParent();
                                                                        if(cmp.down('#container').getHidden() ){
                                                                            cmp.down('#container').setHidden(false);
                                                                            cmp.setHeight('260px');

                                                                            //         cmp.down('#ecompricingPolicy1stList').setHidden(false);
                                                                            // component.getParent().setHeight("auto"); //
                                                                            component.getEl().query('img')[0].src = "resources/images/labelHeader/downArrow.png";
                                                                        }else{

                                                                            cmp.down('#container').setHidden(true);
                                                                            //         cmp.down('#ecompricingPolicy1stList').setHidden(true);
                                                                            //  component.getParent().setHeight(26);
                                                                            component.getEl().query('img')[0].src = "resources/images/labelHeader/rightArrow.png";
                                                                            cmp.setHeight('26px');
                                                                        }

                                                                    }) ;
                                                                },
                                                                event: 'initialize'
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'container',
                                                        height: '240px',
                                                        hidden: true,
                                                        itemId: 'container',
                                                        items: [
                                                            {
                                                                xtype: 'selectfield',
                                                                centered: true,
                                                                docked: 'top',
                                                                itemId: 'ecomVipVendorsRemove',
                                                                style: 'border:none;',
                                                                width: '100%',
                                                                label: 'Vendors For VIP',
                                                                labelWidth: '180px',
                                                                placeHolder: 'Select Vendor',
                                                                autoSelect: false,
                                                                displayField: 'vendor_name',
                                                                store: 'vendors.Master',
                                                                usePicker: 'auto',
                                                                valueField: '_id',
                                                                listeners: [
                                                                    {
                                                                        fn: function(component, eOpts) {
                                                                            // setTimeout(function(){


                                                                            //     component.setOptions(getArrayFromStore(Ext.getStoretore('vendors.Master')));

                                                                            // }, 10000);
                                                                        },
                                                                        event: 'initialize'
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'container',
                                                                disabled: true,
                                                                height: '35px',
                                                                hidden: true,
                                                                itemId: 'yesNOshouldBeVIpFieldSet',
                                                                layout: 'hbox',
                                                                items: [
                                                                    {
                                                                        xtype: 'checkboxfield',
                                                                        flex: 1,
                                                                        cls: 'checkBoxVipRemoval',
                                                                        itemId: 'noVipRadio',
                                                                        maxWidth: '250px',
                                                                        label: 'Remove',
                                                                        labelWidth: '70px',
                                                                        name: 'select',
                                                                        value: 'false'
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'panel',
                                                                docked: 'bottom',
                                                                items: [
                                                                    {
                                                                        xtype: 'container',
                                                                        hidden: false,
                                                                        margin: '10 2px 0 80',
                                                                        padding: '0 2 0 0',
                                                                        layout: {
                                                                            type: 'hbox',
                                                                            align: 'start'
                                                                        },
                                                                        items: [
                                                                            {
                                                                                xtype: 'button',
                                                                                handler: function(button, e) {
                                                                                    //RMdatalink.app.getController('ecomPricingController').deleteSkuImgs();




                                                                                    var ecomVipVendorsRemove = Ext.ComponentQuery.query("#ecomVipVendorsRemove")[0];
                                                                                    if(ecomVipVendorsRemove){

                                                                                        var vendorId = ecomVipVendorsRemove .getValue();
                                                                                        if(vendorId){


                                                                                            var vendor_id = vendorId ;
                                                                                            var keyOfRetailer = 'prevent_be_vip';
                                                                                            var vendorMaster = Ext.getStore('vendors.Master') ;
                                                                                            var record ;
                                                                                            if(vendor_id)
                                                                                            {
                                                                                                record = findVendorBy_id(vendor_id) ;
                                                                                            }
                                                                                            if(!record){

                                                                                                return ;
                                                                                            }

                                                                                            var noVipRadio = Ext.ComponentQuery.query("#noVipRadio")[0];
                                                                                            var valueofFlage = true;
                                                                                            var rtlrs = valueofFlage;
                                                                                            updateVendor();
                                                                                        }}







                                                                                        //     updateVendor() ;





                                                                                        function updateVendor(){


                                                                                            var dataToupdate = {


                                                                                            };
                                                                                            record.set(keyOfRetailer, rtlrs);
                                                                                            dataToupdate[keyOfRetailer] = rtlrs;
                                                                                            console.error(dataToupdate);
                                                                                            //return;
                                                                                            RMdatalink.iwa.rdl.doUpdateCollection(vendorMaster, dataToupdate , record.get('_id'), updateSuccess, updateError );
                                                                                            handleListOfDEletedVipVendor();

                                                                                        }



                                                                                        function updateSuccess(){

                                                                                            record.set(keyOfRetailer, rtlrs);
                                                                                            Ext.Viewport.setMasked(false);
                                                                                            console.log("vendor updated successfully");
                                                                                        }



                                                                                        function updateError(){

                                                                                            Ext.Viewport.setMasked(false);
                                                                                            console.log("error in updating vendor");

                                                                                        }

                                                                                        function findVendorBy_id(v_id){

                                                                                            var vendors = vendorMaster.data.all ;
                                                                                            var venRec = null ;
                                                                                            for(var j=0;j<vendors.length ; j++){

                                                                                                if(v_id == vendors[j].data._id){

                                                                                                    venRec = vendors[j] ;
                                                                                                    break;
                                                                                                }
                                                                                            }

                                                                                            return venRec;

                                                                                        }

                                                                                        function findVendorBy_name(v_name){

                                                                                            var vendors = vendorMaster.data.all ;
                                                                                            var venRec = null ;
                                                                                            for(var j=0;j<vendors.length ; j++){

                                                                                                if(v_name == vendors[j].data.vendor_name){

                                                                                                    venRec = vendors[j] ;
                                                                                                    break;
                                                                                                }
                                                                                            }

                                                                                            return venRec;

                                                                                        }








                                                                                        // }
                                                                                },
                                                                                action: 'addNew',
                                                                                cls: 'x-rm-blueBtn',
                                                                                height: '20px',
                                                                                itemId: 'addUpdate',
                                                                                width: '80px',
                                                                                text: 'Add'
                                                                            },
                                                                            {
                                                                                xtype: 'button',
                                                                                handler: function(button, e) {
                                                                                    //RMdatalink.app.getController('ecomPricingController').deleteVendorBundle();/




                                                                                    var ecomVipVendorsRemove = Ext.ComponentQuery.query("#ecomVipVendorsRemove")[0];
                                                                                    if(ecomVipVendorsRemove){

                                                                                        var vendorId = ecomVipVendorsRemove .getValue();
                                                                                        if(vendorId){


                                                                                            var vendor_id = vendorId ;
                                                                                            var keyOfRetailer = 'prevent_be_vip';
                                                                                            var vendorMaster = Ext.getStore('vendors.Master') ;
                                                                                            var record ;
                                                                                            if(vendor_id)
                                                                                            {
                                                                                                record = findVendorBy_id(vendor_id) ;
                                                                                            }
                                                                                            if(!record){

                                                                                                return ;
                                                                                            }

                                                                                            var noVipRadio = Ext.ComponentQuery.query("#noVipRadio")[0];
                                                                                            var valueofFlage = false;
                                                                                            var rtlrs = valueofFlage;
                                                                                            updateVendor();
                                                                                        }}







                                                                                        //     updateVendor() ;





                                                                                        function updateVendor(){


                                                                                            var dataToupdate = {


                                                                                            };
                                                                                            record.set(keyOfRetailer, rtlrs);
                                                                                            dataToupdate[keyOfRetailer] = rtlrs;
                                                                                            console.error(dataToupdate);
                                                                                            //return;
                                                                                            RMdatalink.iwa.rdl.doUpdateCollection(vendorMaster, dataToupdate , record.get('_id'), updateSuccess, updateError );
                                                                                            handleListOfDEletedVipVendor();
                                                                                            ecomVipVendorsRemove.setValue(null);

                                                                                        }



                                                                                        function updateSuccess(){

                                                                                            record.set(keyOfRetailer, rtlrs);
                                                                                            Ext.Viewport.setMasked(false);
                                                                                            console.log("vendor updated successfully");
                                                                                        }



                                                                                        function updateError(){

                                                                                            Ext.Viewport.setMasked(false);
                                                                                            console.log("error in updating vendor");

                                                                                        }

                                                                                        function findVendorBy_id(v_id){

                                                                                            var vendors = vendorMaster.data.all ;
                                                                                            var venRec = null ;
                                                                                            for(var j=0;j<vendors.length ; j++){

                                                                                                if(v_id == vendors[j].data._id){

                                                                                                    venRec = vendors[j] ;
                                                                                                    break;
                                                                                                }
                                                                                            }

                                                                                            return venRec;

                                                                                        }

                                                                                        function findVendorBy_name(v_name){

                                                                                            var vendors = vendorMaster.data.all ;
                                                                                            var venRec = null ;
                                                                                            for(var j=0;j<vendors.length ; j++){

                                                                                                if(v_name == vendors[j].data.vendor_name){

                                                                                                    venRec = vendors[j] ;
                                                                                                    break;
                                                                                                }
                                                                                            }

                                                                                            return venRec;

                                                                                        }


                                                                                },
                                                                                cls: 'newGrayBtn',
                                                                                height: '20px',
                                                                                itemId: 'delete',
                                                                                margin: '0 5 0 5',
                                                                                minHeight: '24px',
                                                                                width: '80px',
                                                                                pressedCls: 'x-rm-card-actionbtn-pressing',
                                                                                text: 'Delete'
                                                                            },
                                                                            {
                                                                                xtype: 'button',
                                                                                handler: function(button, e) {
                                                                                    //RMdatalink.app.getController('ecomPricingController').clearVendorBundle();

                                                                                    var deletedVendorFromVIPlist = Ext.ComponentQuery.query("#deletedVendorFromVIPlist")[0];
                                                                                    deletedVendorFromVIPlist.select(0);
                                                                                    var ecomVipVendorsRemove = Ext.ComponentQuery.query("#ecomVipVendorsRemove")[0];
                                                                                    ecomVipVendorsRemove.setValue(null);

                                                                                    var deletedVendorFromVIPlist = Ext.ComponentQuery.query("#deletedVendorFromVIPlist")[0];




                                                                                    var deletedVendorFromVIPlist = Ext.ComponentQuery.query("#deletedVendorFromVIPlist")[0];

                                                                                    var vendor = Ext.getStore('vendors.Master');

                                                                                    var data = getArrayFromStore(vendor);
                                                                                    var arrayToPush = [];

                                                                                    for(var i = 0;i < data.length; i++){

                                                                                        if(data[i].prevent_be_vip){
                                                                                            arrayToPush.push(data[i]);
                                                                                        }
                                                                                    }




                                                                                    var store = deletedVendorFromVIPlist.getStore();
                                                                                    if(store){
                                                                                        //    store.setData(arrayToPush);
                                                                                    }else{
                                                                                        //  deletedVendorFromVIPlist.setData(arrayToPush);
                                                                                    }
                                                                                    deletedVendorFromVIPlist.deselectAll();
                                                                                },
                                                                                cls: [
                                                                                    'x-rm-blueBtn',
                                                                                    'x-rm-rdopenbtns',
                                                                                    'x-rm-smalliconbtns'
                                                                                ],
                                                                                height: '20px',
                                                                                itemId: 'clear',
                                                                                margin: '0 4 0 0',
                                                                                width: '80px',
                                                                                badgeText: '',
                                                                                iconAlign: 'center',
                                                                                text: 'Clear'
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        xtype: 'list',
                                                                        docked: 'bottom',
                                                                        height: '150px',
                                                                        itemId: 'deletedVendorFromVIPlist',
                                                                        width: '100%',
                                                                        itemCls: 'disableVednorListItemCls',
                                                                        itemTpl: [
                                                                            '<div style = "color:rgb(192,0,0); font-weight: bold;" >{vendor_name}</div>'
                                                                        ],
                                                                        itemHeight: 25,
                                                                        listeners: [
                                                                            {
                                                                                fn: function(element, eOpts) {
                                                                                    var deletedVendorFromVIPlist = Ext.ComponentQuery.query("#deletedVendorFromVIPlist")[0];

                                                                                    var vendor = Ext.getStore('vendors.Master');

                                                                                    var data = getArrayFromStore(vendor);
                                                                                    var arrayToPush = [];

                                                                                    for(var i = 0;i < data.length; i++){

                                                                                        if(data[i].prevent_be_vip){
                                                                                            arrayToPush.push(data[i]);
                                                                                        }
                                                                                    }
                                                                                    console.log(arrayToPush);
                                                                                    deletedVendorFromVIPlist.setData(arrayToPush);
                                                                                },
                                                                                event: 'painted'
                                                                            }
                                                                        ]
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'button',
                                                                handler: function(button, e) {
                                                                    //RMdatalink.app.getController('ecomPricingController').deleteSkuImgs();

                                                                    console.log(arguments);


                                                                    var ecomVipVendorsRemove = Ext.ComponentQuery.query("#ecomVipVendorsRemove")[0];
                                                                    if(ecomVipVendorsRemove){

                                                                        var vendorId = ecomVipVendorsRemove .getValue();
                                                                        if(vendorId){


                                                                            var vendor_id = vendorId ;
                                                                            var keyOfRetailer = 'prevent_be_vip';
                                                                            var vendorMaster = Ext.getStore('vendors.Master') ;
                                                                            var record ;
                                                                            if(vendor_id)
                                                                            {
                                                                                record = findVendorBy_id(vendor_id) ;
                                                                            }
                                                                            if(!record){

                                                                                return ;
                                                                            }

                                                                            var noVipRadio = Ext.ComponentQuery.query("#noVipRadio")[0];
                                                                            var valueofFlage = noVipRadio.getChecked();
                                                                            var rtlrs = valueofFlage;
                                                                            updateVendor();
                                                                        }}







                                                                        //     updateVendor() ;





                                                                        function updateVendor(){


                                                                            var dataToupdate = {


                                                                            };
                                                                            //  record.set(keyOfRetailer, rtlrs);
                                                                            dataToupdate[keyOfRetailer] = rtlrs;
                                                                            console.error(dataToupdate);
                                                                            //return;
                                                                            RMdatalink.iwa.rdl.doUpdateCollection(vendorMaster, dataToupdate , record.get('_id'), updateSuccess, updateError );


                                                                        }



                                                                        function updateSuccess(){

                                                                            record.set(keyOfRetailer, rtlrs);
                                                                            Ext.Viewport.setMasked(false);
                                                                            console.log("vendor updated successfully");
                                                                        }



                                                                        function updateError(){

                                                                            Ext.Viewport.setMasked(false);
                                                                            console.log("error in updating vendor");

                                                                        }

                                                                        function findVendorBy_id(v_id){

                                                                            var vendors = vendorMaster.data.all ;
                                                                            var venRec = null ;
                                                                            for(var j=0;j<vendors.length ; j++){

                                                                                if(v_id == vendors[j].data._id){

                                                                                    venRec = vendors[j] ;
                                                                                    break;
                                                                                }
                                                                            }

                                                                            return venRec;

                                                                        }

                                                                        function findVendorBy_name(v_name){

                                                                            var vendors = vendorMaster.data.all ;
                                                                            var venRec = null ;
                                                                            for(var j=0;j<vendors.length ; j++){

                                                                                if(v_name == vendors[j].data.vendor_name){

                                                                                    venRec = vendors[j] ;
                                                                                    break;
                                                                                }
                                                                            }

                                                                            return venRec;

                                                                        }








                                                                        // }
                                                                },
                                                                cls: 'newGrayBtn',
                                                                docked: 'bottom',
                                                                height: '20px',
                                                                hidden: true,
                                                                itemId: 'delete1',
                                                                margin: '0 0 0 20',
                                                                minHeight: '24px',
                                                                width: '80px',
                                                                pressedCls: 'x-rm-card-actionbtn-pressing',
                                                                text: 'Update'
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'fieldset',
                                                cls: 'fieldSetCls',
                                                height: '26px',
                                                itemId: 'ecomVendorDisableVendorFromEcomm',
                                                padding: '0 0 4 0',
                                                width: '100%',
                                                layout: {
                                                    type: 'vbox',
                                                    align: 'end'
                                                },
                                                items: [
                                                    {
                                                        xtype: 'label',
                                                        labelAction: 'dropDown1',
                                                        cls: [
                                                            'fieldLbl',
                                                            'pointerCursor'
                                                        ],
                                                        docked: 'top',
                                                        html: 'Disable Vendors (E-Commerce) <img src="resources/images/labelHeader/rightArrow.png" style="float: right;"/>',
                                                        itemId: 'mylabel5',
                                                        margin: '1 0 1 0',
                                                        style: 'background-color: gainsboro;font-weight:bold;font-size:0.8em;',
                                                        listeners: [
                                                            {
                                                                fn: function(component, eOpts) {

                                                                    component.element.on('tap',function(){
                                                                        console.log("CLICK ACTIONAED PERFORMED");
                                                                        var cmp = component.getParent();
                                                                        if(cmp.down('#containerForEcom').getHidden() ){
                                                                            cmp.down('#containerForEcom').setHidden(false);
                                                                            cmp.setHeight('260px');
                                                                            //         cmp.down('#ecompricingPolicy1stList').setHidden(false);
                                                                            // component.getParent().setHeight("auto"); //
                                                                            component.getEl().query('img')[0].src = "resources/images/labelHeader/downArrow.png";
                                                                        }else{

                                                                            cmp.down('#containerForEcom').setHidden(true);
                                                                            //         cmp.down('#ecompricingPolicy1stList').setHidden(true);
                                                                            //  component.getParent().setHeight(26);
                                                                            cmp.setHeight('26px');
                                                                            component.getEl().query('img')[0].src = "resources/images/labelHeader/rightArrow.png";
                                                                        }

                                                                    }) ;
                                                                },
                                                                event: 'initialize'
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'container',
                                                        height: '240px',
                                                        hidden: true,
                                                        itemId: 'containerForEcom',
                                                        items: [
                                                            {
                                                                xtype: 'selectfield',
                                                                centered: true,
                                                                docked: 'top',
                                                                itemId: 'ecomVendorsRemoveSelect',
                                                                style: 'border:none;',
                                                                width: '100%',
                                                                label: 'Vendors For E-Commerce',
                                                                labelWidth: '180px',
                                                                placeHolder: 'Select Vendor',
                                                                autoSelect: false,
                                                                displayField: 'vendor_name',
                                                                store: 'vendors.Master',
                                                                usePicker: 'auto',
                                                                valueField: '_id'
                                                            },
                                                            {
                                                                xtype: 'panel',
                                                                docked: 'bottom',
                                                                items: [
                                                                    {
                                                                        xtype: 'container',
                                                                        hidden: false,
                                                                        margin: '10 2px 0 80',
                                                                        padding: '0 2 0 0',
                                                                        layout: {
                                                                            type: 'hbox',
                                                                            align: 'start'
                                                                        },
                                                                        items: [
                                                                            {
                                                                                xtype: 'button',
                                                                                handler: function(button, e) {
                                                                                    //RMdatalink.app.getController('ecomPricingController').deleteSkuImgs();




                                                                                    var ecomVipVendorsRemove = Ext.ComponentQuery.query("#ecomVendorsRemoveSelect")[0];
                                                                                    if(ecomVipVendorsRemove){

                                                                                        var vendorId = ecomVipVendorsRemove .getValue();
                                                                                        if(vendorId){


                                                                                            var vendor_id = vendorId ;
                                                                                            var keyOfRetailer = 'prevent_be_ecommerceVendor';
                                                                                            var vendorMaster = Ext.getStore('vendors.Master') ;
                                                                                            var record ;
                                                                                            if(vendor_id)
                                                                                            {
                                                                                                record = findVendorBy_id(vendor_id) ;
                                                                                            }
                                                                                            if(!record){

                                                                                                return ;
                                                                                            }


                                                                                            var valueofFlage = true;
                                                                                            var rtlrs = valueofFlage;
                                                                                            updateVendor();
                                                                                        }}







                                                                                        //     updateVendor() ;





                                                                                        function updateVendor(){


                                                                                            var dataToupdate = {


                                                                                            };
                                                                                            record.set(keyOfRetailer, rtlrs);
                                                                                            dataToupdate[keyOfRetailer] = rtlrs;
                                                                                            console.error(dataToupdate);
                                                                                            //return;
                                                                                            RMdatalink.iwa.rdl.doUpdateCollection(vendorMaster, dataToupdate , record.get('_id'), updateSuccess, updateError );
                                                                                            handleListOfDEletedVipVendor('deletedVendorFromEcommercelist' , keyOfRetailer);

                                                                                        }



                                                                                        function updateSuccess(){

                                                                                            record.set(keyOfRetailer, rtlrs);
                                                                                            Ext.Viewport.setMasked(false);
                                                                                            console.log("vendor updated successfully");
                                                                                        }



                                                                                        function updateError(){

                                                                                            Ext.Viewport.setMasked(false);
                                                                                            console.log("error in updating vendor");

                                                                                        }










                                                                                        // }
                                                                                },
                                                                                action: 'addNew',
                                                                                cls: 'x-rm-blueBtn',
                                                                                height: '20px',
                                                                                itemId: 'addUpdate',
                                                                                width: '80px',
                                                                                text: 'Add'
                                                                            },
                                                                            {
                                                                                xtype: 'button',
                                                                                handler: function(button, e) {
                                                                                    //RMdatalink.app.getController('ecomPricingController').deleteVendorBundle();/




                                                                                    var ecomVipVendorsRemove = Ext.ComponentQuery.query("#ecomVendorsRemoveSelect")[0];
                                                                                    if(ecomVipVendorsRemove){

                                                                                        var vendorId = ecomVipVendorsRemove .getValue();
                                                                                        if(vendorId){


                                                                                            var vendor_id = vendorId ;
                                                                                            var keyOfRetailer = 'prevent_be_ecommerceVendor';
                                                                                            var vendorMaster = Ext.getStore('vendors.Master') ;
                                                                                            var record ;
                                                                                            if(vendor_id)
                                                                                            {
                                                                                                record = findVendorBy_id(vendor_id) ;
                                                                                            }
                                                                                            if(!record){

                                                                                                return ;
                                                                                            }


                                                                                            var valueofFlage = false;
                                                                                            var rtlrs = valueofFlage;
                                                                                            updateVendor();
                                                                                        }}







                                                                                        //     updateVendor() ;





                                                                                        function updateVendor(){


                                                                                            var dataToupdate = {


                                                                                            };
                                                                                            record.set(keyOfRetailer, rtlrs);
                                                                                            dataToupdate[keyOfRetailer] = rtlrs;
                                                                                            console.error(dataToupdate);
                                                                                            //return;
                                                                                            RMdatalink.iwa.rdl.doUpdateCollection(vendorMaster, dataToupdate , record.get('_id'), updateSuccess, updateError );
                                                                                            handleListOfDEletedVipVendor('deletedVendorFromEcommercelist' , keyOfRetailer);
                                                                                            ecomVipVendorsRemove.setValue(null);

                                                                                        }



                                                                                        function updateSuccess(){

                                                                                            record.set(keyOfRetailer, rtlrs);
                                                                                            Ext.Viewport.setMasked(false);
                                                                                            console.log("vendor updated successfully");
                                                                                        }



                                                                                        function updateError(){

                                                                                            Ext.Viewport.setMasked(false);
                                                                                            console.log("error in updating vendor");

                                                                                        }




                                                                                },
                                                                                cls: 'newGrayBtn',
                                                                                height: '20px',
                                                                                itemId: 'delete',
                                                                                margin: '0 5 0 5',
                                                                                minHeight: '24px',
                                                                                width: '80px',
                                                                                pressedCls: 'x-rm-card-actionbtn-pressing',
                                                                                text: 'Delete'
                                                                            },
                                                                            {
                                                                                xtype: 'button',
                                                                                handler: function(button, e) {
                                                                                    //RMdatalink.app.getController('ecomPricingController').clearVendorBundle();

                                                                                    var ecomVipVendorsRemove = Ext.ComponentQuery.query("#ecomVendorsRemoveSelect")[0];
                                                                                    ecomVipVendorsRemove.setValue(null);



                                                                                    var deletedVendorFromVIPlist = Ext.ComponentQuery.query("#deletedVendorFromEcommercelist")[0];

                                                                                    deletedVendorFromVIPlist.deselectAll();
                                                                                },
                                                                                cls: [
                                                                                    'x-rm-blueBtn',
                                                                                    'x-rm-rdopenbtns',
                                                                                    'x-rm-smalliconbtns'
                                                                                ],
                                                                                height: '20px',
                                                                                itemId: 'clear',
                                                                                margin: '0 4 0 0',
                                                                                width: '80px',
                                                                                badgeText: '',
                                                                                iconAlign: 'center',
                                                                                text: 'Clear'
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        xtype: 'list',
                                                                        docked: 'bottom',
                                                                        height: '150px',
                                                                        itemId: 'deletedVendorFromEcommercelist',
                                                                        width: '100%',
                                                                        itemCls: 'disableVednorListItemCls',
                                                                        itemTpl: [
                                                                            '<div style = "color:rgb(192,0,0); font-weight: bold;" > {vendor_name}</div>'
                                                                        ],
                                                                        itemHeight: 25,
                                                                        listeners: [
                                                                            {
                                                                                fn: function(element, eOpts) {
                                                                                    var deletedVendorFromVIPlist = Ext.ComponentQuery.query("#deletedVendorFromEcommercelist")[0];

                                                                                    var vendor = Ext.getStore('vendors.Master');

                                                                                    var data = getArrayFromStore(vendor);
                                                                                    var arrayToPush = [];

                                                                                    var string = 'prevent_be_ecommerceVendor';
                                                                                    for(var i = 0;i < data.length; i++){

                                                                                        if(data[i][string]){
                                                                                            arrayToPush.push(data[i]);
                                                                                        }
                                                                                    }
                                                                                    console.log(arrayToPush);
                                                                                    deletedVendorFromVIPlist.setData(arrayToPush);
                                                                                },
                                                                                event: 'painted'
                                                                            }
                                                                        ]
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ],
                                        listeners: [
                                            {
                                                fn: function(component, eOpts) {


                                                    RMdatalink.app.getController('ecomPricingController').initialsePricingList();
                                                },
                                                event: 'initialize'
                                            }
                                        ]
                                    }
                                ],
                                listeners: [
                                    {
                                        fn: function(element, eOpts) {


                                            return ;



                                            //RMdatalink.app.getController('DatalinkController').enableDisableDlFlds(true);

                                            var timeout = setTimeout(function(){

                                                var vndStr = Ext.getStore('vendors.Master') ;
                                                vndStr.clearFilter();

                                                RMdatalink.app.getController('BillingDetailsController').loadVendorTotalCountData() ;

                                                var dlList = Ext.ComponentQuery.query('#dataLinkListItemID')[0].down('#pricingList') ;
                                                dlList.refresh();
                                                clearTimeout(timeout);
                                            },100);
                                        },
                                        event: 'painted'
                                    },
                                    {
                                        fn: function(component, eOpts) {

                                            var headers = component.down("#pricingListHeader");
                                            headers.setData([{is_selected:false}]);



                                            headers.setItemTpl(
                                            Ext.create('Ext.XTemplate',
                                            '<div class="x-rm-listtpl-main" style="border-bottom: 1px solid #9b9b9b; background-color: gainsboro;font-weight: bold;color: #555;font-size: 1.0em;padding:0 0px 0 0px !important;height:64px;">',
                                            '    <div style="width: 2.5%;padding-top: 44px;">',
                                            '        <div style="width: 19px; height:19px;{[this.getCartImage(values)]}" {[RMdatalink.util.globalConfig.getListAttrForDelHandling()]} ="onCartTap" l1 = "2123"  ></div>',
                                            '    </div>',
                                            '    <div class="rightBorderDiv" style="width: 9.5%;text-align: center;padding-top: 44px;" data-name="vendor_name">',
                                            '        Vendor&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',


                                            '    <div class="rightBorderDiv" style="width: 6.4%;text-align: center;padding-top: 44px;" data-name="SKU">',
                                            '        SKU&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',

                                            '    <div class="rightBorderDiv" style="width: 6.4%;text-align: center;padding-top: 44px;" data-name="collections">',
                                            '        Collection&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',




                                            '    <div class="rightBorderDiv" style="width: 6.4%;text-align: center;padding-top: 44px;" data-name="design">',
                                            '        Design&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',








                                            '    <div class="rightBorderDiv" style=" width: 6.4%;text-align: center;padding-top: 44px;" data-name="no_of_images">',
                                            '        Images&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',

                                            '    <div class="rightBorderDiv" style=" width: 6.4%;text-align: center;padding-top: 24px;" >',
                                            '     <div style="width:100%;" data-name="no_of_additional_images"><p style = "width:70%;">Addl. Images</p><img src="resources/images/button_icons/downArrow.png"/></div>   ',

                                            /* '        Addl. Images&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',*/
                                            '    </div>',

                                            '    <div class="rightBorderDiv" style=" width: 28%;text-align: center;">',
                                            '    <div style="border-bottom: 1px solid #9b9b9b;">SKUs + Images</div>     ',
                                            '    <div style="border-bottom: 1px solid #9b9b9b;"> <div style="width:50%;border-right: 1px solid #9b9b9b; float: left;">Value Calculator</div><div style="width:100%;">Price</div></div>     ',
                                            '    <div> <div style="width:25%;border-right: 1px solid #9b9b9b; float: left;">Hrs</div><div style="width:25%;border-right: 1px solid #9b9b9b; float: left;">Days</div><div style="width:25%;float: left;border-right: 1px solid #9b9b9b;">Std</div> <div style="width:100%;">Promo</div></div>     ',
                                            '    </div>',


                                            '    <div class="rightBorderDiv" style=" width: 28%;text-align: center;">',
                                            '    <div style="border-bottom: 1px solid #9b9b9b;">SKUs + Images + Addl Images</div>     ',
                                            '    <div style="border-bottom: 1px solid #9b9b9b;"> <div style="width:50%;border-right: 1px solid #9b9b9b; float: left;">Value Calculator</div><div style="width:100%;">Price</div></div>     ',
                                            '    <div> <div style="width:25%;border-right: 1px solid #9b9b9b; float: left;">Hrs</div><div style="width:25%;border-right: 1px solid #9b9b9b; float: left;">Days</div><div style="width:25%;float: left;border-right: 1px solid #9b9b9b;">Std</div> <div style="width:100%;">Promo</div></div>     ',
                                            '    </div>',
                                            '</div>',
                                            {
                                                getCartImage:function(values){
                                                    if(values.is_selected){
                                                        return "background-image: url('resources/images/retailerDetail/cart_selected.png') !important;";
                                                    }

                                                    return "background-image: url('resources/images/retailerDetail/cart_unselected.png') !important;" ;
                                                },
                                                setCartValue:function(value){
                                                    if(values.is_selected){
                                                        values.is_selected = false;
                                                    }else{
                                                        values.is_selected = true;
                                                    }
                                                    console.error("L!!!!!");
                                                    headers.refresh();
                                                    // return this.getCartImage(value);

                                                }
                                            }
                                            ));

                                            headers.setHeight(66);
                                            headers.setMode('MULTI');
                                            headers.addCls('x-rm-rdvendorslist');
                                            headers.refresh();
                                            var list = component.down('#pricingList');

                                            list.setStore('vendors.Master');

                                            //   list.setStore('vendorTempRecordStore');//'vendors.Master'
                                            //      '    <div style="width: 10%;" >{[RMdatalink.util.globalMethods.SetCommaForNumericField(SKU)]}</div>',


                                            //
                                            /*

                                            ecom_promo: undefined
                                            ecom_promo_addl: undefined
                                            ecom_std: undefined
                                            ecom_std_addl: undefined
                                            */
                                            list.setItemTpl(
                                            Ext.create('Ext.XTemplate',
                                            '<div class="x-rm-listtpl-main" style="width: 100%;padding:0 0px 0 0px !important;">',

                                            '    <div style="width: 2.5%;">',
                                            '        <div style="width: 19px; height:19px;"    {[RMdatalink.util.globalConfig.getListAttrForDelHandling()]} ="onCartTap" ></div>',
                                            '    </div>',

                                            '    <div class="rightBorderDiv boldText " style="width: 9.5%;padding-left:10px; {[this.getColorForVendor(values)]} " >{vendor_name}</div>',
                                            '    <div class="rightBorderDiv" style="width: 6.4%;text-align: center;" >{[formatNormalNum(values.SKU)]}</div>',
                                            '    <div class="rightBorderDiv" style="width: 6.4%;text-align: center;" >{[formatNormalNum(values.collections)]}</div>',
                                            '    <div class="rightBorderDiv" style="width: 6.4%;text-align: center;" >{[formatNormalNum(values.design)]}</div>',

                                            '    <div class="rightBorderDiv" style="width: 6.4%;text-align: center;" >{[formatNormalNum(values.no_of_images)]}</div>',
                                            '    <div class="rightBorderDiv" style="width: 6.4%;text-align: center;" >{[formatNormalNum(values.no_of_additional_images)]}</div>',

                                            '    <div class="rightBorderDiv" style="width: 6.98%;text-align: center;" >{[this.calHrsBySkuImages(values)]}</div>',
                                            '    <div class="rightBorderDiv" style="width: 6.98%;text-align: center;" >{[this.calDaysBySkuImages(values)]}</div>',

                                            '    <div class="rightBorderDiv" style="width: 6.98%;text-align: center;" > $ {[formatNum(values.ecom_std)]} </div>',
                                            '    <div class="rightBorderDiv" style="width: 6.98%;text-align: center;" > $ {[formatNum(values.ecom_promo)]} </div>',



                                            '    <div class="rightBorderDiv" style="width: 6.98%;text-align: center;" >{[this.calHrsBySkuImagesAddlImages(values)]}</div>',
                                            '    <div class="rightBorderDiv" style="width: 6.98%;text-align: center;" >{[this.calDaysBySkuImagesAddlImages(values)]}</div>',

                                            '    <div class="rightBorderDiv" style="width: 6.98%;text-align: center;" > $ {[formatNum(values.ecom_std_addl)]} </div>',
                                            '    <div class="rightBorderDiv" style="width: 6.98%;text-align: center;" > $ {[formatNum(values.ecom_promo_addl)]} </div>',



                                            '</div>',
                                            {
                                                getColorForVendor:function(  values){
                                                    return getColorStringForVendor(values);

                                                },
                                                getCalculatedValue: function(sku){
                                                    if(sku)
                                                    {
                                                        var  result = (sku * 5)/60 ;
                                                        result =    Math.round(result * 100) / 100 ;
                                                        return result ;
                                                    }

                                                    return 0 ;

                                                },

                                                calHrsBySkuImages: function(values){


                                                    var pricingData = RMdatalink.app.getController('BillingDetailsController').config.pricingData ;
                                                    var time_taken_images = 5 ;
                                                    var time_taken_images_addl_images = 10 ;


                                                    if(pricingData && pricingData[2]){

                                                        time_taken_images = pricingData[2].time_taken_images  ;
                                                        time_taken_images_addl_images = pricingData[2].time_taken_images_addl_images ;


                                                    }


                                                    if(values.SKU && values.no_of_images)
                                                    {
                                                        var sku = parseInt(values.SKU) + parseInt(values.no_of_images) ;
                                                        var  result = (sku * time_taken_images)/60 ;
                                                        result =    Math.round(result * 100) / 100 ;
                                                        return result ;
                                                    }

                                                    return 0 ;

                                                },


                                                calDaysBySkuImages: function(values){

                                                    var pricingData = RMdatalink.app.getController('BillingDetailsController').config.pricingData ;
                                                    var time_taken_images = 5 ;
                                                    var time_taken_images_addl_images = 10 ;


                                                    if(pricingData && pricingData[2]){

                                                        time_taken_images = pricingData[2].time_taken_images  ;
                                                        time_taken_images_addl_images = pricingData[2].time_taken_images_addl_images ;


                                                    }


                                                    if(values.SKU && values.no_of_images)
                                                    {
                                                        var sku = parseInt(values.SKU) + parseInt(values.no_of_images) ;
                                                        var  result = (sku * time_taken_images)/60 ;
                                                        result = result / 8 ;
                                                        result =    Math.round(result * 100) / 100 ;
                                                        return result ;
                                                    }

                                                    return 0 ;

                                                },

                                                calHrsBySkuImagesAddlImages: function(values){

                                                    var pricingData = RMdatalink.app.getController('BillingDetailsController').config.pricingData ;
                                                    var time_taken_images = 5 ;
                                                    var time_taken_images_addl_images = 10 ;


                                                    if(pricingData && pricingData[2]){

                                                        time_taken_images = pricingData[2].time_taken_images  ;
                                                        time_taken_images_addl_images = pricingData[2].time_taken_images_addl_images ;


                                                    }


                                                    if(values.SKU && values.no_of_images && values.no_of_additional_images )
                                                    {
                                                        var sku = parseInt(values.SKU) + parseInt(values.no_of_images) +parseInt(values.no_of_additional_images) ;
                                                        var  result = (sku * time_taken_images_addl_images)/60 ;
                                                        result =    Math.round(result * 100) / 100 ;
                                                        return result ;
                                                    }

                                                    return 0 ;

                                                },

                                                calDaysBySkuImagesAddlImages: function(values){


                                                    var pricingData = RMdatalink.app.getController('BillingDetailsController').config.pricingData ;
                                                    var time_taken_images = 5 ;
                                                    var time_taken_images_addl_images = 10 ;


                                                    if(pricingData && pricingData[2]){

                                                        time_taken_images = pricingData[2].time_taken_images  ;
                                                        time_taken_images_addl_images = pricingData[2].time_taken_images_addl_images ;


                                                    }

                                                    if(values.SKU && values.no_of_images && values.no_of_additional_images )
                                                    {
                                                        var sku = parseInt(values.SKU) + parseInt(values.no_of_images) +parseInt(values.no_of_additional_images) ;
                                                        var  result = (sku * time_taken_images_addl_images)/60 ;
                                                        result = result / 8 ;
                                                        result =    Math.round(result * 100) / 100 ;
                                                        return result ;
                                                    }

                                                    return 0 ;

                                                }

                                            }

                                            )
                                            );

                                            list.setItemHeight(22);
                                            list.setMode('MULTI');
                                            list.addCls('x-rm-rdvendorslist');

                                            /*
                                            '    <div class="rightBorderDiv" style="width: 6.98%;text-align: center;" > $ {[formatNum(values.product_price.ecom.standard_price)]} </div>',
                                            '    <div class="rightBorderDiv" style="width: 6.98%;text-align: center;" > $ {[formatNum(values.product_price.ecom.promotional_price)]} </div>',



                                            '    <div class="rightBorderDiv" style="width: 6.98%;text-align: center;" >{[this.calHrsBySkuImagesAddlImages(values)]}</div>',
                                            '    <div class="rightBorderDiv" style="width: 6.98%;text-align: center;" >{[this.calDaysBySkuImagesAddlImages(values)]}</div>',

                                            '    <div class="rightBorderDiv" style="width: 6.98%;text-align: center;" > $ {[formatNum(values.product_price.ecom.standard_price_addlimg)]} </div>',
                                            '    <div class="rightBorderDiv" style="width: 6.98%;text-align: center;" > $ {[formatNum(values.product_price.ecom.promotional_price_addlimg)]} </div>',



                                            */

                                            list.addListener('itemtap',function(){


                                                console.log("LIST CLICKED");
                                            },this);

                                            headers.addListener('itemtap',function(){


                                                console.log("HEADERS CLICKED");
                                            },this);



                                            var totalsList = component.down('#pricingTotalsList');
                                            // totalsList.setData({

                                            // //     vendor_count:0,
                                            // //     collection_count:0,
                                            // //     design_count:0,
                                            // //     sku_count:0,
                                            // //     total_images:0,
                                            // //     total_addl_images:0,
                                            // //     total_hrs_images:0,
                                            // //     total_days_images:0,
                                            // // //     total_hrs_images:0,
                                            // // //     total_days_images:0,
                                            // //     total_std_price:0,
                                            // //     total_promo_price:0,
                                            // //     total_hrs_img_addlimges:0,
                                            // //     total_days_img_addlimges:0,
                                            // //     total_std_price_addlimges:0,
                                            // //     total_promo_price_addlimges:0

                                            //  }
                                            //     );
                                            totalsList.setItemTpl(
                                            Ext.create('Ext.XTemplate',
                                            '<div class="x-rm-listtpl-main" style="width: 100%;">',
                                            '    <div style="width: 0.2%;"></div>',
                                            '    <div class="rightBorderDiv" style="width: 12%;">{vendor_count} Vendors</div>',
                                            '    <div class="rightBorderDiv" style="width: 6.2%;text-align: center;">{[formatNormalNum(values.sku_count)]}</div>',
                                            '    <div class="rightBorderDiv" style="width: 6.2%;text-align: center;">{[formatNormalNum(values.collection_count)]} </div>',
                                            '    <div class="rightBorderDiv" style="width: 6.2%;text-align: center;">{[formatNormalNum(values.design_count)]} </div>',
                                            '    <div class="rightBorderDiv" style="width: 6.2%;text-align: center;">{[formatNormalNum(values.total_images)]}</div>',
                                            '    <div class="rightBorderDiv" style="width: 6.2%;text-align: center;">{[formatNormalNum(values.total_addl_images)]}</div>',

                                            '    <div class="rightBorderDiv" style="width: 6.92%;text-align: center;">{[formatNum(values.total_hrs_images)]}</div>',
                                            '    <div class="rightBorderDiv" style="width: 6.92%;text-align: center;">{[formatNum(values.total_days_images)]}</div>',
                                            '    <div class="rightBorderDiv" style="width: 6.92%;text-align: center;">$ {[formatNum(values.total_std_price)]}</div>',
                                            '    <div class="rightBorderDiv" style="width: 6.92%;text-align: center;">$ {[formatNum(values.total_promo_price)]}</div>',

                                            '    <div class="rightBorderDiv" style="width: 6.92%;text-align: center;">{[formatNum(values.total_hrs_img_addlimges)]}</div>',
                                            '    <div class="rightBorderDiv" style="width: 6.92%;text-align: center;">{[formatNum(values.total_days_img_addlimges)]}</div>',
                                            '    <div class="rightBorderDiv" style="width: 6.92%;text-align: center;"> $ {[formatNum(values.total_std_price_addlimges)]}</div>',
                                            '    <div class="rightBorderDiv" style="width: 6.92%;text-align: center;"> $ {[formatNum(values.total_promo_price_addlimges)]}</div>',


                                            '</div>'

                                            )
                                            );

                                        },
                                        event: 'initialize'
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        ],
        listeners: [
            {
                fn: 'onRmProListItemTap',
                event: 'itemtap',
                delegate: '#listwithheader #mainList'
            },
            {
                fn: 'onRmProListVIPItemTap',
                event: 'itemtap',
                delegate: '#listwithheader #mainList'
            },
            {
                fn: 'onListItemTap',
                event: 'itemtap',
                delegate: '#ecomListItemID #pricingList'
            },
            {
                fn: 'onDataviewItemTap',
                event: 'itemtap',
                delegate: '#ecomListItemID #pricingListHeader'
            },
            {
                fn: 'onEcomVipVendorsRemoveChange',
                event: 'change',
                delegate: '#ecomVipVendorsRemove'
            },
            {
                fn: 'onDeletedVendorFromVIPlistItemTap',
                event: 'itemtap',
                delegate: '#deletedVendorFromVIPlist'
            },
            {
                fn: 'onDeletedVendorFromVIPlistItemTap1',
                event: 'itemtap',
                delegate: '#deletedVendorFromEcommercelist'
            },
            {
                fn: 'onInhouseMainContentPanelInitialize',
                event: 'initialize'
            },
            {
                fn: 'onProductDatalinkMainPanelPainted',
                event: 'painted'
            }
        ]
    },

    onRmProListItemTap: function(dataview, index, target, record, e, eOpts) {

        var attrToSearch = RMdatalink.util.globalConfig.getListAttrForDelHandling();
        var targetEl = e.target;


        console.log("THIS IS TESTING LOG ONE");











        var productSetupeVipListPanel  = Ext.ComponentQuery.query("#productSetupeVipListPanel #mainList")[0];
        if(productSetupeVipListPanel){
            var store = productSetupeVipListPanel.getStore();
            if(store){
                var data = store.getData();
                for( var i =0 ; i <data.all.length ; i++){

                    var trecord = data.all[i];
                    trecord.set('is_itemtap' , false);
                }

            }


        }















        // delegateAttr="onCartTap"

        if( RMdatalink.util.globalConfig.isAttributePresentInTarget( attrToSearch,targetEl )  ){

                 var attrVak = targetEl.getAttribute(attrToSearch);
                console.log("THIS IS TESTING LOG 2");
                 if(attrVak == "onCartTap")
                 {

                           // var timeout = setTimeout(function(){
                                console.log("THIS IS TESTING LOG 3");
                                RMdatalink.app.getController('ecomController').onRmProSelectUnselect();

                           //      clearTimeout(timeout);
                            //},100);


                 }

        }else{
            console.log("THIS IS TESTING LOG 4");
            if(dataview.isSelected(record))
            {
                console.log("THIS IS TESTING LOG 5");
                dataview.deselect(record,true) ;
            }else{
                console.log("THIS IS TESTING LOG 6");
                dataview.select(record,true) ;
            }
             var str = dataview.getStore();
            for(var i=0; i < str.getData().all.length ; i++){
                str.getAt(i).set('is_itemtap',false);;
            }
             record.set('is_itemtap',true);
            console.log("THIS IS TESTING LOG 7");
            RMdatalink.app.getController('ecomController').onProductRMProListSelect(dataview, record, eOpts);
        }


         var timeout = setTimeout(function(){

                              RMdatalink.app.getController('ecomController').setDefaultDlDataProduct() ;

                                clearTimeout(timeout);
                            },100);

    },

    onRmProListVIPItemTap: function(dataview, index, target, record, e, eOpts) {

        var attrToSearch = RMdatalink.util.globalConfig.getListAttrForDelHandling();
        var targetEl = e.target;


        console.log("THIS IS TESTING LOG ONE");

        // delegateAttr="onCartTap"



        var productSetupecomListPanel  = Ext.ComponentQuery.query("#productSetupecomListPanel #mainList")[0];
        if(productSetupecomListPanel){
            var store = productSetupecomListPanel.getStore();
            if(store){
                var data = store.getData();
                for( var i =0 ; i <data.all.length ; i++){

                    var trecord = data.all[i];
                    trecord.set('is_itemtap' , false);
                }

            }


        }



        if( RMdatalink.util.globalConfig.isAttributePresentInTarget( attrToSearch,targetEl )  ){

            var attrVak = targetEl.getAttribute(attrToSearch);
            console.log("THIS IS TESTING LOG 2");
            if(attrVak == "onCartTap")
            {

                // var timeout = setTimeout(function(){
                console.log("THIS IS TESTING LOG 3");
                var productSetupeVipListPanel = Ext.ComponentQuery.query("#productSetupeVipListPanel")[0];
                RMdatalink.app.getController('ecomController').onRmProSelectUnselect(productSetupeVipListPanel);

                //      clearTimeout(timeout);
                //},100);


            }

        }else{
            console.log("THIS IS TESTING LOG 4");
            if(dataview.isSelected(record))
            {
                console.log("THIS IS TESTING LOG 5");
                dataview.deselect(record,true) ;
            }else{
                console.log("THIS IS TESTING LOG 6");
                dataview.select(record,true) ;
            }
            var str = dataview.getStore();
            for(var i=0; i < str.getData().all.length ; i++){
                str.getAt(i).set('is_itemtap',false);;
            }
            record.set('is_itemtap',true);
            console.log("THIS IS TESTING LOG 7");
            RMdatalink.app.getController('ecomController').onProductRMProListSelect(dataview, record, eOpts);
        }


        var timeout = setTimeout(function(){

            RMdatalink.app.getController('ecomController').setDefaultDlDataProduct() ;

            clearTimeout(timeout);
        },100);

    },

    onListItemTap: function(dataview, index, target, record, e, eOpts) {

        var attrToSearch = RMdatalink.util.globalConfig.getListAttrForDelHandling();
        var targetEl = e.target;


        // delegateAttr="onCartTap"

        if( RMdatalink.util.globalConfig.isAttributePresentInTarget( attrToSearch,targetEl )  ){

                 var attrVak = targetEl.getAttribute(attrToSearch);

                 if(attrVak == "onCartTap")
                 {

                           var timeout = setTimeout(function(){

                                RMdatalink.app.getController('BillingDetailsController').loadVendorTotalCountDataForEcommerce();

                                clearTimeout(timeout);
                            },100);


                 }

        }else{

            if(dataview.isSelected(record))
            {

                dataview.deselect(record,true) ;
            }else{

                dataview.select(record,true) ;
            }

        //    RMdatalink.app.getController('DatalinkController').onProductRMProListSelect(dataview, record, eOpts);
        }

        //productsecomPricingTab
    },

    onDataviewItemTap: function(dataview, index, target, record, e, eOpts) {

        var attrToSearch = RMdatalink.util.globalConfig.getListAttrForDelHandling();
        var targetEl = e.target;


        // delegateAttr="onCartTap"

        if( RMdatalink.util.globalConfig.isAttributePresentInTarget( attrToSearch,targetEl )  ){

                 var attrVak = targetEl.getAttribute(attrToSearch);

                 if(attrVak == "onCartTap")
                 {


                         var dlList = Ext.ComponentQuery.query('#productsecomPricingTab')[0].down('#pricingList') ;

                         if(dataview.isSelected(record))
                         {
                              dlList.deselectAll();
                              record.set('is_selected',false);

                         }else{
                              record.set('is_selected',true);
                             dlList.selectAll(true);

                         }

                         RMdatalink.app.getController('BillingDetailsController').loadVendorTotalCountDataForEcommerce();



                 }

        }else{

            if(dataview.isSelected(record))
            {

                dataview.deselect(record,true) ;
            }else{

                dataview.select(record,true) ;
            }

        //    RMdatalink.app.getController('DatalinkController').onProductRMProListSelect(dataview, record, eOpts);
        }
    },

    onEcomVipVendorsRemoveChange: function(selectfield, newValue, oldValue, eOpts) {
        console.log(arguments);
        var ecomVipVendorsRemove = Ext.ComponentQuery.query("#ecomVipVendorsRemove")[0];
        if(ecomVipVendorsRemove){

            var vendorId = ecomVipVendorsRemove .getValue();
            if(vendorId){


                var vendor_id = vendorId ;
                var keyOfRetailer = 'prevent_be_vip';
                var vendorMaster = Ext.getStore('vendors.Master') ;
                var record ;
                if(vendor_id)
                {
                    record = findVendorBy_id(vendor_id) ;
                }
                if(!record){

                    return ;
                }

                var noVipRadio = Ext.ComponentQuery.query("#noVipRadio")[0];
                var rtlrs = record.data.prevent_be_vip;
                var valueofFlage = noVipRadio.setChecked(rtlrs);



                //updateVendor();
            }}
        function findVendorBy_id(v_id){
           // var vendorMaster = Ext.getStore('vendors.Master') ;
            var vendors = vendorMaster.data.all ;
            var venRec = null ;
            for(var j=0;j<vendors.length ; j++){

                if(v_id == vendors[j].data._id){

                    venRec = vendors[j] ;
                    break;
                }
            }

            return venRec;

        }
    },

    onDeletedVendorFromVIPlistItemTap: function(dataview, index, target, record, e, eOpts) {


        var ecomVipVendorsRemove = Ext.ComponentQuery.query("#ecomVipVendorsRemove")[0];
        var _id = record.data._id;

        ecomVipVendorsRemove.setValue(_id);
    },

    onDeletedVendorFromVIPlistItemTap1: function(dataview, index, target, record, e, eOpts) {


        var ecomVipVendorsRemove = Ext.ComponentQuery.query("#ecomVendorsRemoveSelect")[0];
        var _id = record.data._id;

        ecomVipVendorsRemove.setValue(_id);
    },

    onInhouseMainContentPanelInitialize: function(component, eOpts) {
        component.down('#cardAddRetailerBtn').setHidden(true) ;

        component.down('#cardDeleteBtn').setHidden(false) ;

        component.down('#cardActionBtn').setHidden(true) ;
        component.down('#cardImportBtn').setHidden(true) ;

        component.down('#cardExportBtn').setHidden(true) ;

        component.down('#cardTitleLabel').setHtml("E-Commerce");




        component.down('#cardDeleteBtn').element.on("tap",function(){

            // RMdatalink.app.getController('DeleteRecords').deleteRMPRO();
        });





        component.addListener(

            'painted' , function(){
          //

                var LoginHandler = RMdatalink.app.getController('LoginHandler');

                if(LoginHandler.config.userDetails.right_naviagtion_panel_state  == 0){

                    var RMnavigationPanelExpandButton= component.query("#ecomSetUpHideShowArrowBtn");

                    for(var i= 0 ; i < RMnavigationPanelExpandButton.length ; i++ ){

                        var handler = RMnavigationPanelExpandButton[i].getHandler();
                        handler.call(RMnavigationPanelExpandButton[i] , RMnavigationPanelExpandButton[i]);


                    }

                }else{

                }


            },
            this,{

                single:true
            }
        );

        function fnToEx(fn , scope , arg){

        }
    },

    onProductDatalinkMainPanelPainted: function(element, eOpts) {
         RMdatalink.app.getController('ecomController').enableDisableDlFlds(true);

        var pricingData = RMdatalink.app.getController('BillingDetailsController').config.pricingData ;
        selectfield = Ext.ComponentQuery.query('#ecomPoductBundeleSelectFld')[0] ;

        if(pricingData[0].state_values && pricingData[2].state_values.datalink_bundle )
        {
            selectfield.setValue( pricingData[2].state_values.datalink_bundle ) ;
        }



        //////////////////////////////////
        return ;

        var form = Ext.ComponentQuery.query('#productDatalinkMainPanel')[0] ;


        if(form.down('#datalinkSetupEditBtn').getHidden()){

             RMdatalink.app.getController('DatalinkController').enableDisableDlFlds(false);

        }else{

             RMdatalink.app.getController('DatalinkController').enableDisableDlFlds(true);

        }

        var pricingData = RMdatalink.app.getController('BillingDetailsController').config.pricingData ;


        if(!pricingData[2].state_values){
            return ;
        }
        var selectfield ;

        if(pricingData[2].state_values.datalink_vendor_bundle )
        {
            selectfield = Ext.ComponentQuery.query('#dlVendorBundleSelectFld')[0] ;
            selectfield.setValue( pricingData[0].state_values.datalink_vendor_bundle ) ;
        }


        if(pricingData[2].state_values.vendor_pricing_sku_images )
        {
            selectfield = Ext.ComponentQuery.query('#pricingPolicySkuIncrementSelectFld')[0] ;
            selectfield.setValue( pricingData[0].state_values.vendor_pricing_sku_images ) ;
        }


        if(pricingData[2].state_values.vendor_pricing_sku_images_addl_images )
        {
            selectfield = Ext.ComponentQuery.query('#pricingPolicySkuAddlImgsIncrementSelectFld')[0] ;
            selectfield.setValue( pricingData[0].state_values.vendor_pricing_sku_images_addl_images ) ;
        }

        if(pricingData[2].state_values.vendor_pricing_vdr_discount )
        {
            selectfield = Ext.ComponentQuery.query('#DiscountPolicyVendorsIncrementSelectFld')[0] ;
            selectfield.setValue( pricingData[0].state_values.vendor_pricing_vdr_discount ) ;
        }

        if(pricingData[2].state_values.vendor_pricing_sku_discount )
        {
            selectfield = Ext.ComponentQuery.query('#DiscountPolicySKUIncrementSelectFld')[0] ;
            selectfield.setValue( pricingData[0].state_values.vendor_pricing_sku_discount ) ;
        }
    }

});
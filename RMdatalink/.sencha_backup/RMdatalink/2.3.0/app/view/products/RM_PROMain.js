/*
 * File: app/view/products/RM_PROMain.js
 *
 * This file was generated by Sencha Architect version 3.0.4.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Sencha Touch 2.3.x library, under independent license.
 * License of Sencha Architect does not include license for Sencha Touch 2.3.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('RMdatalink.view.products.RM_PROMain', {
    extend: 'Ext.Panel',
    alias: 'widget.productsrm_promain',

    requires: [
        'RMdatalink.view.CardHeaderPanel',
        'RMdatalink.view.common.searchView',
        'RMdatalink.view.listHeaderForRMpro',
        'RMdatalink.view.listWithHeader',
        'Ext.form.FieldSet',
        'Ext.Button',
        'Ext.tab.Panel',
        'Ext.tab.Bar',
        'Ext.Label',
        'Ext.form.Panel',
        'Ext.field.Select',
        'Ext.field.TextArea'
    ],

    config: {
        itemId: 'productRMproMainPanel',
        layout: 'vbox',
        scrollable: false,
        items: [
            {
                xtype: 'CardHeaderPanel',
                flex: 1
            },
            {
                xtype: 'panel',
                flex: 15,
                layout: 'vbox',
                scrollable: false,
                items: [
                    {
                        xtype: 'fieldset',
                        border: '0px',
                        height: '38px',
                        margin: '0 0 0 0',
                        style: 'background-color:transparent !important;border:none !important;',
                        layout: {
                            type: 'hbox',
                            align: 'end',
                            pack: 'end'
                        },
                        items: [
                            {
                                xtype: 'button',
                                handler: function(button, e) {
                                    RMdatalink.app.getController('RMProController').enableDisableFlds(false);
                                },
                                action: 'addNew',
                                cls: 'x-rm-blueBtn',
                                height: '30px',
                                itemId: 'rMProMainSetupEditBtn',
                                margin: '0 10 2 1',
                                width: '90px',
                                text: 'Edit'
                            },
                            {
                                xtype: 'button',
                                handler: function(button, e) {
                                    RMdatalink.app.getController('RMProController').enableDisableFlds(true);
                                },
                                cls: 'x-rm-card-actionbtn',
                                height: '24px',
                                itemId: 'rMProMainSetupCancelBtn',
                                margin: '0 4 2 0',
                                width: '90px',
                                pressedCls: 'x-rm-card-actionbtn-pressing',
                                text: 'Cancel'
                            }
                        ]
                    },
                    {
                        xtype: 'tabpanel',
                        flex: 1,
                        cls: 'x-rm-tabpanel',
                        margin: '0 0 0 0',
                        ui: 'light',
                        tabBar: {
                            docked: 'top',
                            style: 'margin-top: -30px;',
                            width: '60%'
                        },
                        items: [
                            {
                                xtype: 'container',
                                title: 'Setup',
                                height: '100%',
                                itemId: 'rmProMainListContainer',
                                minHeight: '100%',
                                layout: 'fit',
                                scrollable: false,
                                listeners: [
                                    {
                                        fn: function(component, eOpts) {



                                            var headers = component.down("#headerList");
                                            headers.setData([{}]);
                                            headers.setItemTpl(
                                            Ext.create('Ext.XTemplate',
                                            '<div class="x-rm-listtpl-main" style="border-bottom: 1px solid #9b9b9b; background-color: gainsboro;font-weight: bold;color: #555;font-size: 0.75em;">',
                                            '    <div style="width: 6%;">',
                                            '        <div style="width: 19px; height:19px;" {[RMdatalink.util.globalConfig.getListAttrForDelHandling()]} ="onCartTap"  ></div>',
                                            '    </div>',
                                            '    <div class="rightBorderDiv" style="width: 4%;text-align: center;" data-name="module_listed_order">',
                                            '        index&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',
                                            '    <div class="rightBorderDiv" style="width: 10%;text-align: center;" data-name="module_sku">',
                                            '        SKU&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',
                                            '    <div class="rightBorderDiv" style="width: 15%;text-align: center;" data-name="module_name">',
                                            '        Products/ Add-ons&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',
                                            '    <div class="rightBorderDiv" style="width: 32%;text-align: center;" data-name="module_description">',
                                            '       Description&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',
                                            '    <div class="rightBorderDiv" style="width: 8%;text-align: center;" data-name="quantity">',
                                            '       Qty&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',
                                            '    <div class="rightBorderDiv" style="width: 10%;text-align: center;" data-name="module_standard_price">',
                                            '        Std. Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',
                                            '    <div style="width: 12%;text-align: center;" data-name="module_promotional_price">',
                                            '        Promo. Price&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                            '    </div>',
                                            '</div>'
                                            )
                                            );

                                            headers.setMode('SINGLE');
                                            /**/
                                            headers.addCls('x-rm-rdvendorslist');
                                            headers.setAllowDeselect(true);
                                            headers.refresh();
                                            var list = component.down('#mainList');
                                            list.setStore(Ext.getStore('products.RMProStore'));
                                            list.setItemTpl(
                                            Ext.create('Ext.XTemplate',
                                            '<div class="x-rm-listtpl-main pointerCursor" style="{[this.getSelectedColor(values)]}">',
                                            '    <div style="width: 6%;">',
                                            '        <div style="width: 19px; height:19px;"    {[RMdatalink.util.globalConfig.getListAttrForDelHandling()]} ="onCartTap" ></div>',
                                            '    </div>',
                                            '    <div class="rightBorderDiv" style="width: 4%;"> {module_listed_order}</div>',
                                            '    <div class="rightBorderDiv  boldText" style="width: 10%;">{module_sku}</div>',
                                            '    <div class="rightBorderDiv  boldText" style="width: 15%;">{module_name}</div>',
                                            '    <div class="rightBorderDiv" style="width: 32%;">{module_description}</div>',


                                            '<div class="rightBorderDiv" style="width: 8%;text-align: center;">',
                                            '    <input type="text" style="width: 92% !important;margin-left: 2%;height: 16px;text-align: center;" class="x-rm-rdinlinecmt prodRmprolstflds" data-id="{_id}" value="{quantity}" maxlength="24"',
                                            '        onchange="RMdatalink.app.getController(\'RMProController\').updateRmproProducts(this,\'quantity\');"/>',
                                            '</div>',


                                            '    <div class="rightBorderDiv" style="width: 10%;text-align: right;padding-right: 1%;">$ {[formatNum(values.module_standard_price)]}</div>',
                                            '    <div style="width: 12%;text-align: right;padding-right: 1%;">$ {[formatNum(values.module_promotional_price)]}</div>',
                                            '</div>',
                                            {
                                                getSelectedColor:function(values){
                                                    if(values.is_itemtap){
                                                        return "background-color: #94DCF0;";
                                                    }else{
                                                        return "background-color: transparent;" ;
                                                    }
                                                }
                                            }
                                            )
                                            );

                                            // list.setMode("SINGLE");
                                            //     list.on("select",function(rmProlist, record, eOpts){
                                            //         RMdatalink.app.getController('RMProController').onProductRMProListSelect(rmProlist, record, eOpts);
                                            // });

                                            list.setItemHeight(22);
                                            list.setMode('MULTI');
                                            list.addCls('x-rm-rdvendorslist');

                                        },
                                        event: 'initialize'
                                    },
                                    {
                                        fn: function(element, eOpts) {
                                            RMdatalink.app.getController('RMProController').enableDisableFlds(true);
                                            /*
                                            var list = Ext.ComponentQuery.query('#rmProDiscountListPanel')[0].down('#mainList') ;


                                            var allRecPanelHeight =  list.getStore().getData().all.length * list.getItemHeight() + 14 ;
                                            Ext.ComponentQuery.query('#rm_proAdvancePaymentDiscountList')[0].setHeight(allRecPanelHeight);


                                            var h1 =  Ext.ComponentQuery.query('#rmProProductSetupSideP1')[0].getEl().getHeight() ;
                                            var h2 =  Ext.ComponentQuery.query('#rmProProductSetupSideP2')[0].getEl().getHeight() ;
                                            var h3 =  Ext.ComponentQuery.query('#rmProDiscountListPanel')[0].getEl().getHeight() ;

                                            Ext.ComponentQuery.query('#productRMPROaddUpdateFrmPanel')[0].setHeight(h1+h2+h3 + 26) ;
                                            Ext.ComponentQuery.query('#productRMPROaddUpdateFrmPanel')[0].setMaxHeight(window.innerHeight - 122 );
                                            */

                                            RMdatalink.app.getController('RMProController').refreshRmproSideBarHeight() ;
                                        },
                                        event: 'painted'
                                    }
                                ],
                                items: [
                                    {
                                        xtype: 'panel',
                                        layout: 'hbox',
                                        items: [
                                            {
                                                xtype: 'panel',
                                                flex: 3,
                                                cls: 'borderedDiv',
                                                itemId: 'productSetupRmproListPanel',
                                                margin: '0 0 5 0',
                                                layout: 'vbox',
                                                items: [
                                                    {
                                                        xtype: 'panel',
                                                        hidden: true,
                                                        layout: 'hbox',
                                                        items: [
                                                            {
                                                                xtype: 'searchView',
                                                                flex: 1
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'listheaderforrmpro',
                                                        itemId: 'listheaderforrmpro2',
                                                        flex: 1
                                                    },
                                                    {
                                                        xtype: 'panel',
                                                        cls: 'onlyTopBorderDiv',
                                                        height: '30px',
                                                        style: ' background-color: gainsboro;font-weight: bold;',
                                                        layout: 'hbox',
                                                        items: [
                                                            {
                                                                xtype: 'fieldset',
                                                                margin: 0,
                                                                width: '74%',
                                                                layout: 'hbox',
                                                                items: [
                                                                    {
                                                                        xtype: 'textfield',
                                                                        hidden: true,
                                                                        itemId: 'rm_proBundlePriceTxtFld1',
                                                                        width: '280px',
                                                                        inputCls: 'highlightedColor',
                                                                        label: 'Bundle Price',
                                                                        labelCls: 'highlightedColor',
                                                                        labelWidth: '120px'
                                                                    },
                                                                    {
                                                                        xtype: 'button',
                                                                        cls: 'x-rm-blueBtn',
                                                                        height: '28px',
                                                                        hidden: true,
                                                                        itemId: 'saveBundleBtn1',
                                                                        margin: '0 5 0 5',
                                                                        text: 'Save Bundle'
                                                                    },
                                                                    {
                                                                        xtype: 'label',
                                                                        docked: 'right',
                                                                        html: 'Total price for selected items:',
                                                                        margin: '5 5 5 10',
                                                                        style: 'font-size: 0.75em;'
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'label',
                                                                itemId: 'rmProSumOfStdPriceLbl',
                                                                margin: '5 5 5 5',
                                                                minWidth: '10%',
                                                                style: 'text-align: right;font-size: 0.75em;'
                                                            },
                                                            {
                                                                xtype: 'label',
                                                                itemId: 'rmProSumOfPromoPriceLbl',
                                                                margin: '5 5 5 5',
                                                                minWidth: '10%',
                                                                style: 'text-align: right;font-size: 0.75em;'
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                xtype: 'button',
                                                handler: function(button, e) {
                                                    var form = Ext.ComponentQuery.query('#productRMPROaddUpdateFrmPanel')[0];

                                                    form.setHidden(! form.getHidden() ) ;

                                                    if(form.getHidden()){

                                                        button.setIconCls("arrow_left");
                                                    }else{

                                                        button.setIconCls("arrow_right");
                                                        //arrow_down
                                                    }
                                                },
                                                border: '0 0 0 0',
                                                cls: 'borderedDiv',
                                                height: 100,
                                                margin: '18% 0 0 0',
                                                padding: '0px 0px 0px 0px',
                                                style: 'background:transparent;border-radius: 20px;border-width: 1px !important;',
                                                width: 24,
                                                iconAlign: 'center',
                                                iconCls: 'arrow_right'
                                            },
                                            {
                                                xtype: 'formpanel',
                                                action: 'setScrollBarVisible',
                                                cls: 'x-rm-rdformpanel borderedDiv',
                                                itemId: 'productRMPROaddUpdateFrmPanel',
                                                margin: '0 5 5 0',
                                                width: '360px',
                                                scrollable: true,
                                                layout: {
                                                    type: 'vbox',
                                                    align: 'center'
                                                },
                                                items: [
                                                    {
                                                        xtype: 'fieldset',
                                                        itemId: 'rmProProductSetupSideP1',
                                                        width: '100%',
                                                        items: [
                                                            {
                                                                xtype: 'label',
                                                                labelAction: 'dropDown',
                                                                cls: [
                                                                    'fieldLbl',
                                                                    'pointerCursor'
                                                                ],
                                                                html: 'Bundle Setup<img src="resources/images/labelHeader/downArrow.png" style="float: right;"/>',
                                                                itemId: 'mylabel5',
                                                                margin: '1 0 10 0',
                                                                style: 'background-color: gainsboro;font-weight:bold;font-size:0.8em;'
                                                            },
                                                            {
                                                                xtype: 'selectfield',
                                                                itemId: 'rm_proPricingPolicySelectFld',
                                                                margin: 'margin: 0px 0px -3px 0px;',
                                                                width: '98%',
                                                                label: 'Bundle:',
                                                                labelWidth: '80px',
                                                                placeHolder: 'Select Pricing Policy',
                                                                autoSelect: false
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                itemId: 'rmProBundelNameTxtFld',
                                                                margin: '0px 0px -1px 0',
                                                                width: '98%',
                                                                label: 'Name:',
                                                                labelWidth: '80px'
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                isCurrency: true,
                                                                html: '<div style= "margin:-16px 0 0 -12px;font-size:12px;">$</div>',
                                                                itemId: 'rm_proBundlePriceTxtFld',
                                                                margin: '0 0 0 0',
                                                                width: '60%',
                                                                label: 'Price:',
                                                                labelWidth: '80px'
                                                            },
                                                            {
                                                                xtype: 'fieldset',
                                                                margin: '10 2px 0 80',
                                                                padding: '0 2 0 0',
                                                                layout: {
                                                                    type: 'hbox',
                                                                    align: 'start'
                                                                },
                                                                items: [
                                                                    {
                                                                        xtype: 'button',
                                                                        action: 'addNew',
                                                                        cls: 'x-rm-blueBtn',
                                                                        height: '20px',
                                                                        itemId: 'saveBundleBtn',
                                                                        width: '80px',
                                                                        text: 'Add'
                                                                    },
                                                                    {
                                                                        xtype: 'button',
                                                                        cls: 'newGrayBtn',
                                                                        height: '20px',
                                                                        itemId: 'deleteButtonBtn',
                                                                        margin: '0 5 0 5',
                                                                        minHeight: '24px',
                                                                        width: '80px',
                                                                        pressedCls: 'x-rm-card-actionbtn-pressing',
                                                                        text: 'Delete'
                                                                    },
                                                                    {
                                                                        xtype: 'button',
                                                                        handler: function(button, e) {
                                                                            Ext.ComponentQuery.query('#saveBundleBtn')[0].setText("Add") ;

                                                                            //rm_proPricingPolicySelectFld
                                                                        },
                                                                        cls: [
                                                                            'x-rm-blueBtn',
                                                                            'x-rm-rdopenbtns',
                                                                            'x-rm-smalliconbtns'
                                                                        ],
                                                                        height: '20px',
                                                                        itemId: 'clearBundleBtn',
                                                                        margin: '0 4 0 0',
                                                                        width: '80px',
                                                                        badgeText: '',
                                                                        iconAlign: 'center',
                                                                        text: 'Clear'
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        itemId: 'rmProProductSetupSideP2',
                                                        margin: '10 0 0 0',
                                                        width: '100%',
                                                        items: [
                                                            {
                                                                xtype: 'label',
                                                                labelAction: 'dropDown',
                                                                cls: [
                                                                    'fieldLbl',
                                                                    'pointerCursor'
                                                                ],
                                                                html: 'Features Setup<img src="resources/images/labelHeader/downArrow.png" style="float: right;"/>',
                                                                margin: '0 0 10 0',
                                                                style: 'font-size:0.8em;'
                                                            },
                                                            {
                                                                xtype: 'fieldset',
                                                                margin: '0 0 -1px 0',
                                                                width: '98%',
                                                                layout: {
                                                                    type: 'hbox',
                                                                    align: 'center',
                                                                    pack: 'center'
                                                                },
                                                                items: [
                                                                    {
                                                                        xtype: 'textfield',
                                                                        flex: 1,
                                                                        itemId: 'rmProListedOrderTxtFld',
                                                                        width: '98%',
                                                                        label: 'Index:',
                                                                        labelWidth: '80px'
                                                                    },
                                                                    {
                                                                        xtype: 'textfield',
                                                                        flex: 1,
                                                                        itemId: 'rmProSKUTxtFld',
                                                                        width: '98%',
                                                                        label: 'SKU:',
                                                                        labelWidth: 60
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                itemId: 'rmProModuleNameTxtFld',
                                                                margin: '0 0 0 0',
                                                                width: '98%',
                                                                label: 'Name:',
                                                                labelWidth: '80px'
                                                            },
                                                            {
                                                                xtype: 'fieldset',
                                                                width: '98%',
                                                                items: [
                                                                    {
                                                                        xtype: 'textareafield',
                                                                        height: '86px',
                                                                        itemId: 'rmProModuleDescriptionTxtAreaFld',
                                                                        margin: '0 0 3 0',
                                                                        width: '100%',
                                                                        label: 'Description:',
                                                                        labelWidth: '80px'
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'textareafield',
                                                                hidden: true,
                                                                itemId: 'rmProDetailsTxtAreaFld',
                                                                margin: '10 0 2 0',
                                                                width: '98%',
                                                                label: 'Details',
                                                                labelWidth: '110px'
                                                            },
                                                            {
                                                                xtype: 'fieldset',
                                                                width: '98%',
                                                                layout: {
                                                                    type: 'hbox',
                                                                    align: 'center',
                                                                    pack: 'center'
                                                                },
                                                                items: [
                                                                    {
                                                                        xtype: 'textfield',
                                                                        isCurrency: true,
                                                                        flex: 1,
                                                                        html: '<div style= "margin:-16px 0 0 -12px;font-size:12px;">$</div>',
                                                                        itemId: 'rmStandardPriceTxtFld',
                                                                        width: '98%',
                                                                        label: 'Price Std:',
                                                                        labelWidth: '80px'
                                                                    },
                                                                    {
                                                                        xtype: 'textfield',
                                                                        isCurrency: true,
                                                                        flex: 1,
                                                                        html: '<div style= "margin:-16px 0 0 -12px;font-size:12px;">$</div>',
                                                                        itemId: 'rmPromotionalPriceTxtFld',
                                                                        width: '98%',
                                                                        label: 'Promo:',
                                                                        labelWidth: '80px'
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'fieldset',
                                                                width: '98%',
                                                                layout: 'hbox',
                                                                items: [
                                                                    {
                                                                        xtype: 'textfield',
                                                                        flex: 1,
                                                                        hidden: true,
                                                                        itemId: 'rmProModuleQuantityTxtFld',
                                                                        width: '30%',
                                                                        label: 'Quantity:',
                                                                        labelWidth: '80px'
                                                                    },
                                                                    {
                                                                        xtype: 'textfield',
                                                                        flex: 1,
                                                                        itemId: 'rmProModuleProductIdTxtFld',
                                                                        margin: '0 1 0 1',
                                                                        width: '35%',
                                                                        label: 'Product Id:',
                                                                        labelWidth: '80px'
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                xtype: 'fieldset',
                                                                margin: '10 2px 0 80',
                                                                layout: {
                                                                    type: 'hbox',
                                                                    align: 'start'
                                                                },
                                                                items: [
                                                                    {
                                                                        xtype: 'button',
                                                                        action: 'addNew',
                                                                        cls: 'x-rm-blueBtn',
                                                                        height: '20px',
                                                                        itemId: 'rmProAddModuleBtn',
                                                                        margin: '0 0 0 1',
                                                                        width: '80px',
                                                                        text: 'Add'
                                                                    },
                                                                    {
                                                                        xtype: 'button',
                                                                        handler: function(button, e) {
                                                                            RMdatalink.app.getController('DeleteRecords').deleteRMPRO();
                                                                        },
                                                                        cls: 'newGrayBtn',
                                                                        height: '20px',
                                                                        itemId: 'rmProDeleteModuleBtn',
                                                                        margin: '0 5 0 5',
                                                                        minHeight: '24px',
                                                                        width: '80px',
                                                                        pressedCls: 'x-rm-card-actionbtn-pressing',
                                                                        text: 'Delete'
                                                                    },
                                                                    {
                                                                        xtype: 'button',
                                                                        cls: [
                                                                            'x-rm-blueBtn',
                                                                            'x-rm-rdopenbtns',
                                                                            'x-rm-smalliconbtns'
                                                                        ],
                                                                        height: '20px',
                                                                        itemId: 'rmProNewResetBtn',
                                                                        margin: '0 0 0 0',
                                                                        width: '80px',
                                                                        badgeText: '',
                                                                        iconAlign: 'center',
                                                                        text: 'Clear'
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        border: '1 1 1 1',
                                                        itemId: 'rmProDiscountListPanel',
                                                        margin: '10 0 0 0',
                                                        width: '100%',
                                                        layout: 'vbox',
                                                        items: [
                                                            {
                                                                xtype: 'label',
                                                                labelAction: 'dropDown',
                                                                cls: [
                                                                    'fieldLbl',
                                                                    'pointerCursor'
                                                                ],
                                                                html: 'Advance Payment Benefits<img src="resources/images/labelHeader/downArrow.png" style="float: right;"/>',
                                                                itemId: 'mylabel6',
                                                                margin: '0 0 10 0',
                                                                style: 'background-color: gainsboro;font-weight:bold;font-size:0.8em;'
                                                            },
                                                            {
                                                                xtype: 'listwithheader',
                                                                itemId: 'rm_proAdvancePaymentDiscountList',
                                                                margin: '0 0 0 0'
                                                            },
                                                            {
                                                                xtype: 'fieldset',
                                                                margin: '10 2px 10 80',
                                                                padding: '0 2 0 0',
                                                                layout: {
                                                                    type: 'hbox',
                                                                    align: 'start'
                                                                },
                                                                items: [
                                                                    {
                                                                        xtype: 'button',
                                                                        action: 'addNew',
                                                                        cls: 'x-rm-blueBtn',
                                                                        height: '20px',
                                                                        itemId: 'rmProDiscountSaveBtn',
                                                                        width: '80px',
                                                                        text: 'Update'
                                                                    },
                                                                    {
                                                                        xtype: 'button',
                                                                        cls: 'newGrayBtn',
                                                                        height: '20px',
                                                                        itemId: 'rmProDiscountDeleteBtn',
                                                                        margin: '0 5 0 5',
                                                                        minHeight: '24px',
                                                                        width: '80px',
                                                                        pressedCls: 'x-rm-card-actionbtn-pressing',
                                                                        text: 'Delete'
                                                                    },
                                                                    {
                                                                        xtype: 'button',
                                                                        handler: function(button, e) {

                                                                        },
                                                                        cls: [
                                                                            'x-rm-blueBtn',
                                                                            'x-rm-rdopenbtns',
                                                                            'x-rm-smalliconbtns'
                                                                        ],
                                                                        height: '20px',
                                                                        itemId: 'rmProDiscountClearBtn',
                                                                        margin: '0 4 0 0',
                                                                        width: '80px',
                                                                        badgeText: '',
                                                                        iconAlign: 'center',
                                                                        text: 'Clear'
                                                                    }
                                                                ]
                                                            }
                                                        ],
                                                        listeners: [
                                                            {
                                                                fn: function(component, eOpts) {
                                                                    var headers = component.down("#headerList");
                                                                    headers.setData([{}]);
                                                                    headers.setItemTpl(
                                                                    Ext.create('Ext.XTemplate',
                                                                    '<div class="x-rm-listtpl-main">',

                                                                    '    <div style="width: 20%;" data-name="discount_name">',
                                                                    '        Name&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                                    '    </div>',
                                                                    '    <div style="width: 15%;" data-name="discount_value">',
                                                                    '        Discount&nbsp;<img src="resources/images/button_icons/downArrow.png"/>',
                                                                    '    </div>',

                                                                    '</div>'
                                                                    )
                                                                    );
                                                                    headers.refresh();
                                                                    headers.setHidden(true);

                                                                    var list = component.down('#mainList');
                                                                    list.setStore(Ext.getStore('products.RMProDiscountStore'));
                                                                    list.setItemTpl(
                                                                    Ext.create('Ext.XTemplate',
                                                                    '<div class="x-rm-listtpl-main pointerCursor">',

                                                                    '    <div style="width: 74%;padding-left: 15%;">{discount_name}</div>',
                                                                    '    <div style="width: 5%;">%</div>',

                                                                    '<div style="width: 15%;text-align: center;">',
                                                                    '    <input type="text" style="width: 92% !important;margin-left: 2%;height: 16px;padding-left: 2px;" class="x-rm-rdinlinecmt prodRmprolstflds" data-id="{id}" value="{discount_value}" maxlength="24"',
                                                                    '        onchange="RMdatalink.app.getController(\'RMProController\').updateRmproDiscount(this,\'discount_value\');"/>',
                                                                    '</div>',


                                                                    '</div>'
                                                                    )
                                                                    );

                                                                    list.setMode("SINGLE");

                                                                    list.on("select",function(discountList, record, eOpts){
                                                                        RMdatalink.app.getController('RMProController').onRM_PRODiscountSelect(discountList, record);
                                                                    });
                                                                },
                                                                event: 'initialize'
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                xtype: 'container',
                                title: 'Discount',
                                hidden: true,
                                layout: 'vbox',
                                items: [
                                    {
                                        xtype: 'panel',
                                        flex: 1,
                                        layout: 'vbox',
                                        items: [
                                            {
                                                xtype: 'formpanel',
                                                cls: 'x-rm-rdformpanel',
                                                height: '100px',
                                                width: '100%',
                                                items: [
                                                    {
                                                        xtype: 'button',
                                                        cls: [
                                                            'x-rm-blueBtn',
                                                            'x-rm-rdopenbtns',
                                                            'x-rm-smalliconbtns'
                                                        ],
                                                        docked: 'top',
                                                        height: '25px',
                                                        itemId: 'rmProDiscountResetBtn',
                                                        width: '50px',
                                                        badgeText: '',
                                                        icon: ' resources//images//retailerDetail//add_btn.png',
                                                        iconAlign: 'center'
                                                    },
                                                    {
                                                        xtype: 'fieldset',
                                                        layout: 'hbox',
                                                        items: [
                                                            {
                                                                xtype: 'textfield',
                                                                itemId: 'rmProDiscountNameFld',
                                                                width: '260px',
                                                                label: 'Discount Name',
                                                                labelWidth: '100px'
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                itemId: 'rmProDiscountValueFld',
                                                                label: 'Discount',
                                                                labelWidth: '80px'
                                                            },
                                                            {
                                                                xtype: 'textfield',
                                                                itemId: 'rmProDiscountDurationFld',
                                                                label: 'Discount Duration In Year',
                                                                labelWidth: '160px'
                                                            },
                                                            {
                                                                xtype: 'button',
                                                                cls: 'x-rm-blueBtn',
                                                                height: '25px',
                                                                itemId: 'rmProDiscountSaveBtn1',
                                                                margin: '0 5 0 5',
                                                                minWidth: '100px',
                                                                text: 'Add New Discount'
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        ],
        listeners: [
            {
                fn: 'onRmProListItemTap',
                event: 'itemtap',
                delegate: '#listheaderforrmpro2 #mainList'
            },
            {
                fn: 'onListItemTap',
                event: 'itemtap',
                delegate: '#listheaderforrmpro2 #headerList'
            },
            {
                fn: 'onInhouseMainContentPanelInitialize',
                event: 'initialize'
            }
        ]
    },

    onRmProListItemTap: function(dataview, index, target, record, e, eOpts) {

        var attrToSearch = RMdatalink.util.globalConfig.getListAttrForDelHandling();
        var targetEl = e.target;


        // delegateAttr="onCartTap"

        if( RMdatalink.util.globalConfig.isAttributePresentInTarget( attrToSearch,targetEl )  ){

                 var attrVak = targetEl.getAttribute(attrToSearch);

                 if(attrVak == "onCartTap")
                 {

                     //always before onRmProSelectUnselect

                      RMdatalink.app.getController('RMProController').onRmProSelectionAction(dataview,record,index);


                           // var timeout = setTimeout(function(){

                                 RMdatalink.app.getController('RMProController').onRmProSelectUnselect();

                           //      clearTimeout(timeout);
                            //},100);


                 }

        }else{

            if(dataview.isSelected(record))
            {

                dataview.deselect(record,true) ;
            }else{

                dataview.select(record,true) ;
            }

            var str = dataview.getStore();
            for(var i=0; i < str.getData().all.length ; i++){
                str.getAt(i).set('is_itemtap',false);;
            }
             record.set('is_itemtap',true);

             RMdatalink.app.getController('RMProController').onProductRMProListSelect(dataview, record, eOpts);
        }
    },

    onListItemTap: function(dataview, index, target, record, e, eOpts) {

        var attrToSearch = RMdatalink.util.globalConfig.getListAttrForDelHandling();
        var targetEl = e.target;


        // delegateAttr="onCartTap"

        var list = dataview.getParent().down('#mainList') ;


        if( RMdatalink.util.globalConfig.isAttributePresentInTarget( attrToSearch,targetEl )  ){

                 var attrVak = targetEl.getAttribute(attrToSearch);

                 if(attrVak == "onCartTap")
                 {
                         if(dataview.isSelected(record))
                        {

                             list.deselectAll(true) ;
                             list.select(RMdatalink.app.getController('RMProController').config.prevSelected,true,true);



                        }else{
                              RMdatalink.app.getController('RMProController').config.prevSelected = list.getSelection() ;
                              list.selectAll(true) ;
                        }

                       RMdatalink.app.getController('RMProController').onRmProSelectUnselect();
                 }

        }else{

            if(dataview.isSelected(record))
            {

                dataview.deselect(record,true) ;
            }else{

                dataview.select(record,true) ;
            }
        }



    },

    onInhouseMainContentPanelInitialize: function(component, eOpts) {
        component.down('#cardAddRetailerBtn').setHidden(true) ;

        component.down('#cardDeleteBtn').setHidden(false) ;

        component.down('#cardActionBtn').setHidden(true) ;
        component.down('#cardImportBtn').setHidden(true) ;

        component.down('#cardExportBtn').setHidden(true) ;

        component.down('#cardTitleLabel').setHtml("RMPro");



        component.down('#cardDeleteBtn').element.on("tap",function(){

             RMdatalink.app.getController('DeleteRecords').deleteRMPRO();
        });




    }

});